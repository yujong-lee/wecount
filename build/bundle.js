var wecount=function(){"use strict";function noop$2(){}function assign(e,t){for(const n in t)e[n]=t[n];return e}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let src_url_equal_anchor,current_component;function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function subscribe(e,...t){if(null==e)return noop$2;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function component_subscribe(e,t,n){e.$$.on_destroy.push(subscribe(t,n))}function create_slot(e,t,n,r){if(e){const i=get_slot_context(e,t,n,r);return e[0](i)}}function get_slot_context(e,t,n,r){return e[1]&&r?assign(n.ctx.slice(),e[1](r(t))):n.ctx}function get_slot_changes(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function update_slot_base(e,t,n,r,i,o){if(i){const s=get_slot_context(t,n,r,o);e.p(s,i)}}function get_all_dirty_from_scope(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function exclude_internal_props(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function null_to_empty(e){return null==e?"":e}function action_destroyer(e){return e&&is_function(e.destroy)?e.destroy:noop$2}function append(e,t){e.appendChild(t)}function insert(e,t,n){e.insertBefore(t,n||null)}function detach(e){e.parentNode.removeChild(e)}function destroy_each(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function element(e){return document.createElement(e)}function svg_element(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function empty(){return text("")}function listen(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function prevent_default(e){return function(t){return t.preventDefault(),e.call(this,t)}}function self$1(e){return function(t){t.target===this&&e.call(this,t)}}function attr(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function set_svg_attributes(e,t){for(const n in t)attr(e,n,t[n])}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function set_input_value(e,t){e.value=null==t?"":t}function set_style(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function toggle_class(e,t,n){e.classList[n?"add":"remove"](t)}function custom_event(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function afterUpdate(e){get_current_component().$$.after_update.push(e)}function onDestroy(e){get_current_component().$$.on_destroy.push(e)}function createEventDispatcher(){const e=get_current_component();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=custom_event(t,n);r.slice().forEach((t=>{t.call(e,i)}))}}}function bubble(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(e){render_callbacks.push(e)}function add_flush_callback(e){flush_callbacks.push(e)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let e=0;e<dirty_components.length;e+=1){const t=dirty_components[e];set_current_component(t),update(t.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function transition_out(e,t,n,r){if(e&&e.o){if(outroing.has(e))return;outroing.add(e),outros.c.push((()=>{outroing.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function get_spread_update(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function get_spread_object(e){return"object"==typeof e&&null!==e?e:{}}function bind(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function create_component(e){e&&e.c()}function mount_component(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=e.$$;i&&i.m(t,n),r||add_render_callback((()=>{const t=o.map(run).filter(is_function);s?s.push(...t):run_all(t),e.$$.on_mount=[]})),a.forEach(add_render_callback)}function destroy_component(e,t){const n=e.$$;null!==n.fragment&&(run_all(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init(e,t,n,r,i,o,s,a=[-1]){const c=current_component;set_current_component(e);const l=e.$$={fragment:null,ctx:null,props:o,update:noop$2,not_equal:i,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:t.context||[]),callbacks:blank_object(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return l.ctx&&i(l.ctx[t],l.ctx[t]=o)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](o),u&&make_dirty(e,t)),n})):[],l.update(),u=!0,run_all(l.before_update),l.fragment=!!r&&r(l.ctx),t.target){if(t.hydrate){const e=children(t.target);l.fragment&&l.fragment.l(e),e.forEach(detach)}else l.fragment&&l.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$2}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const subscriber_queue=[];function readable(e,t){return{subscribe:writable(e,t).subscribe}}function writable(e,t=noop$2){let n;const r=new Set;function i(t){if(safe_not_equal(e,t)&&(e=t,n)){const t=!subscriber_queue.length;for(const t of r)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(o,s=noop$2){const a=[o,s];return r.add(a),1===r.size&&(n=t(i)||noop$2),o(e),()=>{r.delete(a),0===r.size&&(n(),n=null)}}}}function derived(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return readable(n,(e=>{let n=!1;const s=[];let a=0,c=noop$2;const l=()=>{if(a)return;c();const n=t(r?s[0]:s,e);o?e(n):c=is_function(n)?n:noop$2},u=i.map(((e,t)=>subscribe(e,(e=>{s[t]=e,a&=~(1<<t),n&&l()}),(()=>{a|=1<<t}))));return n=!0,l(),function(){run_all(u),c()}}))}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"==typeof e}function isSpecial(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(emptyTarget(e),e,t):e}function defaultArrayMerge(e,t,n){return e.concat(t).map((function(e){return cloneUnlessOtherwiseSpecified(e,n)}))}function getMergeFunction(e,t){if(!t.customMerge)return deepmerge;var n=t.customMerge(e);return"function"==typeof n?n:deepmerge}function getEnumerableOwnPropertySymbols(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}function getKeys(e){return Object.keys(e).concat(getEnumerableOwnPropertySymbols(e))}function propertyIsOnObject(e,t){try{return t in e}catch(e){return!1}}function propertyIsUnsafe(e,t){return propertyIsOnObject(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mergeObject(e,t,n){var r={};return n.isMergeableObject(e)&&getKeys(e).forEach((function(t){r[t]=cloneUnlessOtherwiseSpecified(e[t],n)})),getKeys(t).forEach((function(i){propertyIsUnsafe(e,i)||(propertyIsOnObject(e,i)&&n.isMergeableObject(t[i])?r[i]=getMergeFunction(i,n)(e[i],t[i],n):r[i]=cloneUnlessOtherwiseSpecified(t[i],n))})),r}function deepmerge(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||defaultArrayMerge,n.isMergeableObject=n.isMergeableObject||isMergeableObject,n.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):mergeObject(e,t,n):cloneUnlessOtherwiseSpecified(t,n)}deepmerge.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return deepmerge(e,n,t)}),{})};var deepmerge_1=deepmerge,cjs=deepmerge_1,extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ErrorKind,TYPE,SKELETON_TYPE;function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function __awaiter$9(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function isLiteralElement(e){return e.type===TYPE.literal}function isArgumentElement(e){return e.type===TYPE.argument}function isNumberElement(e){return e.type===TYPE.number}function isDateElement(e){return e.type===TYPE.date}function isTimeElement(e){return e.type===TYPE.time}function isSelectElement(e){return e.type===TYPE.select}function isPluralElement(e){return e.type===TYPE.plural}function isPoundElement(e){return e.type===TYPE.pound}function isTagElement(e){return e.type===TYPE.tag}function isNumberSkeleton(e){return!(!e||"object"!=typeof e||e.type!==SKELETON_TYPE.number)}function isDateTimeSkeleton(e){return!(!e||"object"!=typeof e||e.type!==SKELETON_TYPE.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(ErrorKind||(ErrorKind={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(TYPE||(TYPE={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(SKELETON_TYPE||(SKELETON_TYPE={}));var SPACE_SEPARATOR_REGEX=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,DATE_TIME_REGEX=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function parseDateTimeSkeleton(e){var t={};return e.replace(DATE_TIME_REGEX,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var WHITE_SPACE_REGEX=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function parseNumberSkeletonFromString(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(WHITE_SPACE_REGEX).filter((function(e){return e.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],s=i.slice(1),a=0,c=s;a<c.length;a++){if(0===c[a].length)throw new Error("Invalid number skeleton")}t.push({stem:o,options:s})}return t}function icuUnitToEcma(e){return e.replace(/^(.*?)-/,"")}var FRACTION_PRECISION_REGEX=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,SIGNIFICANT_PRECISION_REGEX=/^(@+)?(\+|#+)?$/g,INTEGER_WIDTH_REGEX=/(\*)(0+)|(#+)(0+)|(0+)/g,CONCISE_INTEGER_WIDTH_REGEX=/^(0+)$/,_a;function parseSignificantPrecision(e){var t={};return e.replace(SIGNIFICANT_PRECISION_REGEX,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function parseSign(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function parseConciseScientificAndEngineeringStem(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!CONCISE_INTEGER_WIDTH_REGEX.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function parseNotationOptions(e){var t=parseSign(e);return t||{}}function parseNumberSkeleton(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=icuUnitToEcma(i.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=__assign(__assign(__assign({},t),{notation:"scientific"}),i.options.reduce((function(e,t){return __assign(__assign({},e),parseNotationOptions(t))}),{}));continue;case"engineering":t=__assign(__assign(__assign({},t),{notation:"engineering"}),i.options.reduce((function(e,t){return __assign(__assign({},e),parseNotationOptions(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(INTEGER_WIDTH_REGEX,(function(e,n,r,i,o,s){if(n)t.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(CONCISE_INTEGER_WIDTH_REGEX.test(i.stem))t.minimumIntegerDigits=i.stem.length;else if(FRACTION_PRECISION_REGEX.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(FRACTION_PRECISION_REGEX,(function(e,n,r,i,o,s){return"*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&s?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),i.options.length&&(t=__assign(__assign({},t),parseSignificantPrecision(i.options[0])))}else if(SIGNIFICANT_PRECISION_REGEX.test(i.stem))t=__assign(__assign({},t),parseSignificantPrecision(i.stem));else{var o=parseSign(i.stem);o&&(t=__assign(__assign({},t),o));var s=parseConciseScientificAndEngineeringStem(i.stem);s&&(t=__assign(__assign({},t),s))}}return t}var SPACE_SEPARATOR_START_REGEX=new RegExp("^"+SPACE_SEPARATOR_REGEX.source+"*"),SPACE_SEPARATOR_END_REGEX=new RegExp(SPACE_SEPARATOR_REGEX.source+"*$");function createLocation(e,t){return{start:e,end:t}}var hasNativeStartsWith=!!String.prototype.startsWith,hasNativeFromCodePoint=!!String.fromCodePoint,hasNativeFromEntries=!!Object.fromEntries,hasNativeCodePointAt=!!String.prototype.codePointAt,hasTrimStart=!!String.prototype.trimStart,hasTrimEnd=!!String.prototype.trimEnd,hasNativeIsSafeInteger=!!Number.isSafeInteger,isSafeInteger=hasNativeIsSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},REGEX_SUPPORTS_U_AND_Y=!0;try{var re=RE("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");REGEX_SUPPORTS_U_AND_Y="a"===(null===(_a=re.exec("a"))||void 0===_a?void 0:_a[0])}catch(_){REGEX_SUPPORTS_U_AND_Y=!1}var startsWith=hasNativeStartsWith?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},fromCodePoint=hasNativeFromCodePoint?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},fromEntries=hasNativeFromEntries?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];t[o]=s}return t},codePointAt=hasNativeCodePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},trimStart=hasTrimStart?function(e){return e.trimStart()}:function(e){return e.replace(SPACE_SEPARATOR_START_REGEX,"")},trimEnd=hasTrimEnd?function(e){return e.trimEnd()}:function(e){return e.replace(SPACE_SEPARATOR_END_REGEX,"")},matchIdentifierAtIndex;function RE(e,t){return new RegExp(e,t)}if(REGEX_SUPPORTS_U_AND_Y){var IDENTIFIER_PREFIX_RE_1=RE("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");matchIdentifierAtIndex=function(e,t){var n;return IDENTIFIER_PREFIX_RE_1.lastIndex=t,null!==(n=IDENTIFIER_PREFIX_RE_1.exec(e)[1])&&void 0!==n?n:""}}else matchIdentifierAtIndex=function(e,t){for(var n=[];;){var r=codePointAt(e,t);if(void 0===r||_isWhiteSpace(r)||_isPatternSyntax(r))break;n.push(r),t+=r>=65536?2:1}return fromCodePoint.apply(void 0,n)};var Parser=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val)}else{if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(ErrorKind.UNMATCHED_CLOSING_TAG,createLocation(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&_isAlpha(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val)}}else{var s=this.clonePosition();this.bump(),r.push({type:TYPE.pound,location:createLocation(s,this.clonePosition())})}}}return{val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:TYPE.literal,value:"<"+r+"/>",location:createLocation(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,s=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!_isAlpha(this.char()))return this.error(ErrorKind.INVALID_TAG,createLocation(s,this.clonePosition()));var a=this.clonePosition();return r!==this.parseTagName()?this.error(ErrorKind.UNMATCHED_CLOSING_TAG,createLocation(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:TYPE.tag,value:r,children:o,location:createLocation(n,this.clonePosition())},err:null}:this.error(ErrorKind.INVALID_TAG,createLocation(s,this.clonePosition())))}return this.error(ErrorKind.UNCLOSED_TAG,createLocation(n,this.clonePosition()))}return this.error(ErrorKind.INVALID_TAG,createLocation(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&_isPotentialElementNameChar(this.char());)this.bump();return this.message.slice(e,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var o=this.tryParseUnquoted(e,t);if(o)r+=o;else{var s=this.tryParseLeftAngleBracket();if(!s)break;r+=s}}}var a=createLocation(n,this.clonePosition());return{val:{type:TYPE.literal,value:r,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&_isAlphaOrSlash(this.peek()||0)?null:(this.bump(),"<")},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return fromCodePoint.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),fromCodePoint(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE,createLocation(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(ErrorKind.EMPTY_ARGUMENT,createLocation(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(ErrorKind.MALFORMED_ARGUMENT,createLocation(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE,createLocation(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:TYPE.argument,value:r,location:createLocation(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE,createLocation(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(ErrorKind.MALFORMED_ARGUMENT,createLocation(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=matchIdentifierAtIndex(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:createLocation(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i,o=this.clonePosition(),s=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(s){case"":return this.error(ErrorKind.EXPECT_ARGUMENT_TYPE,createLocation(o,a));case"number":case"date":case"time":this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var l=this.clonePosition();if((_=this.parseSimpleArgStyleIfPossible()).err)return _;if(0===(d=trimEnd(_.val)).length)return this.error(ErrorKind.EXPECT_ARGUMENT_STYLE,createLocation(this.clonePosition(),this.clonePosition()));c={style:d,styleLocation:createLocation(l,this.clonePosition())}}if((g=this.tryParseArgumentClose(r)).err)return g;var u=createLocation(r,this.clonePosition());if(c&&startsWith(null==c?void 0:c.style,"::",0)){var p=trimStart(c.style.slice(2));if("number"===s)return(_=this.parseNumberSkeletonFromString(p,c.styleLocation)).err?_:{val:{type:TYPE.number,value:n,location:u,style:_.val},err:null};if(0===p.length)return this.error(ErrorKind.EXPECT_DATE_TIME_SKELETON,u);var d={type:SKELETON_TYPE.dateTime,pattern:p,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?parseDateTimeSkeleton(p):{}};return{val:{type:"date"===s?TYPE.date:TYPE.time,value:n,location:u,style:d},err:null}}return{val:{type:"number"===s?TYPE.number:"date"===s?TYPE.date:TYPE.time,value:n,location:u,style:null!==(i=null==c?void 0:c.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(ErrorKind.EXPECT_SELECT_ARGUMENT_OPTIONS,createLocation(h,__assign({},h)));this.bumpSpace();var f=this.parseIdentifierIfPossible(),m=0;if("select"!==s&&"offset"===f.value){if(!this.bumpIf(":"))return this.error(ErrorKind.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,createLocation(this.clonePosition(),this.clonePosition()));var _;if(this.bumpSpace(),(_=this.tryParseDecimalInteger(ErrorKind.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ErrorKind.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return _;this.bumpSpace(),f=this.parseIdentifierIfPossible(),m=_.val}var g,v=this.tryParsePluralOrSelectOptions(e,s,t,f);if(v.err)return v;if((g=this.tryParseArgumentClose(r)).err)return g;var y=createLocation(r,this.clonePosition());return"select"===s?{val:{type:TYPE.select,value:n,options:fromEntries(v.val),location:y},err:null}:{val:{type:TYPE.plural,value:n,options:fromEntries(v.val),offset:m,pluralType:"plural"===s?"cardinal":"ordinal",location:y},err:null};default:return this.error(ErrorKind.INVALID_ARGUMENT_TYPE,createLocation(o,a))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(ErrorKind.EXPECT_ARGUMENT_CLOSING_BRACE,createLocation(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(ErrorKind.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,createLocation(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=parseNumberSkeletonFromString(e)}catch(e){return this.error(ErrorKind.INVALID_NUMBER_SKELETON,t)}return{val:{type:SKELETON_TYPE.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?parseNumberSkeleton(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,s=[],a=new Set,c=r.value,l=r.location;;){if(0===c.length){var u=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var p=this.tryParseDecimalInteger(ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR,ErrorKind.INVALID_PLURAL_ARGUMENT_SELECTOR);if(p.err)return p;l=createLocation(u,this.clonePosition()),c=this.message.slice(u.offset,this.offset())}if(a.has(c))return this.error("select"===t?ErrorKind.DUPLICATE_SELECT_ARGUMENT_SELECTOR:ErrorKind.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);"other"===c&&(o=!0),this.bumpSpace();var d=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?ErrorKind.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,createLocation(this.clonePosition(),this.clonePosition()));var h=this.parseMessage(e+1,t,n);if(h.err)return h;var f=this.tryParseArgumentClose(d);if(f.err)return f;s.push([c,{value:h.val,location:createLocation(d,this.clonePosition())}]),a.add(c),this.bumpSpace(),c=(i=this.parseIdentifierIfPossible()).value,l=i.location}return 0===s.length?this.error("select"===t?ErrorKind.EXPECT_SELECT_ARGUMENT_SELECTOR:ErrorKind.EXPECT_PLURAL_ARGUMENT_SELECTOR,createLocation(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(ErrorKind.MISSING_OTHER_CLAUSE,createLocation(this.clonePosition(),this.clonePosition())):{val:s,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;i=!0,o=10*o+(s-48),this.bump()}var a=createLocation(r,this.clonePosition());return i?isSafeInteger(o*=n)?{val:o,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=codePointAt(this.message,e);if(void 0===t)throw Error("Offset "+e+" is at invalid UTF-16 code unit boundary");return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(startsWith(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset "+e+" must be greater than or equal to the current offset "+this.offset());for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset "+e+" is at invalid UTF-16 code unit boundary");if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&_isWhiteSpace(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function _isAlpha(e){return e>=97&&e<=122||e>=65&&e<=90}function _isAlphaOrSlash(e){return _isAlpha(e)||47===e}function _isPotentialElementNameChar(e){return 45===e||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function _isWhiteSpace(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function _isPatternSyntax(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function pruneLocation(e){e.forEach((function(e){if(delete e.location,isSelectElement(e)||isPluralElement(e))for(var t in e.options)delete e.options[t].location,pruneLocation(e.options[t].value);else isNumberElement(e)&&isNumberSkeleton(e.style)||(isDateElement(e)||isTimeElement(e))&&isDateTimeSkeleton(e.style)?delete e.style.location:isTagElement(e)&&pruneLocation(e.children)}))}function parse$2(e,t){void 0===t&&(t={}),t=__assign({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Parser(e,t).parse();if(n.err){var r=SyntaxError(ErrorKind[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return(null==t?void 0:t.captureLocation)||pruneLocation(n.val),n.val}function memoize(e,t){var n=t&&t.cache?t.cache:cacheDefault,r=t&&t.serializer?t.serializer:serializerDefault;return(t&&t.strategy?t.strategy:strategyDefault)(e,{cache:n,serializer:r})}function isPrimitive(e){return null==e||"number"==typeof e||"boolean"==typeof e}function monadic(e,t,n,r){var i=isPrimitive(r)?r:n(r),o=t.get(i);return void 0===o&&(o=e.call(this,r),t.set(i,o)),o}function variadic(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=t.get(i);return void 0===o&&(o=e.apply(this,r),t.set(i,o)),o}function assemble(e,t,n,r,i){return n.bind(t,e,r,i)}function strategyDefault(e,t){return assemble(e,this,1===e.length?monadic:variadic,t.cache.create(),t.serializer)}function strategyVariadic(e,t){return assemble(e,this,variadic,t.cache.create(),t.serializer)}function strategyMonadic(e,t){return assemble(e,this,monadic,t.cache.create(),t.serializer)}var serializerDefault=function(){return JSON.stringify(arguments)};function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.get=function(e){return this.cache[e]},ObjectWithoutPrototypeCache.prototype.set=function(e,t){this.cache[e]=t};var cacheDefault={create:function(){return new ObjectWithoutPrototypeCache}},strategies={variadic:strategyVariadic,monadic:strategyMonadic},ErrorCode;!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(ErrorCode||(ErrorCode={}));var FormatError=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return __extends(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),InvalidValueError=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',ErrorCode.INVALID_VALUE,i)||this}return __extends(t,e),t}(FormatError),InvalidValueTypeError=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,ErrorCode.INVALID_VALUE,r)||this}return __extends(t,e),t}(FormatError),MissingValueError=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',ErrorCode.MISSING_VALUE,n)||this}return __extends(t,e),t}(FormatError),PART_TYPE;function mergeLiteral(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===PART_TYPE.literal&&t.type===PART_TYPE.literal?n.value+=t.value:e.push(t),e}),[])}function isFormatXMLElementFn(e){return"function"==typeof e}function formatToParts(e,t,n,r,i,o,s){if(1===e.length&&isLiteralElement(e[0]))return[{type:PART_TYPE.literal,value:e[0].value}];for(var a=[],c=0,l=e;c<l.length;c++){var u=l[c];if(isLiteralElement(u))a.push({type:PART_TYPE.literal,value:u.value});else if(isPoundElement(u))"number"==typeof o&&a.push({type:PART_TYPE.literal,value:n.getNumberFormat(t).format(o)});else{var p=u.value;if(!i||!(p in i))throw new MissingValueError(p,s);var d=i[p];if(isArgumentElement(u))d&&"string"!=typeof d&&"number"!=typeof d||(d="string"==typeof d||"number"==typeof d?String(d):""),a.push({type:"string"==typeof d?PART_TYPE.literal:PART_TYPE.object,value:d});else if(isDateElement(u)){var h="string"==typeof u.style?r.date[u.style]:isDateTimeSkeleton(u.style)?u.style.parsedOptions:void 0;a.push({type:PART_TYPE.literal,value:n.getDateTimeFormat(t,h).format(d)})}else if(isTimeElement(u)){h="string"==typeof u.style?r.time[u.style]:isDateTimeSkeleton(u.style)?u.style.parsedOptions:void 0;a.push({type:PART_TYPE.literal,value:n.getDateTimeFormat(t,h).format(d)})}else if(isNumberElement(u)){(h="string"==typeof u.style?r.number[u.style]:isNumberSkeleton(u.style)?u.style.parsedOptions:void 0)&&h.scale&&(d*=h.scale||1),a.push({type:PART_TYPE.literal,value:n.getNumberFormat(t,h).format(d)})}else{if(isTagElement(u)){var f=u.children,m=u.value,_=i[m];if(!isFormatXMLElementFn(_))throw new InvalidValueTypeError(m,"function",s);var g=_(formatToParts(f,t,n,r,i,o).map((function(e){return e.value})));Array.isArray(g)||(g=[g]),a.push.apply(a,g.map((function(e){return{type:"string"==typeof e?PART_TYPE.literal:PART_TYPE.object,value:e}})))}if(isSelectElement(u)){if(!(v=u.options[d]||u.options.other))throw new InvalidValueError(u.value,d,Object.keys(u.options),s);a.push.apply(a,formatToParts(v.value,t,n,r,i))}else if(isPluralElement(u)){var v;if(!(v=u.options["="+d])){if(!Intl.PluralRules)throw new FormatError('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',ErrorCode.MISSING_INTL_API,s);var y=n.getPluralRules(t,{type:u.pluralType}).select(d-(u.offset||0));v=u.options[y]||u.options.other}if(!v)throw new InvalidValueError(u.value,d,Object.keys(u.options),s);a.push.apply(a,formatToParts(v.value,t,n,r,i,d-(u.offset||0)))}else;}}}return mergeLiteral(a)}function mergeConfig(e,t){return t?__assign(__assign(__assign({},e||{}),t||{}),Object.keys(e).reduce((function(n,r){return n[r]=__assign(__assign({},e[r]),t[r]||{}),n}),{})):e}function mergeConfigs(e,t){return t?Object.keys(e).reduce((function(n,r){return n[r]=mergeConfig(e[r],t[r]),n}),__assign({},e)):e}function createFastMemoizeCache(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function createDefaultFormatters(e){return void 0===e&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:memoize((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,__spreadArray([void 0],t)))}),{cache:createFastMemoizeCache(e.number),strategy:strategies.variadic}),getDateTimeFormat:memoize((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,__spreadArray([void 0],t)))}),{cache:createFastMemoizeCache(e.dateTime),strategy:strategies.variadic}),getPluralRules:memoize((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,__spreadArray([void 0],t)))}),{cache:createFastMemoizeCache(e.pluralRules),strategy:strategies.variadic})}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(PART_TYPE||(PART_TYPE={}));var IntlMessageFormat=function(){function e(t,n,r,i){var o=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=o.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===PART_TYPE.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return formatToParts(o.ast,o.locales,o.formatters,o.formats,e,void 0,o.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==i?void 0:i.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=mergeConfigs(e.formats,r),this.locales=n,this.formatters=i&&i.formatters||createDefaultFormatters(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=parse$2,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),o=IntlMessageFormat;const r={},i=(e,t,n)=>n?(t in r||(r[t]={}),e in r[t]||(r[t][e]=n),n):n,a=(e,t)=>{if(null==t)return;if(t in r&&e in r[t])return r[t][e];const n=E(t);for(let r=0;r<n.length;r++){const o=c(n[r],e);if(o)return i(e,t,o)}};let l;const s=writable({});function u(e){return e in l}function c(e,t){return u(e)?function(e,t){if(t in e)return e[t];const n=t.split(".");let r=e;for(let e=0;e<n.length;e++)if("object"==typeof r){if(e>0){const t=n.slice(e,n.length).join(".");if(t in r){r=r[t];break}}r=r[n[e]]}else r=void 0;return r}(function(e){return l[e]||null}(e),t):null}function m(e,...t){delete r[e],s.update((n=>(n[e]=cjs.all([n[e]||{},...t]),n)))}derived([s],(([e])=>Object.keys(e))),s.subscribe((e=>l=e));const d={};function g(e){return d[e]}function w(e){return E(e).some((e=>{var t;return null===(t=g(e))||void 0===t?void 0:t.size}))}function h(e,t){return Promise.all(t.map((t=>(function(e,t){d[e].delete(t),0===d[e].size&&delete d[e]}(e,t),t().then((e=>e.default||e)))))).then((t=>m(e,...t)))}const p={};function b(e){if(!w(e))return e in p?p[e]:void 0;const t=function(e){return E(e).map((e=>{const t=g(e);return[e,t?[...t]:[]]})).filter((([,e])=>e.length>0))}(e);return p[e]=Promise.all(t.map((([e,t])=>h(e,t)))).then((()=>{if(w(e))return b(e);delete p[e]})),p[e]}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function v(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}const O={fallbackLocale:null,initialLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,ignoreTag:!0};function j(){return O}function $(e){const{formats:t}=e,n=v(e,["formats"]),r=e.initialLocale||e.fallbackLocale;return Object.assign(O,n,{initialLocale:r}),t&&("number"in t&&Object.assign(O.formats.number,t.number),"date"in t&&Object.assign(O.formats.date,t.date),"time"in t&&Object.assign(O.formats.time,t.time)),T.set(r)}const k=writable(!1);let L;const T=writable(null);function x(e){return e.split("-").map(((e,t,n)=>n.slice(0,t+1).join("-"))).reverse()}function E(e,t=j().fallbackLocale){const n=x(e);return t?[...new Set([...n,...x(t)])]:n}function D(){return L}T.subscribe((e=>{L=e,"undefined"!=typeof window&&null!==e&&document.documentElement.setAttribute("lang",e)}));const M=T.set;T.set=e=>{if(function(e){if(null==e)return;const t=E(e);for(let e=0;e<t.length;e++){const n=t[e];if(u(n))return n}}(e)&&w(e)){const{loadingDelay:t}=j();let n;return"undefined"!=typeof window&&null!=D()&&t?n=window.setTimeout((()=>k.set(!0)),t):k.set(!0),b(e).then((()=>{M(e)})).finally((()=>{clearTimeout(n),k.set(!1)}))}return M(e)},T.update=e=>M(e(L));const I=()=>"undefined"==typeof window?null:window.navigator.language||window.navigator.languages[0],Z=e=>{const t=Object.create(null);return n=>{const r=JSON.stringify(n);return r in t?t[r]:t[r]=e(n)}},C=(e,t)=>{const{formats:n}=j();if(e in n&&t in n[e])return n[e][t];throw new Error(`[svelte-i18n] Unknown "${t}" ${e} format.`)},G=Z((e=>{var{locale:t,format:n}=e,r=v(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(r=C("number",n)),new Intl.NumberFormat(t,r)})),J=Z((e=>{var{locale:t,format:n}=e,r=v(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?r=C("date",n):0===Object.keys(r).length&&(r=C("date","short")),new Intl.DateTimeFormat(t,r)})),U=Z((e=>{var{locale:t,format:n}=e,r=v(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?r=C("time",n):0===Object.keys(r).length&&(r=C("time","short")),new Intl.DateTimeFormat(t,r)})),_=(e={})=>{var{locale:t=D()}=e,n=v(e,["locale"]);return G(Object.assign({locale:t},n))},q=(e={})=>{var{locale:t=D()}=e,n=v(e,["locale"]);return J(Object.assign({locale:t},n))},B=(e={})=>{var{locale:t=D()}=e,n=v(e,["locale"]);return U(Object.assign({locale:t},n))},H$1=Z(((e,t=D())=>new o(e,t,j().formats,{ignoreTag:j().ignoreTag}))),K=(e,t={})=>{"object"==typeof e&&(e=(t=e).id);const{values:n,locale:r=D(),default:i}=t;if(null==r)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let o=a(e,r);if(o){if("string"!=typeof o)return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof o}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),o}else j().warnOnMissingMessages&&console.warn(`[svelte-i18n] The message "${e}" was not found in "${E(r).join('", "')}".${w(D())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`),o=i||e;if(!n)return o;let s=o;try{s=H$1(o,r).format(n)}catch(t){console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,t.message)}return s},Q=(e,t)=>B(t).format(e),R=(e,t)=>q(t).format(e),V=(e,t)=>_(t).format(e),W$1=(e,t=D())=>a(e,t),X=derived([T,s],(()=>K));derived([T],(()=>Q)),derived([T],(()=>R)),derived([T],(()=>V)),derived([T,s],(()=>W$1));var loading$1="loading",email$1="Email",pw$1="Password",login$1="Login",sign_out$1="Sign Out",sign_in$1="Sign In",member$1="Member",SignIn$2={email_hint:"Write your email address",pw_hint:"Write your password",forgot_your_password:"Forgot your password",do_not_have_account:"Don't have an account",sign_in_with_google:"Sign In with Google",sign_in_with_facebook:"Sign In with Facebook",look_around:"Look around"},SignUp$2={title:"Sign Up",email_hint:"Write your email address",pw_hint:"Write your password",pw_confirm:"Confirm password",pw_confirm_hint:"Confirm your password",terms_and_agreement:'I agree with &nbsp;<a href="https://legacy.dooboolab.com/termsofservice">Terms for Agreement</a>&nbsp;and&nbsp;<a href="https://legacy.dooboolab.com/privacyandpolicy">Privacy and Policy</a>.',missing_inputs:"Some information is missing. Please fill all information."},Intro$1={welcome:"Hello there ~ 🙌 Welcome to WeCount."},Temp$1={title:"Template"},Member$1={name:"Name",permission:"Permission",role:"Role",role_representative:"Representative",role_all:"All"},Feed$1={FeedCreatePopup:{category:"Category",income:"Income",spending:"Spending",price:"Price",price_hint:"Write price",title:"Title",title_hint:"Write title",content:"Contnet",content_hint:"Write content",image:"image",image_hint:"Up to 7 images can be add",cancel:"Cancel",submit:"Submit"}},en={loading:loading$1,email:email$1,pw:pw$1,login:login$1,sign_out:sign_out$1,sign_in:sign_in$1,member:member$1,SignIn:SignIn$2,SignUp:SignUp$2,Intro:Intro$1,Temp:Temp$1,Member:Member$1,Feed:Feed$1},loading="로딩중",email="이메일",pw="비밀번호",sign_out="로그아웃",login="로그인",sign_in="로그인하기",member="멤버",SignIn$1={email_hint:"이메일을 입력하세요",pw_hint:"비밀번호를 입력하세요",forgot_your_password:"비밀번호를 잊으셨나요",do_not_have_account:"계정이 없으신가요",sign_in_with_google:"Google 계정으로 로그인",sign_in_with_facebook:"Facebook 계정으로 로그인",look_around:"둘러보기"},SignUp$1={title:"회원가입",email:"이메일",email_hint:"이메일 주소를 입력하세요",pw:"비밀번호",pw_hint:"비밀번호를 입력하세요",pw_confirm:"비밀번호 확인",pw_confirm_hint:"비밀번호를 한번 더 입력하세요",terms_and_agreement:'위카운트 <a href="https://legacy.dooboolab.com/termsofservice">이용약관</a> 및 <a href="https://legacy.dooboolab.com/privacyandpolicy">개인정보취급방침</a>에 모두 동의합니다.',missing_inputs:"모든 항목이 기재되지 않았습니다. 회원가입을 위해 모든 정보를 입력해주세요."},intro={welcome:"안녕하세요. 🙌 WE카운트에 오신 것을 환영합니다."},temp={title:"템플릿"},Member={name:"이름",permission:"권한",role:"역할",role_representative:"대표관리자",role_all:"전체"},Feed={FeedCreatePopup:{category:"구분",income:"수입",spending:"지출",price:"금액",price_hint:"금액을 입력하세요.",title:"수입처",title_hint:"수입처를 알려주세요.",content:"내용",content_hint:"내용을 작성하세요",image:"사진",image_hint:"최대 7장 첨부 가능",cancel:"취소",submit:"확인"}},ko={loading:loading,email:email,pw:pw,sign_out:sign_out,login:login,sign_in:sign_in,member:member,SignIn:SignIn$1,SignUp:SignUp$1,intro:intro,temp:temp,Member:Member,Feed:Feed};m("en",en),m("ko",ko),$({fallbackLocale:"en",initialLocale:I()});const user=writable(null),DEFAULT_HEADERS$1={};var browserPonyfill={exports:{}};!function(e,t){var n="undefined"!=typeof self?self:commonjsGlobal,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=_(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=l(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[l(e)]},d.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},d.prototype.set=function(e,t){this.map[l(e)]=u(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var n,r,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),v.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function $(e,n){return new Promise((function(r,o){var s=new y(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;r(new w(i,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}$.polyfill=!0,e.fetch||(e.fetch=$,e.Headers=d,e.Request=y,e.Response=w),t.Headers=d,t.Request=y,t.Response=w,t.fetch=$,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(browserPonyfill,browserPonyfill.exports);var fetch=getDefaultExportFromCjs(browserPonyfill.exports),__awaiter$8=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const _getErrorMessage$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$1=(e,t)=>{if("function"!=typeof e.json)return t(e);e.json().then((n=>t({message:_getErrorMessage$1(n),status:(null==e?void 0:e.status)||500})))},_getRequestParams$1=(e,t,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e||(r.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(n)),r};function _handleRequest$1(e,t,n,r){return __awaiter$8(this,void 0,void 0,(function*(){return new Promise(((i,o)=>{fetch(t,_getRequestParams$1(e,n,r)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?i:e.json()})).then((e=>i(e))).catch((e=>handleError$1(e,o)))}))}))}function get$1(e,t){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1("GET",e,t)}))}function post$1(e,t,n){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1("POST",e,n,t)}))}function put$1(e,t,n){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1("PUT",e,n,t)}))}function remove$1(e,t,n){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1("DELETE",e,n,t)}))}const GOTRUE_URL="http://localhost:9999",DEFAULT_HEADERS={},STORAGE_KEY="supabase.auth.token",COOKIE_OPTIONS={name:"sb:token",lifetime:28800,domain:"",path:"/",sameSite:"lax"};function serialize(e,t,n){const r=n||{},i=encodeURIComponent,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if("function"!=typeof i)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");const s=i(t);if(s&&!o.test(s))throw new TypeError("argument val is invalid");let a=e+"="+s;if(null!=r.maxAge){const e=r.maxAge-0;if(isNaN(e)||!isFinite(e))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(e)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a}function isSecureEnvironment(e){if(!e||!e.headers||!e.headers.host)throw new Error('The "host" request header is not available');const t=e.headers.host.indexOf(":")>-1&&e.headers.host.split(":")[0]||e.headers.host;return!(["localhost","127.0.0.1"].indexOf(t)>-1||t.endsWith(".local"))}function serializeCookie(e,t){var n,r,i;return serialize(e.name,e.value,{maxAge:e.maxAge,expires:new Date(Date.now()+1e3*e.maxAge),httpOnly:!0,secure:t,path:null!==(n=e.path)&&void 0!==n?n:"/",domain:null!==(r=e.domain)&&void 0!==r?r:"",sameSite:null!==(i=e.sameSite)&&void 0!==i?i:"lax"})}function setCookies(e,t,n){const r=n.map((t=>serializeCookie(t,isSecureEnvironment(e)))),i=t.getHeader("Set-Cookie");i&&(i instanceof Array?Array.prototype.push.apply(r,i):"string"==typeof i&&r.push(i)),t.setHeader("Set-Cookie",r)}function setCookie(e,t,n){setCookies(e,t,[n])}function deleteCookie(e,t,n){setCookie(e,t,{name:n,value:"",maxAge:-1})}function expiresAt(e){return Math.round(Date.now()/1e3)+e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}const isBrowser$1=()=>"undefined"!=typeof window;function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}class LocalStorage{constructor(e){this.localStorage=e||globalThis.localStorage}clear(){return this.localStorage.clear()}key(e){return this.localStorage.key(e)}setItem(e,t){return this.localStorage.setItem(e,t)}getItem(e){return this.localStorage.getItem(e)}removeItem(e){return this.localStorage.removeItem(e)}}var __awaiter$7=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class GoTrueApi{constructor({url:e="",headers:t={},cookieOptions:n}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},COOKIE_OPTIONS),n)}signUpWithEmail(e,t,n={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers),i="";n.redirectTo&&(i="?redirect_to="+encodeURIComponent(n.redirectTo));const o=yield post$1(`${this.url}/signup${i}`,{email:e,password:t},{headers:r});let s=Object.assign({},o);return s.expires_in&&(s.expires_at=expiresAt(o.expires_in)),{data:s,error:null}}catch(e){return{data:null,error:e}}}))}signInWithEmail(e,t,n={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers),i="?grant_type=password";n.redirectTo&&(i+="&redirect_to="+encodeURIComponent(n.redirectTo));const o=yield post$1(`${this.url}/token${i}`,{email:e,password:t},{headers:r});let s=Object.assign({},o);return s.expires_in&&(s.expires_at=expiresAt(o.expires_in)),{data:s,error:null}}catch(e){return{data:null,error:e}}}))}signUpWithPhone(e,t){return __awaiter$7(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers);const r=yield post$1(`${this.url}/signup`,{phone:e,password:t},{headers:n});let i=Object.assign({},r);return i.expires_in&&(i.expires_at=expiresAt(r.expires_in)),{data:i,error:null}}catch(e){return{data:null,error:e}}}))}signInWithPhone(e,t){return __awaiter$7(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="?grant_type=password";const i=yield post$1(`${this.url}/token${r}`,{phone:e,password:t},{headers:n});let o=Object.assign({},i);return o.expires_in&&(o.expires_at=expiresAt(i.expires_in)),{data:o,error:null}}catch(e){return{data:null,error:e}}}))}sendMagicLinkEmail(e,t={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield post$1(`${this.url}/magiclink${r}`,{email:e},{headers:n}),error:null}}catch(e){return{data:null,error:e}}}))}sendMobileOTP(e){return __awaiter$7(this,void 0,void 0,(function*(){try{let t=Object.assign({},this.headers);return{data:yield post$1(`${this.url}/otp`,{phone:e},{headers:t}),error:null}}catch(e){return{data:null,error:e}}}))}verifyMobileOTP(e,t,n={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let r=Object.assign({},this.headers);return{data:yield post$1(`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:n.redirectTo},{headers:r}),error:null}}catch(e){return{data:null,error:e}}}))}inviteUserByEmail(e,t={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield post$1(`${this.url}/invite${r}`,{email:e},{headers:n}),error:null}}catch(e){return{data:null,error:e}}}))}resetPasswordForEmail(e,t={}){return __awaiter$7(this,void 0,void 0,(function*(){try{let n=Object.assign({},this.headers),r="";t.redirectTo&&(r+="?redirect_to="+encodeURIComponent(t.redirectTo));return{data:yield post$1(`${this.url}/recover${r}`,{email:e},{headers:n}),error:null}}catch(e){return{data:null,error:e}}}))}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}signOut(e){return __awaiter$7(this,void 0,void 0,(function*(){try{return yield post$1(`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(e){return{error:e}}}))}getUrlForProvider(e,t){let n=[`provider=${encodeURIComponent(e)}`];return(null==t?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),`${this.url}/authorize?${n.join("&")}`}getUser(e){return __awaiter$7(this,void 0,void 0,(function*(){try{const t=yield get$1(`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(e){return{user:null,data:null,error:e}}}))}updateUser(e,t){return __awaiter$7(this,void 0,void 0,(function*(){try{const n=yield put$1(`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:n,data:n,error:null}}catch(e){return{user:null,data:null,error:e}}}))}deleteUser(e,t){return __awaiter$7(this,void 0,void 0,(function*(){try{const n=yield remove$1(`${this.url}/admin/users/${e}`,{},{headers:this._createRequestHeaders(t)});return{user:n,data:n,error:null}}catch(e){return{user:null,data:null,error:e}}}))}refreshAccessToken(e){return __awaiter$7(this,void 0,void 0,(function*(){try{const t=yield post$1(`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers});let n=Object.assign({},t);return n.expires_in&&(n.expires_at=expiresAt(t.expires_in)),{data:n,error:null}}catch(e){return{data:null,error:e}}}))}setAuthCookie(e,t){"POST"!==e.method&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:n,session:r}=e.body;if(!n)throw new Error("Auth event missing!");if("SIGNED_IN"===n){if(!r)throw new Error("Auth session missing!");setCookie(e,t,{name:this.cookieOptions.name,value:r.access_token,domain:this.cookieOptions.domain,maxAge:this.cookieOptions.lifetime,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite})}"SIGNED_OUT"===n&&deleteCookie(e,t,this.cookieOptions.name),t.status(200).json({})}getUserByCookie(e){return __awaiter$7(this,void 0,void 0,(function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");if(!e.cookies[this.cookieOptions.name])throw new Error("No cookie found!");const t=e.cookies[this.cookieOptions.name],{user:n,error:r}=yield this.getUser(t);if(r)throw r;return{user:n,data:n,error:null}}catch(e){return{user:null,data:null,error:e}}}))}generateLink(e,t,n={}){return __awaiter$7(this,void 0,void 0,(function*(){try{return{data:yield post$1(`${this.url}/admin/generate_link`,{type:e,email:t,password:n.password,data:n.data,redirect_to:n.redirectTo},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}}function polyfillGlobalThis(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}var __awaiter$6=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};polyfillGlobalThis();const DEFAULT_OPTIONS$1={url:GOTRUE_URL,autoRefreshToken:!0,persistSession:!0,localStorage:globalThis.localStorage,detectSessionInUrl:!0,headers:DEFAULT_HEADERS};class GoTrueClient{constructor(e){this.stateChangeEmitters=new Map;const t=Object.assign(Object.assign({},DEFAULT_OPTIONS$1),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.localStorage=new LocalStorage(t.localStorage),this.api=new GoTrueApi({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions}),this._recoverSession(),this._recoverAndRefresh();try{t.detectSessionInUrl&&isBrowser$1()&&getParameterByName("access_token")&&this.getSessionFromUrl({storeSession:!0})}catch(e){console.log("Error getting session from URL.")}}signUp({email:e,password:t,phone:n},r={}){return __awaiter$6(this,void 0,void 0,(function*(){try{this._removeSession();const{data:i,error:o}=n&&t?yield this.api.signUpWithPhone(n,t):yield this.api.signUpWithEmail(e,t,{redirectTo:r.redirectTo});if(o)throw o;if(!i)throw"An error occurred on sign up.";let s=null,a=null;return i.access_token&&(s=i,a=s.user,this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(a=i),{data:i,user:a,session:s,error:null}}catch(e){return{data:null,user:null,session:null,error:e}}}))}signIn({email:e,phone:t,password:n,refreshToken:r,provider:i},o={}){return __awaiter$6(this,void 0,void 0,(function*(){try{if(this._removeSession(),e&&!n){const{error:t}=yield this.api.sendMagicLinkEmail(e,{redirectTo:o.redirectTo});return{data:null,user:null,session:null,error:t}}if(e&&n)return this._handleEmailSignIn(e,n,{redirectTo:o.redirectTo});if(t&&!n){const{error:e}=yield this.api.sendMobileOTP(t);return{data:null,user:null,session:null,error:e}}if(t&&n)return this._handlePhoneSignIn(t,n);if(r){const{error:e}=yield this._callRefreshToken(r);if(e)throw e;return{data:this.currentSession,user:this.currentUser,session:this.currentSession,error:null}}if(i)return this._handleProviderSignIn(i,{redirectTo:o.redirectTo,scopes:o.scopes});throw new Error("You must provide either an email, phone number or a third-party provider.")}catch(e){return{data:null,user:null,session:null,error:e}}}))}verifyOTP({phone:e,token:t},n={}){return __awaiter$6(this,void 0,void 0,(function*(){try{this._removeSession();const{data:r,error:i}=yield this.api.verifyMobileOTP(e,t,n);if(i)throw i;if(!r)throw"An error occurred on token verification.";let o=null,s=null;return r.access_token&&(o=r,s=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),r.id&&(s=r),{data:r,user:s,session:o,error:null}}catch(e){return{data:null,user:null,session:null,error:e}}}))}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return __awaiter$6(this,void 0,void 0,(function*(){try{if(!(null===(e=this.currentSession)||void 0===e?void 0:e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(e){return{data:null,user:null,error:e}}}))}update(e){var t;return __awaiter$6(this,void 0,void 0,(function*(){try{if(!(null===(t=this.currentSession)||void 0===t?void 0:t.access_token))throw new Error("Not logged in.");const{user:n,error:r}=yield this.api.updateUser(this.currentSession.access_token,e);if(r)throw r;if(!n)throw Error("Invalid user data.");const i=Object.assign(Object.assign({},this.currentSession),{user:n});return this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED"),{data:n,user:n,error:null}}catch(e){return{data:null,user:null,error:e}}}))}setSession(e){return __awaiter$6(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);return n?{session:null,error:n}:t?(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null}):{session:null,error:{name:"Invalid refresh_token",message:"JWT token provided is Invalid"}}}catch(e){return{error:e,session:null}}}))}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}getSessionFromUrl(e){return __awaiter$6(this,void 0,void 0,(function*(){try{if(!isBrowser$1())throw new Error("No browser detected.");const t=getParameterByName("error_description");if(t)throw new Error(t);const n=getParameterByName("provider_token"),r=getParameterByName("access_token");if(!r)throw new Error("No access_token detected.");const i=getParameterByName("expires_in");if(!i)throw new Error("No expires_in detected.");const o=getParameterByName("refresh_token");if(!o)throw new Error("No refresh_token detected.");const s=getParameterByName("token_type");if(!s)throw new Error("No token_type detected.");const a=Math.round(Date.now()/1e3)+parseInt(i),{user:c,error:l}=yield this.api.getUser(r);if(l)throw l;const u={provider_token:n,access_token:r,expires_in:parseInt(i),expires_at:a,refresh_token:o,token_type:s,user:c};return(null==e?void 0:e.storeSession)&&(this._saveSession(u),this._notifyAllSubscribers("SIGNED_IN"),"recovery"===getParameterByName("type")&&this._notifyAllSubscribers("PASSWORD_RECOVERY")),window.location.hash="",{data:u,error:null}}catch(e){return{data:null,error:e}}}))}signOut(){var e;return __awaiter$6(this,void 0,void 0,(function*(){const t=null===(e=this.currentSession)||void 0===e?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:e}=yield this.api.signOut(t);if(e)return{error:e}}return{error:null}}))}onAuthStateChange(e){try{const t=uuid(),n=this,r={id:t,callback:e,unsubscribe:()=>{n.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:r,error:null}}catch(e){return{data:null,error:e}}}_handleEmailSignIn(e,t,n={}){var r,i;return __awaiter$6(this,void 0,void 0,(function*(){try{const{data:o,error:s}=yield this.api.signInWithEmail(e,t,{redirectTo:n.redirectTo});return s||!o?{data:null,user:null,session:null,error:s}:(((null===(r=null==o?void 0:o.user)||void 0===r?void 0:r.confirmed_at)||(null===(i=null==o?void 0:o.user)||void 0===i?void 0:i.email_confirmed_at))&&(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),{data:o,user:o.user,session:o,error:null})}catch(e){return{data:null,user:null,session:null,error:e}}}))}_handlePhoneSignIn(e,t){var n;return __awaiter$6(this,void 0,void 0,(function*(){try{const{data:r,error:i}=yield this.api.signInWithPhone(e,t);return i||!r?{data:null,user:null,session:null,error:i}:((null===(n=null==r?void 0:r.user)||void 0===n?void 0:n.phone_confirmed_at)&&(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN")),{data:r,user:r.user,session:r,error:null})}catch(e){return{data:null,user:null,session:null,error:e}}}))}_handleProviderSignIn(e,t={}){const n=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return isBrowser$1()&&(window.location.href=n),{provider:e,url:n,data:null,session:null,user:null,error:null}}catch(t){return n?{provider:e,url:n,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:t}}}_recoverSession(){var e;try{const t=isBrowser$1()&&(null===(e=this.localStorage)||void 0===e?void 0:e.getItem(STORAGE_KEY));if(!t||"string"!=typeof t)return null;const n=JSON.parse(t),{currentSession:r,expiresAt:i}=n;i>=Math.round(Date.now()/1e3)&&(null==r?void 0:r.user)&&(this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){console.log("error",e)}}_recoverAndRefresh(){return __awaiter$6(this,void 0,void 0,(function*(){try{const e=isBrowser$1()&&(yield this.localStorage.getItem(STORAGE_KEY));if(!e)return null;const t=JSON.parse(e),{currentSession:n,expiresAt:r}=t;if(r<Math.round(Date.now()/1e3))if(this.autoRefreshToken&&n.refresh_token){const{error:e}=yield this._callRefreshToken(n.refresh_token);e&&(console.log(e.message),yield this._removeSession())}else this._removeSession();else n&&n.user?(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}}))}_callRefreshToken(e){var t;return void 0===e&&(e=null===(t=this.currentSession)||void 0===t?void 0:t.refresh_token),__awaiter$6(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);if(n)throw n;if(!t)throw Error("Invalid session data.");return this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{data:t,error:null}}catch(e){return{data:null,error:e}}}))}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach((t=>t.callback(e,this.currentSession)))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const e=t-Math.round(Date.now()/1e3),n=e>60?60:.5;this._startAutoRefreshToken(1e3*(e-n))}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};isBrowser$1()&&this.localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}_removeSession(){return __awaiter$6(this,void 0,void 0,(function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),isBrowser$1()&&(yield this.localStorage.removeItem(STORAGE_KEY))}))}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),e<=0||!this.autoRefreshToken||(this.refreshTokenTimer=setTimeout((()=>this._callRefreshToken()),e),"function"==typeof this.refreshTokenTimer.unref&&this.refreshTokenTimer.unref())}}class SupabaseAuthClient extends GoTrueClient{constructor(e){super(e)}}var __awaiter$5=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},PostgresTypes;class PostgrestBuilder{constructor(e){Object.assign(this,e)}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){return void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json"),fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body)}).then((e=>__awaiter$5(this,void 0,void 0,(function*(){var t,n,r;let i=null,o=null,s=null;if(e.ok){const i=null===(t=this.headers.Prefer)||void 0===t?void 0:t.split(",").includes("return=minimal");if("HEAD"!==this.method&&!i){const t=yield e.text();t&&(o="text/csv"===this.headers.Accept?t:JSON.parse(t))}const a=null===(n=this.headers.Prefer)||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),c=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");a&&c&&c.length>1&&(s=parseInt(c[1]))}else if(i=yield e.json(),i&&this.shouldThrowOnError)throw i;return{error:i,data:o,count:s,status:e.status,statusText:e.statusText,body:o}})))).then(e,t)}}class PostgrestTransformBuilder extends PostgrestBuilder{select(e="*"){let t=!1;const n=e.split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this}order(e,{ascending:t=!0,nullsFirst:n=!1,foreignTable:r}={}){const i=void 0===r?"order":`${r}.order`,o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}.${n?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const r=void 0===n?"offset":`${n}.offset`,i=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){this.headers.Accept="application/vnd.pgrst.object+json";const e=new PostgrestTransformBuilder(this);return e.then=(e,t)=>this.then((t=>{var n;return(null===(n=t.error)||void 0===n?void 0:n.details.includes("Results contain 0 rows"))?e({error:null,data:null,count:t.count,status:200,statusText:"OK",body:null}):e(t)}),t),e}csv(){return this.headers.Accept="text/csv",this}}class PostgrestFilterBuilder extends PostgrestTransformBuilder{constructor(){super(...arguments),this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,n){return this.url.searchParams.append(`${e}`,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=void 0===t?"or":`${t}.or`;return this.url.searchParams.append(n,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const n=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(`${e}`,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r=null}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`${i}fts${o}.${t}`),this}fts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`fts${r}.${t}`),this}plfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`plfts${r}.${t}`),this}phfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`phfts${r}.${t}`),this}wfts(e,t,{config:n}={}){const r=void 0===n?"":`(${n})`;return this.url.searchParams.append(`${e}`,`wfts${r}.${t}`),this}filter(e,t,n){return this.url.searchParams.append(`${e}`,`${t}.${n}`),this}match(e){return Object.keys(e).forEach((t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)})),this}}class PostgrestQueryBuilder extends PostgrestBuilder{constructor(e,{headers:t={},schema:n}={}){super({}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}select(e="*",{head:t=!1,count:n=null}={}){this.method="GET";let r=!1;const i=e.split("").map((e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e))).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),t&&(this.method="HEAD"),new PostgrestFilterBuilder(this)}insert(e,{upsert:t=!1,onConflict:n,returning:r="representation",count:i=null}={}){this.method="POST";const o=[`return=${r}`];if(t&&o.push("resolution=merge-duplicates"),t&&void 0!==n&&this.url.searchParams.set("on_conflict",n),this.body=e,i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)];this.url.searchParams.set("columns",e.join(","))}}return new PostgrestFilterBuilder(this)}upsert(e,{onConflict:t,returning:n="representation",count:r=null,ignoreDuplicates:i=!1}={}){this.method="POST";const o=[`resolution=${i?"ignore":"merge"}-duplicates`,`return=${n}`];return void 0!==t&&this.url.searchParams.set("on_conflict",t),this.body=e,r&&o.push(`count=${r}`),this.headers.Prefer=o.join(","),new PostgrestFilterBuilder(this)}update(e,{returning:t="representation",count:n=null}={}){this.method="PATCH";const r=[`return=${t}`];return this.body=e,n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new PostgrestFilterBuilder(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const n=[`return=${e}`];return t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new PostgrestFilterBuilder(this)}}class PostgrestRpcBuilder extends PostgrestBuilder{constructor(e,{headers:t={},schema:n}={}){super({}),this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}rpc(e,{count:t=null}={}){return this.method="POST",this.body=e,t&&(void 0!==this.headers.Prefer?this.headers.Prefer+=`,count=${t}`:this.headers.Prefer=`count=${t}`),new PostgrestFilterBuilder(this)}}class PostgrestClient{constructor(e,{headers:t={},schema:n}={}){this.url=e,this.headers=t,this.schema=n}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new PostgrestQueryBuilder(t,{headers:this.headers,schema:this.schema})}rpc(e,t,{count:n=null}={}){const r=`${this.url}/rpc/${e}`;return new PostgrestRpcBuilder(r,{headers:this.headers,schema:this.schema}).rpc(t,{count:n})}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,t,n={})=>{let r={},i=void 0!==n.skipTypes?n.skipTypes:[];return Object.entries(t).map((([n,o])=>{r[n]=convertColumn(n,e,t,i)})),r},convertColumn=(e,t,n,r)=>{let i=t.find((t=>t.name==e));return!i||r.includes(i.type)?noop$1(n[e]):convertCell(i.type,n[e])},convertCell=(e,t)=>{try{if(null===t)return null;if("_"===e.charAt(0)){let n=e.slice(1,e.length);return toArray(t,n)}switch(e){case PostgresTypes.abstime:return noop$1(t);case PostgresTypes.bool:return toBoolean(t);case PostgresTypes.date:return noop$1(t);case PostgresTypes.daterange:return toDateRange(t);case PostgresTypes.float4:case PostgresTypes.float8:return toFloat(t);case PostgresTypes.int2:case PostgresTypes.int4:return toInt(t);case PostgresTypes.int4range:return toIntRange(t);case PostgresTypes.int8:return toInt(t);case PostgresTypes.int8range:return toIntRange(t);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(t);case PostgresTypes.money:case PostgresTypes.numeric:return toFloat(t);case PostgresTypes.oid:return toInt(t);case PostgresTypes.reltime:case PostgresTypes.time:return noop$1(t);case PostgresTypes.timestamp:return toTimestampString(t);case PostgresTypes.timestamptz:case PostgresTypes.timetz:return noop$1(t);case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return toDateRange(t);default:return noop$1(t)}}catch(n){return console.log(`Could not convert cell of type ${e} and value ${t}`),console.log(`This is the error: ${n}`),t}},noop$1=e=>e,toBoolean=e=>{switch(e){case"t":return!0;case"f":return!1;default:return null}},toDateRange=e=>{let t=JSON.parse(e);return[new Date(t[0]),new Date(t[1])]},toFloat=e=>parseFloat(e),toInt=e=>parseInt(e),toIntRange=e=>{let t=JSON.parse(e);return[parseInt(t[0]),parseInt(t[1])]},toJson=e=>JSON.parse(e),toArray=(e,t)=>{let n=e.slice(1,e.length-1);return(n.length>0?n.split(","):[]).map((e=>convertCell(t,e)))},toTimestampString=e=>e.replace(" ","T"),VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES,CHANNEL_STATES,CHANNEL_EVENTS,TRANSPORTS;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(SOCKET_STATES||(SOCKET_STATES={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(CHANNEL_STATES||(CHANNEL_STATES={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave"}(CHANNEL_EVENTS||(CHANNEL_EVENTS={})),function(e){e.websocket="websocket"}(TRANSPORTS||(TRANSPORTS={}));class Timer{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Push{constructor(e,t,n={},r=DEFAULT_TIMEOUT){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout))}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class RealtimeSubscription{constructor(e,t={},n){this.topic=e,this.params=t,this.socket=n,this.bindings=[],this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer((()=>this.rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this.onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket.remove(this)})),this.onError((e=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this.isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())})),this.on(CHANNEL_EVENTS.reply,((e,t)=>{this.trigger(this.replyEventName(t),e)}))}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(CHANNEL_EVENTS.close,e)}onError(e){this.on(CHANNEL_EVENTS.error,(t=>e(t)))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter((t=>t.event!==e))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Push(this,e,t,n);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(CHANNEL_EVENTS.close,"leave",this.joinRef())};this.joinPush.destroy();let n=new Push(this,CHANNEL_EVENTS.leave,{},e);return n.receive("ok",(()=>t())).receive("timeout",(()=>t())),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}sendJoin(e){this.state=CHANNEL_STATES.joining,this.joinPush.resend(e)}rejoin(e=this.timeout){this.isLeaving()||this.sendJoin(e)}trigger(e,t,n){let{close:r,error:i,leave:o,join:s}=CHANNEL_EVENTS;if(n&&[r,i,o,s].indexOf(e)>=0&&n!==this.joinRef())return;let a=this.onMessage(e,t,n);if(t&&!a)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter((n=>"*"===n.event?e===(null==t?void 0:t.type):n.event===e)).map((e=>e.callback(a,n)))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===CHANNEL_STATES.closed}isErrored(){return this.state===CHANNEL_STATES.errored}isJoined(){return this.state===CHANNEL_STATES.joined}isJoining(){return this.state===CHANNEL_STATES.joining}isLeaving(){return this.state===CHANNEL_STATES.leaving}}var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},global$1=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}(),name="websocket",description="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version$1="1.0.34",repository={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage="https://github.com/theturtle32/WebSocket-Node",engines={node:">=4.0.0"},dependencies={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config={verbose:!1},scripts={test:"tape test/unit/*.js",gulp:"gulp"},main="index",directories={lib:"./lib"},browser$1="lib/browser.js",license="Apache-2.0",require$$0={name:name,description:description,keywords:keywords,author:author,contributors:contributors,version:version$1,repository:repository,homepage:homepage,engines:engines,dependencies:dependencies,devDependencies:devDependencies,config:config,scripts:scripts,main:main,directories:directories,browser:browser$1,license:license},version=require$$0.version,_globalThis;if("object"==typeof globalThis)_globalThis=globalThis;else try{_globalThis=global$1}catch(e){}finally{if(_globalThis||"undefined"==typeof window||(_globalThis=window),!_globalThis)throw new Error("Could not determine global this")}var NativeWebSocket=_globalThis.WebSocket||_globalThis.MozWebSocket,websocket_version=version;function W3CWebSocket(e,t){return t?new NativeWebSocket(e,t):new NativeWebSocket(e)}NativeWebSocket&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(W3CWebSocket,e,{get:function(){return NativeWebSocket[e]}})}));var browser={w3cwebsocket:NativeWebSocket?W3CWebSocket:null,version:websocket_version};class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=n.decode(e.slice(o,o+r));o+=r;const a=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:s,event:a,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}var __awaiter$4=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const noop=()=>{};class RealtimeClient{constructor(e,t){this.channels=[],this.endPoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=browser.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${TRANSPORTS.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=t.headers),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),(null==t?void 0:t.longpollerTimeout)&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer((()=>__awaiter$4(this,void 0,void 0,(function*(){yield this.disconnect(),this.connect()}))),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise(((n,r)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),n({error:null,data:!0})}catch(e){n({error:e,data:!1})}}))}log(e,t,n){this.logger(e,t,n)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return"connecting";case SOCKET_STATES.open:return"open";case SOCKET_STATES.closing:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.channels=this.channels.filter((t=>t.joinRef()!==e.joinRef()))}channel(e,t={}){let n=new RealtimeSubscription(e,t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:r,ref:i}=e;i&&i===this.pendingHeartbeatRef?this.pendingHeartbeatRef=null:n===(null==r?void 0:r.type)&&this._resetHeartbeat(),this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r),this.channels.filter((e=>e.isMember(t))).forEach((e=>e.trigger(n,r,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this._resetHeartbeat(),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e.trigger(CHANNEL_EVENTS.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_resetHeartbeat(){this.pendingHeartbeatRef=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs)}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(WS_CLOSE_NORMAL,"hearbeat timeout"));this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}}class SupabaseRealtimeClient{constructor(e,t,n){const r="*"===n?`realtime:${t}`:`realtime:${t}:${n}`;this.subscription=e.channel(r)}getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=convertChangeData(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,(e=>{let n={schema:e.schema,table:e.table,commit_timestamp:e.commit_timestamp,eventType:e.type,new:{},old:{}};n=Object.assign(Object.assign({},n),this.getPayloadRecords(e)),t(n)})),this}subscribe(e=(()=>{})){return this.subscription.onError((t=>e("SUBSCRIPTION_ERROR",t))),this.subscription.onClose((()=>e("CLOSED"))),this.subscription.subscribe().receive("ok",(()=>e("SUBSCRIBED"))).receive("error",(t=>e("SUBSCRIPTION_ERROR",t))).receive("timeout",(()=>e("RETRYING_AFTER_TIMEOUT"))),this.subscription}}class SupabaseQueryBuilder extends PostgrestQueryBuilder{constructor(e,{headers:t={},schema:n,realtime:r,table:i}){super(e,{headers:t,schema:n}),this._subscription=new SupabaseRealtimeClient(r,n,i),this._realtime=r}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription.on(e,t)}}var __awaiter$3=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError=(e,t)=>{if("function"!=typeof e.json)return t(e);e.json().then((n=>t({message:_getErrorMessage(n),status:(null==e?void 0:e.status)||500})))},_getRequestParams=(e,t,n,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function _handleRequest(e,t,n,r,i){return __awaiter$3(this,void 0,void 0,(function*(){return new Promise(((o,s)=>{fetch(t,_getRequestParams(e,n,r,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?o(e):e.json()})).then((e=>o(e))).catch((e=>handleError(e,s)))}))}))}function get(e,t,n){return __awaiter$3(this,void 0,void 0,(function*(){return _handleRequest("GET",e,t,n)}))}function post(e,t,n,r){return __awaiter$3(this,void 0,void 0,(function*(){return _handleRequest("POST",e,n,r,t)}))}function put(e,t,n,r){return __awaiter$3(this,void 0,void 0,(function*(){return _handleRequest("PUT",e,n,r,t)}))}function remove(e,t,n,r){return __awaiter$3(this,void 0,void 0,(function*(){return _handleRequest("DELETE",e,n,r,t)}))}var __awaiter$2=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class StorageBucketApi{constructor(e,t={}){this.url=e,this.headers=t}listBuckets(){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:yield get(`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}getBucket(e){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:yield get(`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}createBucket(e,t={public:!1}){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:(yield post(`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(e){return{data:null,error:e}}}))}updateBucket(e,t){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:yield put(`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}emptyBucket(e){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:yield post(`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}deleteBucket(e){return __awaiter$2(this,void 0,void 0,(function*(){try{return{data:yield remove(`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}}var __awaiter$1=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,t={},n){this.url=e,this.headers=t,this.bucketId=n}uploadOrUpdate(e,t,n,r){return __awaiter$1(this,void 0,void 0,(function*(){try{let i;const o=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),r),s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl)):(i=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType);const a=this._getFinalPath(t),c=yield fetch(`${this.url}/object/${a}`,{method:e,body:i,headers:s});if(c.ok)return{data:{Key:a},error:null};return{data:null,error:yield c.json()}}catch(e){return{data:null,error:e}}}))}upload(e,t,n){return __awaiter$1(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}update(e,t,n){return __awaiter$1(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t){return __awaiter$1(this,void 0,void 0,(function*(){try{return{data:yield post(`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}createSignedUrl(e,t){return __awaiter$1(this,void 0,void 0,(function*(){try{const n=this._getFinalPath(e);let r=yield post(`${this.url}/object/sign/${n}`,{expiresIn:t},{headers:this.headers});const i=`${this.url}${r.signedURL}`;return r={signedURL:i},{data:r,error:null,signedURL:i}}catch(e){return{data:null,error:e,signedURL:null}}}))}download(e){return __awaiter$1(this,void 0,void 0,(function*(){try{const t=this._getFinalPath(e),n=yield get(`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){return{data:null,error:e}}}))}getPublicUrl(e){try{const t=this._getFinalPath(e),n=`${this.url}/object/public/${t}`;return{data:{publicURL:n},error:null,publicURL:n}}catch(e){return{data:null,error:e,publicURL:null}}}remove(e){return __awaiter$1(this,void 0,void 0,(function*(){try{return{data:yield remove(`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}}))}list(e,t,n){return __awaiter$1(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),t),{prefix:e||""});return{data:yield post(`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(e){return{data:null,error:e}}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}}class SupabaseStorageClient extends StorageBucketApi{constructor(e,t={}){super(e,t)}from(e){return new StorageFileApi(this.url,this.headers,e)}}var __awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const DEFAULT_OPTIONS={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,localStorage:globalThis.localStorage,headers:DEFAULT_HEADERS$1};class SupabaseClient{constructor(e,t,n){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const r=Object.assign(Object.assign({},DEFAULT_OPTIONS),n);this.restUrl=`${e}/rest/v1`,this.realtimeUrl=`${e}/realtime/v1`.replace("http","ws"),this.authUrl=`${e}/auth/v1`,this.storageUrl=`${e}/storage/v1`,this.schema=r.schema,this.auth=this._initSupabaseAuthClient(r),this.realtime=this._initRealtimeClient(r.realtime)}get storage(){return new SupabaseStorageClient(this.storageUrl,this._getAuthHeaders())}from(e){const t=`${this.restUrl}/${e}`;return new SupabaseQueryBuilder(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e})}rpc(e,t){return this._initPostgRESTClient().rpc(e,t)}removeSubscription(e){return new Promise((t=>__awaiter(this,void 0,void 0,(function*(){try{yield this._closeSubscription(e);const n=this.getSubscriptions().length;if(!n){const{error:e}=yield this.realtime.disconnect();if(e)return t({error:e})}return t({error:null,data:{openSubscriptions:n}})}catch(e){return t({error:e})}}))))}_closeSubscription(e){return __awaiter(this,void 0,void 0,(function*(){e.isClosed()||(yield this._closeChannel(e))}))}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:r}){return new SupabaseAuthClient({url:this.authUrl,headers:{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`},autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:r})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},null==e?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new PostgrestClient(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema})}_getAuthHeaders(){var e,t;const n={},r=null!==(t=null===(e=this.auth.session())||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey;return n.apikey=this.supabaseKey,n.Authorization=`Bearer ${r}`,n}_closeChannel(e){return new Promise(((t,n)=>{e.unsubscribe().receive("ok",(()=>(this.realtime.remove(e),t(!0)))).receive("error",(e=>n(e)))}))}}const createClient=(e,t,n)=>new SupabaseClient(e,t,n),supabase=createClient("https://cozkkbhymspgkqaxkdhk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYyNzA1MzA5NywiZXhwIjoxOTQyNjI5MDk3fQ.rTcCcyATKsuDhvK-9yD19o7Wjcbn6ZQFK3-ggHCuB4I");function parse$1(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,o,s=[],a="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)"*"===(n=i[0])?(s.push("wild"),a+="/(.*)"):":"===n?(r=i.indexOf("?",1),o=i.indexOf(".",1),s.push(i.substring(1,~r?r:~o?o:i.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+i.substring(o))):a+="/"+i;return{keys:s,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}function create_else_block$2(e){let t,n,r;const i=[e[2]];var o=e[0];function s(e){let t={};for(let e=0;e<i.length;e+=1)t=assign(t,i[e]);return{props:t}}return o&&(t=new o(s()),t.$on("routeEvent",e[7])),{c(){t&&create_component(t.$$.fragment),n=empty()},m(e,i){t&&mount_component(t,e,i),insert(e,n,i),r=!0},p(e,r){const a=4&r?get_spread_update(i,[get_spread_object(e[2])]):{};if(o!==(o=e[0])){if(t){group_outros();const e=t;transition_out(e.$$.fragment,1,0,(()=>{destroy_component(e,1)})),check_outros()}o?(t=new o(s()),t.$on("routeEvent",e[7]),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,n.parentNode,n)):t=null}else o&&t.$set(a)},i(e){r||(t&&transition_in(t.$$.fragment,e),r=!0)},o(e){t&&transition_out(t.$$.fragment,e),r=!1},d(e){e&&detach(n),t&&destroy_component(t,e)}}}function create_if_block$3(e){let t,n,r;const i=[{params:e[1]},e[2]];var o=e[0];function s(e){let t={};for(let e=0;e<i.length;e+=1)t=assign(t,i[e]);return{props:t}}return o&&(t=new o(s()),t.$on("routeEvent",e[6])),{c(){t&&create_component(t.$$.fragment),n=empty()},m(e,i){t&&mount_component(t,e,i),insert(e,n,i),r=!0},p(e,r){const a=6&r?get_spread_update(i,[2&r&&{params:e[1]},4&r&&get_spread_object(e[2])]):{};if(o!==(o=e[0])){if(t){group_outros();const e=t;transition_out(e.$$.fragment,1,0,(()=>{destroy_component(e,1)})),check_outros()}o?(t=new o(s()),t.$on("routeEvent",e[6]),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,n.parentNode,n)):t=null}else o&&t.$set(a)},i(e){r||(t&&transition_in(t.$$.fragment,e),r=!0)},o(e){t&&transition_out(t.$$.fragment,e),r=!1},d(e){e&&detach(n),t&&destroy_component(t,e)}}}function create_fragment$p(e){let t,n,r,i;const o=[create_if_block$3,create_else_block$2],s=[];function a(e,t){return e[1]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=empty()},m(e,n){s[t].m(e,n),insert(e,r,n),i=!0},p(e,[i]){let c=t;t=a(e),t===c?s[t].p(e,i):(group_outros(),transition_out(s[c],1,1,(()=>{s[c]=null})),check_outros(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(e){i||(transition_in(n),i=!0)},o(e){transition_out(n),i=!1},d(e){s[t].d(e),e&&detach(r)}}}function getLocation(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const loc=readable(null,(function(e){e(getLocation());const t=()=>{e(getLocation())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}));derived(loc,(e=>e.location)),derived(loc,(e=>e.querystring));const params=writable(void 0);async function push(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");await tick(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0,void 0),window.location.hash=("#"==e.charAt(0)?"":"#")+e}async function replace(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");await tick();const t=("#"==e.charAt(0)?"":"#")+e;try{const e={...history.state};delete e.__svelte_spa_router_scrollX,delete e.__svelte_spa_router_scrollY,window.history.replaceState(e,void 0,t)}catch(e){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))}function instance$p(e,t,n){let{routes:r={}}=t,{prefix:i=""}=t,{restoreScrollState:o=!1}=t;class s{constructor(e,t){if(!t||"function"!=typeof t&&("object"!=typeof t||!0!==t._sveltesparouter))throw Error("Invalid component object");if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:r}=parse$1(e);this.path=e,"object"==typeof t&&!0===t._sveltesparouter?(this.component=t.component,this.conditions=t.conditions||[],this.userData=t.userData,this.props=t.props||{}):(this.component=()=>Promise.resolve(t),this.conditions=[],this.props={}),this._pattern=n,this._keys=r}match(e){if(i)if("string"==typeof i){if(!e.startsWith(i))return null;e=e.substr(i.length)||"/"}else if(i instanceof RegExp){const t=e.match(i);if(!t||!t[0])return null;e=e.substr(t[0].length)||"/"}const t=this._pattern.exec(e);if(null===t)return null;if(!1===this._keys)return t;const n={};let r=0;for(;r<this._keys.length;){try{n[this._keys[r]]=decodeURIComponent(t[r+1]||"")||null}catch(e){n[this._keys[r]]=null}r++}return n}async checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!await this.conditions[t](e))return!1;return!0}}const a=[];r instanceof Map?r.forEach(((e,t)=>{a.push(new s(t,e))})):Object.keys(r).forEach((e=>{a.push(new s(e,r[e]))}));let c=null,l=null,u={};const p=createEventDispatcher();async function d(e,t){await tick(),p(e,t)}let h=null,f=null;o&&(f=e=>{h=e.state&&e.state.__svelte_spa_router_scrollY?e.state:null},window.addEventListener("popstate",f),afterUpdate((()=>{h?window.scrollTo(h.__svelte_spa_router_scrollX,h.__svelte_spa_router_scrollY):window.scrollTo(0,0)})));let m=null,_=null;const g=loc.subscribe((async e=>{m=e;let t=0;for(;t<a.length;){const r=a[t].match(e.location);if(!r){t++;continue}const i={route:a[t].path,location:e.location,querystring:e.querystring,userData:a[t].userData,params:r&&"object"==typeof r&&Object.keys(r).length?r:null};if(!await a[t].checkConditions(i))return n(0,c=null),_=null,void d("conditionsFailed",i);d("routeLoading",Object.assign({},i));const o=a[t].component;if(_!=o){o.loading?(n(0,c=o.loading),_=o,n(1,l=o.loadingParams),n(2,u={}),d("routeLoaded",Object.assign({},i,{component:c,name:c.name,params:l}))):(n(0,c=null),_=null);const t=await o();if(e!=m)return;n(0,c=t&&t.default||t),_=o}return r&&"object"==typeof r&&Object.keys(r).length?n(1,l=r):n(1,l=null),n(2,u=a[t].props),void d("routeLoaded",Object.assign({},i,{component:c,name:c.name,params:l})).then((()=>{params.set(l)}))}n(0,c=null),_=null,params.set(void 0)}));return onDestroy((()=>{g(),f&&window.removeEventListener("popstate",f)})),e.$$set=e=>{"routes"in e&&n(3,r=e.routes),"prefix"in e&&n(4,i=e.prefix),"restoreScrollState"in e&&n(5,o=e.restoreScrollState)},e.$$.update=()=>{32&e.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[c,l,u,r,i,o,function(t){bubble.call(this,e,t)},function(t){bubble.call(this,e,t)}]}class Router extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$p,safe_not_equal,{routes:3,prefix:4,restoreScrollState:5})}}function create_fragment$o(e){let t,n,r,i,o;const s=e[8].default,a=create_slot(s,e,e[7],null);return{c(){t=element("button"),a&&a.c(),attr(t,"class",n=null_to_empty(e[6].class)+" svelte-rfjzfx"),attr(t,"type",e[2]),attr(t,"style",e[3]),t.disabled=e[4],toggle_class(t,"primary",e[0]),toggle_class(t,"secondary",e[1])},m(n,s){insert(n,t,s),a&&a.m(t,null),r=!0,i||(o=listen(t,"click",prevent_default(e[5])),i=!0)},p(e,[i]){a&&a.p&&(!r||128&i)&&update_slot_base(a,s,e,e[7],r?get_slot_changes(s,e[7],i,null):get_all_dirty_from_scope(e[7]),null),(!r||64&i&&n!==(n=null_to_empty(e[6].class)+" svelte-rfjzfx"))&&attr(t,"class",n),(!r||4&i)&&attr(t,"type",e[2]),(!r||8&i)&&attr(t,"style",e[3]),(!r||16&i)&&(t.disabled=e[4]),65&i&&toggle_class(t,"primary",e[0]),66&i&&toggle_class(t,"secondary",e[1])},i(e){r||(transition_in(a,e),r=!0)},o(e){transition_out(a,e),r=!1},d(e){e&&detach(t),a&&a.d(e),i=!1,o()}}}function instance$o(e,t,n){let{$$slots:r={},$$scope:i}=t,{primary:o=!1}=t,{secondary:s=!1}=t,{type:a}=t,{style:c=""}=t,{disabled:l=!1}=t;const u=createEventDispatcher();return e.$$set=e=>{n(6,t=assign(assign({},t),exclude_internal_props(e))),"primary"in e&&n(0,o=e.primary),"secondary"in e&&n(1,s=e.secondary),"type"in e&&n(2,a=e.type),"style"in e&&n(3,c=e.style),"disabled"in e&&n(4,l=e.disabled),"$$scope"in e&&n(7,i=e.$$scope)},t=exclude_internal_props(t),[o,s,a,c,l,function(){u("click")},t,i,r]}class Button extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$o,safe_not_equal,{primary:0,secondary:1,type:2,style:3,disabled:4})}}function create_else_block$1(e){let t,n=e[1]("login")+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("login")+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_if_block$2(e){let t,n=e[1]("sign_out")+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("sign_out")+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_default_slot_1$4(e){let t;function n(e,t){return e[0]?create_if_block$2:create_else_block$1}let r=n(e),i=r(e);return{c(){i.c(),t=empty()},m(e,n){i.m(e,n),insert(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&detach(t)}}}function create_default_slot$6(e){let t;return{c(){t=text("Toggle Theme")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_fragment$n(e){let t,n,r,i,o,s,a,c,l=e[1]("Intro.welcome")+"";return o=new Button({props:{$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:e}}}),o.$on("click",e[2]),a=new Button({props:{$$slots:{default:[create_default_slot$6]},$$scope:{ctx:e}}}),a.$on("click",toggleTheme),{c(){t=element("main"),n=element("p"),r=text(l),i=space(),create_component(o.$$.fragment),s=space(),create_component(a.$$.fragment),attr(t,"class","svelte-19t4l8x")},m(e,l){insert(e,t,l),append(t,n),append(n,r),append(t,i),mount_component(o,t,null),append(t,s),mount_component(a,t,null),c=!0},p(e,[t]){(!c||2&t)&&l!==(l=e[1]("Intro.welcome")+"")&&set_data(r,l);const n={};11&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const i={};8&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i)},i(e){c||(transition_in(o.$$.fragment,e),transition_in(a.$$.fragment,e),c=!0)},o(e){transition_out(o.$$.fragment,e),transition_out(a.$$.fragment,e),c=!1},d(e){e&&detach(t),destroy_component(o),destroy_component(a)}}}function toggleTheme(){window.document.body.classList.toggle("dark-mode")}function instance$n(e,t,n){let r,i;component_subscribe(e,user,(e=>n(0,r=e))),component_subscribe(e,X,(e=>n(1,i=e)));return[r,i,()=>__awaiter$9(void 0,void 0,void 0,(function*(){if(r)return yield supabase.auth.signOut(),void(yield replace("/"));yield push("/sign_in")}))]}class Intro extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$n,safe_not_equal,{})}}function create_fragment$m(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m,_,g,v,y,b,w,E,$,P,T,A;return{c(){t=element("form"),n=element("div"),r=element("label"),r.textContent="Email",i=space(),o=element("input"),a=space(),c=element("div"),l=element("label"),l.textContent="Name",u=space(),p=element("input"),d=space(),h=element("div"),f=element("label"),f.textContent="Website",m=space(),_=element("input"),g=space(),v=element("div"),y=element("input"),w=space(),E=element("div"),$=element("button"),P=text("Sign Out"),attr(r,"for","email"),attr(o,"id","email"),attr(o,"type","text"),o.value=s=e[3]?.email,o.disabled=!0,attr(l,"for","username"),attr(p,"id","username"),attr(p,"type","text"),attr(f,"for","website"),attr(_,"id","website"),attr(_,"type","website"),attr(y,"type","submit"),attr(y,"class","button block primary"),y.value=b=e[0]?"Loading ...":"Update",y.disabled=e[0],attr($,"class","button block"),$.disabled=e[0],attr(t,"class","form-widget")},m(s,b){insert(s,t,b),append(t,n),append(n,r),append(n,i),append(n,o),append(t,a),append(t,c),append(c,l),append(c,u),append(c,p),set_input_value(p,e[1]),append(t,d),append(t,h),append(h,f),append(h,m),append(h,_),set_input_value(_,e[2]),append(t,g),append(t,v),append(v,y),append(t,w),append(t,E),append(E,$),append($,P),T||(A=[listen(p,"input",e[7]),listen(_,"input",e[8]),listen($,"click",e[6]),action_destroyer(e[4].call(null,t)),listen(t,"submit",prevent_default(e[5]))],T=!0)},p(e,[t]){8&t&&s!==(s=e[3]?.email)&&o.value!==s&&(o.value=s),2&t&&p.value!==e[1]&&set_input_value(p,e[1]),4&t&&set_input_value(_,e[2]),1&t&&b!==(b=e[0]?"Loading ...":"Update")&&(y.value=b),1&t&&(y.disabled=e[0]),1&t&&($.disabled=e[0])},i:noop$2,o:noop$2,d(e){e&&detach(t),T=!1,run_all(A)}}}function instance$m(e,t,n){let r;component_subscribe(e,user,(e=>n(3,r=e)));let i,o,s,a=!0;return[a,i,o,r,function(e){return __awaiter$9(this,void 0,void 0,(function*(){try{n(0,a=!0);const e=supabase.auth.user();let{data:t,error:r,status:c}=yield supabase.from("profiles").select("username, website, avatar_url").eq("id",null==e?void 0:e.id).single();if(r&&406!==c)throw r;return t&&(n(1,i=t.username),n(2,o=t.website),s=t.avatar_url),{destroy(){}}}catch(e){alert(e.message)}finally{n(0,a=!1)}}))},function(){return __awaiter$9(this,void 0,void 0,(function*(){try{n(0,a=!0);const e=supabase.auth.user(),t={id:null==e?void 0:e.id,username:i,website:o,avatar_url:s,updated_at:new Date};let{error:r}=yield supabase.from("profiles").upsert(t,{returning:"minimal"});if(r)throw r}catch(e){alert(e.message)}finally{n(0,a=!1)}}))},function(){return __awaiter$9(this,void 0,void 0,(function*(){try{n(0,a=!0);let{error:e}=yield supabase.auth.signOut();if(e)throw e}catch(e){alert(e.message)}finally{n(0,a=!1)}}))},function(){i=this.value,n(1,i)},function(){o=this.value,n(2,o)}]}class Profile extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$m,safe_not_equal,{})}}function create_fragment$l(e){let t,n,r,i=[{width:"24"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],o={};for(let e=0;e<i.length;e+=1)o=assign(o,i[e]);return{c(){t=svg_element("svg"),n=svg_element("circle"),r=svg_element("path"),attr(n,"cx","12"),attr(n,"cy","12"),attr(n,"r","11.5"),attr(n,"stroke","#D0D1D3"),attr(r,"d","m17 9-6.875 7L7 12.818"),attr(r,"stroke","#D0D1D3"),attr(r,"stroke-width","2"),attr(r,"stroke-linecap","round"),attr(r,"stroke-linejoin","round"),set_svg_attributes(t,o)},m(e,i){insert(e,t,i),append(t,n),append(t,r)},p(e,[n]){set_svg_attributes(t,o=get_spread_update(i,[{width:"24"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$l(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Check_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$l,safe_not_equal,{})}}function create_fragment$k(e){let t,n,r=[{width:"24"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),attr(n,"d","M18 6 6 18M6 6l12 12"),attr(n,"stroke","#B5B6B9"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),set_svg_attributes(t,i)},m(e,r){insert(e,t,r),append(t,n)},p(e,[n]){set_svg_attributes(t,i=get_spread_update(r,[{width:"24"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$k(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Feed_create_popup_close_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$k,safe_not_equal,{})}}function create_fragment$j(e){let t,n,r=[{width:"25"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),attr(n,"d","M16.018 7.5 19.572 4m2.03-2-2.03 2 2.03-2zm-9.758 9.61c.525.51.941 1.116 1.227 1.785a5.428 5.428 0 0 1 .014 4.226c-.28.67-.693 1.28-1.214 1.793-.521.513-1.14.92-1.82 1.196a5.659 5.659 0 0 1-4.293-.014 5.592 5.592 0 0 1-1.812-1.208 5.456 5.456 0 0 1-1.567-3.869 5.458 5.458 0 0 1 1.635-3.841 5.628 5.628 0 0 1 3.9-1.61 5.631 5.631 0 0 1 3.93 1.543v-.001zm0 0 4.174-4.11-4.174 4.11zm4.174-4.11 3.046 3L22.618 7l-3.046-3-3.554 3.5z"),attr(n,"stroke","#D0D1D3"),attr(n,"stroke-width","2"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),set_svg_attributes(t,i)},m(e,r){insert(e,t,r),append(t,n)},p(e,[n]){set_svg_attributes(t,i=get_spread_update(r,[{width:"25"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$j(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Key_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$j,safe_not_equal,{})}}function create_fragment$i(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m,_=[{width:"50"},{height:"50"},{viewBox:"0 0 49 49"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],g={};for(let e=0;e<_.length;e+=1)g=assign(g,_[e]);return{c(){t=svg_element("svg"),n=svg_element("ellipse"),r=svg_element("ellipse"),i=svg_element("ellipse"),o=svg_element("defs"),s=svg_element("linearGradient"),a=svg_element("stop"),c=svg_element("stop"),l=svg_element("linearGradient"),u=svg_element("stop"),p=svg_element("stop"),d=svg_element("linearGradient"),h=svg_element("stop"),f=svg_element("stop"),m=svg_element("stop"),attr(n,"cx","24.694"),attr(n,"cy","34.944"),attr(n,"rx","23.333"),attr(n,"ry","14.056"),attr(n,"fill","url(#a)"),attr(r,"cx","24.694"),attr(r,"cy","25.367"),attr(r,"rx","23.333"),attr(r,"ry","14.056"),attr(r,"fill","url(#b)"),attr(i,"cx","24.694"),attr(i,"cy","14.056"),attr(i,"rx","23.333"),attr(i,"ry","14.056"),attr(i,"fill","url(#c)"),attr(a,"stop-color","#7EE2D3"),attr(c,"offset","1"),attr(c,"stop-color","#EAF2FA"),attr(c,"stop-opacity",".12"),attr(s,"id","a"),attr(s,"x1","14.293"),attr(s,"y1","54.8"),attr(s,"x2",".18"),attr(s,"y2","28.48"),attr(s,"gradientUnits","userSpaceOnUse"),attr(u,"stop-color","#EAF2FA"),attr(u,"stop-opacity",".77"),attr(p,"offset","1"),attr(p,"stop-color","#7EE2D3"),attr(l,"id","b"),attr(l,"x1","6.14"),attr(l,"y1","34.709"),attr(l,"x2","46.014"),attr(l,"y2","33.266"),attr(l,"gradientUnits","userSpaceOnUse"),attr(h,"stop-color","#EAF2FA"),attr(f,"offset",".635"),attr(f,"stop-color","#EAF2FA"),attr(f,"stop-opacity",".6"),attr(m,"offset",".995"),attr(m,"stop-color","#EAF2FA"),attr(m,"stop-opacity",".22"),attr(d,"id","c"),attr(d,"x1","14.012"),attr(d,"y1","0"),attr(d,"x2","51.742"),attr(d,"y2","5.799"),attr(d,"gradientUnits","userSpaceOnUse"),set_svg_attributes(t,g)},m(e,_){insert(e,t,_),append(t,n),append(t,r),append(t,i),append(t,o),append(o,s),append(s,a),append(s,c),append(o,l),append(l,u),append(l,p),append(o,d),append(d,h),append(d,f),append(d,m)},p(e,[n]){set_svg_attributes(t,g=get_spread_update(_,[{width:"50"},{height:"50"},{viewBox:"0 0 49 49"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$i(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Logo_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,create_fragment$i,safe_not_equal,{})}}function create_fragment$h(e){let t,n,r,i=[{width:"25"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],o={};for(let e=0;e<i.length;e+=1)o=assign(o,i[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),r=svg_element("path"),attr(n,"d","M4.309 4h16.247c1.117 0 2.031.9 2.031 2v12c0 1.1-.914 2-2.03 2H4.308c-1.117 0-2.03-.9-2.03-2V6c0-1.1.913-2 2.03-2z"),attr(n,"stroke","#D0D1D3"),attr(n,"stroke-width","2"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),attr(r,"d","m22.587 6-10.154 7L2.278 6"),attr(r,"stroke","#D0D1D3"),attr(r,"stroke-width","2"),attr(r,"stroke-linecap","round"),attr(r,"stroke-linejoin","round"),set_svg_attributes(t,o)},m(e,i){insert(e,t,i),append(t,n),append(t,r)},p(e,[n]){set_svg_attributes(t,o=get_spread_update(i,[{width:"25"},{height:"24"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$h(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Mail_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$h,safe_not_equal,{})}}function create_fragment$g(e){let t,n,r=[{width:"16"},{height:"16"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),attr(n,"d","M8 14.667A6.667 6.667 0 1 0 8 1.333a6.667 6.667 0 0 0 0 13.334zM5.333 8h5.334"),attr(n,"stroke","#8E9095"),attr(n,"stroke-width","1.5"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),set_svg_attributes(t,i)},m(e,r){insert(e,t,r),append(t,n)},p(e,[n]){set_svg_attributes(t,i=get_spread_update(r,[{width:"16"},{height:"16"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$g(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Minus_circle_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$g,safe_not_equal,{})}}function create_fragment$f(e){let t,n,r=[{width:"18"},{height:"18"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),attr(n,"d","M9 16.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zM9 6v6M6 9h6"),attr(n,"stroke","#8E9095"),attr(n,"stroke-width","1.5"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),set_svg_attributes(t,i)},m(e,r){insert(e,t,r),append(t,n)},p(e,[n]){set_svg_attributes(t,i=get_spread_update(r,[{width:"18"},{height:"18"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$f(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Plus_circle_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$f,safe_not_equal,{})}}function create_fragment$e(e){let t,n,r,i=[{width:"16"},{height:"16"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],o={};for(let e=0;e<i.length;e+=1)o=assign(o,i[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),r=svg_element("path"),attr(n,"opacity",".33"),attr(n,"d","M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"),attr(n,"fill","#000"),attr(r,"d","m11 5-6 6M5 5l6 6"),attr(r,"stroke","#fff"),attr(r,"stroke-linecap","round"),attr(r,"stroke-linejoin","round"),set_svg_attributes(t,o)},m(e,i){insert(e,t,i),append(t,n),append(t,r)},p(e,[n]){set_svg_attributes(t,o=get_spread_update(i,[{width:"16"},{height:"16"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$e(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Upload_close_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$e,safe_not_equal,{})}}function create_fragment$d(e){let t,n,r=[{width:"18"},{height:"18"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},e[0]],i={};for(let e=0;e<r.length;e+=1)i=assign(i,r[e]);return{c(){t=svg_element("svg"),n=svg_element("path"),attr(n,"d","M9 1v16M1 9h16"),attr(n,"stroke","#8E9095"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),set_svg_attributes(t,i)},m(e,r){insert(e,t,r),append(t,n)},p(e,[n]){set_svg_attributes(t,i=get_spread_update(r,[{width:"18"},{height:"18"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&n&&e[0]]))},i:noop$2,o:noop$2,d(e){e&&detach(t)}}}function instance$d(e,t,n){return e.$$set=e=>{n(0,t=assign(assign({},t),exclude_internal_props(e)))},[t=exclude_internal_props(t)]}class Upload_plus_svg extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$d,safe_not_equal,{})}}const SvgCheck=Check_svg,SvgKey=Key_svg,SvgLogo=Logo_svg,SvgMail=Mail_svg,SvgUploadPlus=Upload_plus_svg,SvgUploadClose=Upload_close_svg,SvgFeedCreatePopupClose=Feed_create_popup_close_svg,SvgMinusCircle=Minus_circle_svg,SvgPlusCircle=Plus_circle_svg;function create_else_block(e){let t,n,r,i;return t=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch;",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:e}}}),t.$on("click",e[2]),r=new Button({props:{type:"primary",style:"font-size: 14px; margin-left: 12px; align-self: stretch;",$$slots:{default:[create_default_slot$5]},$$scope:{ctx:e}}}),r.$on("click",e[3]),{c(){create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment)},m(e,o){mount_component(t,e,o),insert(e,n,o),mount_component(r,e,o),i=!0},p(e,n){const i={};18&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i);const o={};18&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o)},i(e){i||(transition_in(t.$$.fragment,e),transition_in(r.$$.fragment,e),i=!0)},o(e){transition_out(t.$$.fragment,e),transition_out(r.$$.fragment,e),i=!1},d(e){destroy_component(t,e),e&&detach(n),destroy_component(r,e)}}}function create_if_block$1(e){let t,n,r;return{c(){t=element("a"),t.textContent="Intro",n=space(),r=element("a"),r.textContent="Service Sample",attr(t,"class","link svelte-agwrht"),attr(t,"href","/"),attr(r,"class","link svelte-agwrht"),attr(r,"href","/#/service_sample")},m(e,i){insert(e,t,i),insert(e,n,i),insert(e,r,i)},p:noop$2,i:noop$2,o:noop$2,d(e){e&&detach(t),e&&detach(n),e&&detach(r)}}}function create_default_slot_1$3(e){let t,n,r=e[1]("login")+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){2&t&&r!==(r=e[1]("login")+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_default_slot$5(e){let t,n,r=e[1]("SignUp.title")+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){2&t&&r!==(r=e[1]("SignUp.title")+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_fragment$c(e){let t,n,r,i,o,s,a;n=new SvgLogo({props:{width:"34.29"}});const c=[create_if_block$1,create_else_block],l=[];function u(e,t){return e[0]?0:1}return o=u(e),s=l[o]=c[o](e),{c(){t=element("nav"),create_component(n.$$.fragment),r=space(),i=element("div"),s.c(),attr(i,"class","nav-menu svelte-agwrht"),attr(t,"class","svelte-agwrht")},m(e,s){insert(e,t,s),mount_component(n,t,null),append(t,r),append(t,i),l[o].m(i,null),a=!0},p(e,[t]){let n=o;o=u(e),o===n?l[o].p(e,t):(group_outros(),transition_out(l[n],1,1,(()=>{l[n]=null})),check_outros(),s=l[o],s?s.p(e,t):(s=l[o]=c[o](e),s.c()),transition_in(s,1),s.m(i,null))},i(e){a||(transition_in(n.$$.fragment,e),transition_in(s),a=!0)},o(e){transition_out(n.$$.fragment,e),transition_out(s),a=!1},d(e){e&&detach(t),destroy_component(n),l[o].d()}}}function instance$c(e,t,n){let r,i;component_subscribe(e,user,(e=>n(0,r=e))),component_subscribe(e,X,(e=>n(1,i=e)));return[r,i,async()=>{await push("/sign_in")},()=>{push("/sign_up")}]}class Header extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{})}}const get_rightElement_slot_changes$1=e=>({}),get_rightElement_slot_context$1=e=>({}),get_leftElement_slot_changes$1=e=>({}),get_leftElement_slot_context$1=e=>({});function create_fragment$b(e){let t,n,r,i,o,s,a;const c=e[7].leftElement,l=create_slot(c,e,e[6],get_leftElement_slot_context$1),u=e[7].rightElement,p=create_slot(u,e,e[6],get_rightElement_slot_context$1);return{c(){t=element("main"),l&&l.c(),n=space(),r=element("input"),i=space(),p&&p.c(),attr(r,"style",e[3]),attr(r,"type",e[1]),attr(r,"placeholder",e[0]),attr(r,"class","svelte-nrwdh8"),attr(t,"style",e[2]),attr(t,"class","svelte-nrwdh8")},m(c,u){insert(c,t,u),l&&l.m(t,null),append(t,n),append(t,r),append(t,i),p&&p.m(t,null),o=!0,s||(a=listen(r,"input",e[4]),s=!0)},p(e,[n]){l&&l.p&&(!o||64&n)&&update_slot_base(l,c,e,e[6],o?get_slot_changes(c,e[6],n,get_leftElement_slot_changes$1):get_all_dirty_from_scope(e[6]),get_leftElement_slot_context$1),(!o||8&n)&&attr(r,"style",e[3]),(!o||2&n)&&attr(r,"type",e[1]),(!o||1&n)&&attr(r,"placeholder",e[0]),p&&p.p&&(!o||64&n)&&update_slot_base(p,u,e,e[6],o?get_slot_changes(u,e[6],n,get_rightElement_slot_changes$1):get_all_dirty_from_scope(e[6]),get_rightElement_slot_context$1),(!o||4&n)&&attr(t,"style",e[2])},i(e){o||(transition_in(l,e),transition_in(p,e),o=!0)},o(e){transition_out(l,e),transition_out(p,e),o=!1},d(e){e&&detach(t),l&&l.d(e),p&&p.d(e),s=!1,a()}}}function instance$b(e,t,n){let{$$slots:r={},$$scope:i}=t,{placeholder:o=""}=t,{type:s="text"}=t,{containerStyle:a=""}=t,{inputStyle:c=""}=t,{value:l=""}=t;const u=createEventDispatcher();return e.$$set=e=>{"placeholder"in e&&n(0,o=e.placeholder),"type"in e&&n(1,s=e.type),"containerStyle"in e&&n(2,a=e.containerStyle),"inputStyle"in e&&n(3,c=e.inputStyle),"value"in e&&n(5,l=e.value),"$$scope"in e&&n(6,i=e.$$scope)},[o,s,a,c,e=>{n(5,l=/^(number|range)$/.exec(s)?+e.target.value:e.target.value),u("changed",l)},l,i,r]}class EditText extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{placeholder:0,type:1,containerStyle:2,inputStyle:3,value:5})}}function create_leftElement_slot_1(e){let t,n;return t=new SvgMail({props:{slot:"leftElement"}}),{c(){create_component(t.$$.fragment)},m(e,r){mount_component(t,e,r),n=!0},p:noop$2,i(e){n||(transition_in(t.$$.fragment,e),n=!0)},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_leftElement_slot(e){let t,n;return t=new SvgKey({props:{slot:"leftElement"}}),{c(){create_component(t.$$.fragment)},m(e,r){mount_component(t,e,r),n=!0},p:noop$2,i(e){n||(transition_in(t.$$.fragment,e),n=!0)},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_default_slot_2$2(e){let t,n,r=(e[0]?e[1]("loading"):e[1]("sign_in"))+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){3&t&&r!==(r=(e[0]?e[1]("loading"):e[1]("sign_in"))+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_default_slot_1$2(e){let t,n,r=e[1]("SignIn.sign_in_with_google")+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){2&t&&r!==(r=e[1]("SignIn.sign_in_with_google")+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_default_slot$4(e){let t,n,r=e[1]("SignIn.sign_in_with_facebook")+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){2&t&&r!==(r=e[1]("SignIn.sign_in_with_facebook")+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_fragment$a(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m,_,g,v,y,b,w,E,$,P,T,A,S,U,N,C=e[1]("login")+"",x=e[1]("SignIn.do_not_have_account")+"",I=e[1]("SignIn.forgot_your_password")+"",k=e[1]("SignIn.look_around")+"";return r=new SvgLogo({}),c=new EditText({props:{containerStyle:"width: 80%;",inputStyle:"font-size: 14px;",type:"email",placeholder:e[1]("SignIn.email_hint"),$$slots:{leftElement:[create_leftElement_slot_1]},$$scope:{ctx:e}}}),c.$on("changed",e[2]),u=new EditText({props:{containerStyle:"width: 80%; margin-top: 8px",inputStyle:"font-size: 14px;",type:"password",placeholder:e[1]("SignIn.pw_hint"),$$slots:{leftElement:[create_leftElement_slot]},$$scope:{ctx:e}}}),u.$on("changed",e[3]),w=new Button({props:{primary:!0,style:"font-size: 14px; align-self: stretch; margin: 40px 10% 0 10%",type:"submit",disabled:e[0],$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:e}}}),w.$on("click",e[4]),$=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 12px 10%;",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:e}}}),$.$on("click",e[5]),T=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 0 10%;",$$slots:{default:[create_default_slot$4]},$$scope:{ctx:e}}}),T.$on("click",e[6]),{c(){t=element("main"),n=element("form"),create_component(r.$$.fragment),i=space(),o=element("h1"),s=text(C),a=space(),create_component(c.$$.fragment),l=space(),create_component(u.$$.fragment),p=space(),d=element("div"),h=element("a"),f=text(x),m=text("?"),_=space(),g=element("a"),v=text(I),y=text("?"),b=space(),create_component(w.$$.fragment),E=space(),create_component($.$$.fragment),P=space(),create_component(T.$$.fragment),A=space(),S=element("a"),U=text(k),set_style(o,"margin-bottom","60px"),attr(h,"class","link svelte-nyragz"),attr(h,"href","/#/sign_up"),attr(g,"class","link svelte-nyragz"),attr(g,"href","/#/sign_up"),attr(d,"class","container-options svelte-nyragz"),attr(S,"class","link svelte-nyragz"),attr(S,"href","/#"),set_style(S,"margin-top","8px"),attr(n,"class","svelte-nyragz"),attr(t,"class","svelte-nyragz")},m(e,C){insert(e,t,C),append(t,n),mount_component(r,n,null),append(n,i),append(n,o),append(o,s),append(n,a),mount_component(c,n,null),append(n,l),mount_component(u,n,null),append(n,p),append(n,d),append(d,h),append(h,f),append(h,m),append(d,_),append(d,g),append(g,v),append(g,y),append(n,b),mount_component(w,n,null),append(n,E),mount_component($,n,null),append(n,P),mount_component(T,n,null),append(n,A),append(n,S),append(S,U),N=!0},p(e,[t]){(!N||2&t)&&C!==(C=e[1]("login")+"")&&set_data(s,C);const n={};2&t&&(n.placeholder=e[1]("SignIn.email_hint")),2048&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n);const r={};2&t&&(r.placeholder=e[1]("SignIn.pw_hint")),2048&t&&(r.$$scope={dirty:t,ctx:e}),u.$set(r),(!N||2&t)&&x!==(x=e[1]("SignIn.do_not_have_account")+"")&&set_data(f,x),(!N||2&t)&&I!==(I=e[1]("SignIn.forgot_your_password")+"")&&set_data(v,I);const i={};1&t&&(i.disabled=e[0]),2051&t&&(i.$$scope={dirty:t,ctx:e}),w.$set(i);const o={};2050&t&&(o.$$scope={dirty:t,ctx:e}),$.$set(o);const a={};2050&t&&(a.$$scope={dirty:t,ctx:e}),T.$set(a),(!N||2&t)&&k!==(k=e[1]("SignIn.look_around")+"")&&set_data(U,k)},i(e){N||(transition_in(r.$$.fragment,e),transition_in(c.$$.fragment,e),transition_in(u.$$.fragment,e),transition_in(w.$$.fragment,e),transition_in($.$$.fragment,e),transition_in(T.$$.fragment,e),N=!0)},o(e){transition_out(r.$$.fragment,e),transition_out(c.$$.fragment,e),transition_out(u.$$.fragment,e),transition_out(w.$$.fragment,e),transition_out($.$$.fragment,e),transition_out(T.$$.fragment,e),N=!1},d(e){e&&detach(t),destroy_component(r),destroy_component(c),destroy_component(u),destroy_component(w),destroy_component($),destroy_component(T)}}}function instance$a(e,t,n){let r,i;component_subscribe(e,user,(e=>n(9,r=e))),component_subscribe(e,X,(e=>n(1,i=e)));let o,s,a=!1;onMount((()=>__awaiter$9(void 0,void 0,void 0,(function*(){r&&(yield replace("/"))}))));return[a,i,e=>{o=e.detail},e=>{s=e.detail},()=>__awaiter$9(void 0,void 0,void 0,(function*(){var e;yield(e=()=>__awaiter$9(void 0,void 0,void 0,(function*(){const{error:e}=yield supabase.auth.signIn({email:o,password:s});return e||replace("/"),e})),__awaiter$9(void 0,void 0,void 0,(function*(){try{n(0,a=!0);const t=yield e();if(t)throw t}catch(e){alert(e.error_description||e.message)}finally{n(0,a=!1)}})))})),()=>__awaiter$9(void 0,void 0,void 0,(function*(){})),()=>__awaiter$9(void 0,void 0,void 0,(function*(){}))]}class SignIn extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{})}}function create_default_slot$3(e){let t,n,r=(e[0]?e[2]("loading"):e[2]("SignUp.title"))+"";return{c(){t=element("div"),n=text(r),attr(t,"class","text")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){5&t&&r!==(r=(e[0]?e[2]("loading"):e[2]("SignUp.title"))+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_fragment$9(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m,_,g,v,y,b,w,E,$,P,T,A,S,U,N,C,x,I,k,O,R=e[2]("SignUp.title")+"",F=e[2]("email")+"",L=e[2]("pw")+"",G=e[2]("SignUp.pw_confirm")+"",M=e[2]("SignUp.terms_and_agreement")+"";return v=new EditText({props:{containerStyle:"align-self: stretch;",inputStyle:"font-size: 14px;",type:"email",placeholder:e[2]("SignUp.email_hint")}}),v.$on("changed",e[3]),b=new EditText({props:{containerStyle:"align-self: stretch; margin-top: 8px",inputStyle:"font-size: 14px;",type:"password",placeholder:e[2]("SignUp.pw_hint")}}),b.$on("changed",e[4]),E=new EditText({props:{containerStyle:"align-self: stretch; margin-top: 8px",inputStyle:"font-size: 14px;",type:"password",placeholder:e[2]("SignUp.pw_confirm_hint")}}),E.$on("changed",e[5]),A=new SvgCheck({props:{width:34,fill:e[1]?"#0DB293":"none"}}),x=new Button({props:{primary:!0,class:"btn-sign-up",type:"submit",disabled:e[0],$$slots:{default:[create_default_slot$3]},$$scope:{ctx:e}}}),x.$on("click",e[7]),{c(){t=element("main"),n=element("form"),r=element("div"),i=element("h1"),o=text(R),s=space(),a=element("div"),c=element("p"),l=text(F),u=space(),p=element("p"),d=text(L),h=space(),f=element("p"),m=text(G),_=space(),g=element("div"),create_component(v.$$.fragment),y=space(),create_component(b.$$.fragment),w=space(),create_component(E.$$.fragment),$=space(),P=element("div"),T=element("div"),create_component(A.$$.fragment),S=space(),U=element("p"),N=space(),C=element("div"),create_component(x.$$.fragment),set_style(i,"align-self","center"),attr(r,"class","header svelte-dlztu5"),set_style(c,"height","40px"),attr(c,"class","svelte-dlztu5"),set_style(p,"height","40px"),attr(p,"class","svelte-dlztu5"),set_style(f,"height","40px"),attr(f,"class","svelte-dlztu5"),attr(a,"class","label svelte-dlztu5"),attr(g,"class","input svelte-dlztu5"),attr(U,"class","svelte-dlztu5"),attr(T,"class","container icon svelte-dlztu5"),attr(P,"class","terms svelte-dlztu5"),attr(C,"class","btn-sign svelte-dlztu5"),attr(n,"class","svelte-dlztu5"),attr(t,"class","svelte-dlztu5")},m(R,F){insert(R,t,F),append(t,n),append(n,r),append(r,i),append(i,o),append(n,s),append(n,a),append(a,c),append(c,l),append(a,u),append(a,p),append(p,d),append(a,h),append(a,f),append(f,m),append(n,_),append(n,g),mount_component(v,g,null),append(g,y),mount_component(b,g,null),append(g,w),mount_component(E,g,null),append(n,$),append(n,P),append(P,T),mount_component(A,T,null),append(T,S),append(T,U),U.innerHTML=M,append(n,N),append(n,C),mount_component(x,C,null),I=!0,k||(O=listen(T,"click",e[6]),k=!0)},p(e,[t]){(!I||4&t)&&R!==(R=e[2]("SignUp.title")+"")&&set_data(o,R),(!I||4&t)&&F!==(F=e[2]("email")+"")&&set_data(l,F),(!I||4&t)&&L!==(L=e[2]("pw")+"")&&set_data(d,L),(!I||4&t)&&G!==(G=e[2]("SignUp.pw_confirm")+"")&&set_data(m,G);const n={};4&t&&(n.placeholder=e[2]("SignUp.email_hint")),v.$set(n);const r={};4&t&&(r.placeholder=e[2]("SignUp.pw_hint")),b.$set(r);const i={};4&t&&(i.placeholder=e[2]("SignUp.pw_confirm_hint")),E.$set(i);const s={};2&t&&(s.fill=e[1]?"#0DB293":"none"),A.$set(s),(!I||4&t)&&M!==(M=e[2]("SignUp.terms_and_agreement")+"")&&(U.innerHTML=M);const a={};1&t&&(a.disabled=e[0]),8197&t&&(a.$$scope={dirty:t,ctx:e}),x.$set(a)},i(e){I||(transition_in(v.$$.fragment,e),transition_in(b.$$.fragment,e),transition_in(E.$$.fragment,e),transition_in(A.$$.fragment,e),transition_in(x.$$.fragment,e),I=!0)},o(e){transition_out(v.$$.fragment,e),transition_out(b.$$.fragment,e),transition_out(E.$$.fragment,e),transition_out(A.$$.fragment,e),transition_out(x.$$.fragment,e),I=!1},d(e){e&&detach(t),destroy_component(v),destroy_component(b),destroy_component(E),destroy_component(A),destroy_component(x),k=!1,O()}}}function instance$9(e,t,n){let r,i;component_subscribe(e,X,(e=>n(2,r=e))),component_subscribe(e,user,(e=>n(11,i=e)));let o,s,a,c=!1,l=!1;onMount((()=>__awaiter$9(void 0,void 0,void 0,(function*(){i&&(yield replace("/"))}))));return[c,l,r,e=>{o=e.detail},e=>{s=e.detail},e=>{a=e.detail},()=>{n(1,l=!l)},()=>__awaiter$9(void 0,void 0,void 0,(function*(){var e;o&&s&&a&&l?yield(e=()=>__awaiter$9(void 0,void 0,void 0,(function*(){const{error:e}=yield supabase.auth.signUp({email:o,password:s});return e})),__awaiter$9(void 0,void 0,void 0,(function*(){try{n(0,c=!0);const t=yield e();if(t)throw t}catch(e){alert(e.error_description||e.message)}finally{n(0,c=!1)}}))):alert(r("SignUp.missing_inputs"))}))]}class SignUp extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{})}}const createCommunity=async(e,t)=>{if(!e||!t)return console.error("no userId or community"),null;try{const{data:n,error:r}=await supabase.from("Community").insert([Object.assign({},t)]).single();if(r)throw r;return n&&await supabase.from("Permission").insert([{communityId:n.id,type:"owner",userId:e}]),n}catch(e){return console.error(e),null}},getMyCommunites=async e=>{try{const{data:t,error:n}=await supabase.from("Permission").select("\n        Community (\n          isPublic,\n          name,\n          description,\n          currency,\n          color\n        )\n      ").match({userId:e});if(n)throw n;return null==t?void 0:t.map((e=>e.Community))}catch(e){return console.error(e),null}};function create_default_slot_3(e){let t;return{c(){t=element("div"),t.textContent="Create Community"},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_default_slot_2$1(e){let t;return{c(){t=element("div"),t.textContent="Get My Communities"},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_default_slot_1$1(e){let t;return{c(){t=element("div"),t.textContent="Update Community"},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_default_slot$2(e){let t;return{c(){t=element("div"),t.textContent="Delete Community"},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_fragment$8(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m;return i=new EditText({props:{containerStyle:"width: 80%;",inputStyle:"font-size: 14px;",type:"text",placeholder:"community name"}}),i.$on("changed",e[0]),s=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 12px 10%;",$$slots:{default:[create_default_slot_3]},$$scope:{ctx:e}}}),s.$on("click",e[1]),c=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 12px 10%;",$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:e}}}),c.$on("click",e[2]),u=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 12px 10%;",$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:e}}}),d=new Button({props:{style:"color: black; font-size: 14px; align-self: stretch; margin: 12px 10%;",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:e}}}),{c(){t=element("main"),n=element("p"),n.textContent="Community Service",r=space(),create_component(i.$$.fragment),o=space(),create_component(s.$$.fragment),a=space(),create_component(c.$$.fragment),l=space(),create_component(u.$$.fragment),p=space(),create_component(d.$$.fragment),h=space(),f=element("p"),f.textContent="Community Service",attr(n,"class","title svelte-1eggljf"),set_style(n,"margin-top","8px"),attr(f,"class","title svelte-1eggljf"),set_style(f,"margin-top","40px"),attr(t,"class","svelte-1eggljf")},m(e,_){insert(e,t,_),append(t,n),append(t,r),mount_component(i,t,null),append(t,o),mount_component(s,t,null),append(t,a),mount_component(c,t,null),append(t,l),mount_component(u,t,null),append(t,p),mount_component(d,t,null),append(t,h),append(t,f),m=!0},p(e,[t]){const n={};128&t&&(n.$$scope={dirty:t,ctx:e}),s.$set(n);const r={};128&t&&(r.$$scope={dirty:t,ctx:e}),c.$set(r);const i={};128&t&&(i.$$scope={dirty:t,ctx:e}),u.$set(i);const o={};128&t&&(o.$$scope={dirty:t,ctx:e}),d.$set(o)},i(e){m||(transition_in(i.$$.fragment,e),transition_in(s.$$.fragment,e),transition_in(c.$$.fragment,e),transition_in(u.$$.fragment,e),transition_in(d.$$.fragment,e),m=!0)},o(e){transition_out(i.$$.fragment,e),transition_out(s.$$.fragment,e),transition_out(c.$$.fragment,e),transition_out(u.$$.fragment,e),transition_out(d.$$.fragment,e),m=!1},d(e){e&&detach(t),destroy_component(i),destroy_component(s),destroy_component(c),destroy_component(u),destroy_component(d)}}}function instance$8(e,t,n){let r,i;component_subscribe(e,user,(e=>n(5,r=e)));return[e=>{i=e.detail},()=>__awaiter$9(void 0,void 0,void 0,(function*(){if(!r)return;const e=yield createCommunity(r.id,{name:i,currency:"KRW",color:"red",description:"Hi dooboolab",isPublic:!0});console.log("community",e)})),()=>__awaiter$9(void 0,void 0,void 0,(function*(){if(!r)return;const e=yield getMyCommunites(r.id);console.log("communities",e),e&&(null==e||e[0])}))]}class ServiceSample extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{})}}function create_fragment$7(e){let t,n,r;return{c(){t=element("textarea"),attr(t,"style",e[2]),attr(t,"placeholder",e[1]),attr(t,"class","svelte-1myl1vd")},m(i,o){insert(i,t,o),set_input_value(t,e[0]),n||(r=listen(t,"input",e[3]),n=!0)},p(e,[n]){4&n&&attr(t,"style",e[2]),2&n&&attr(t,"placeholder",e[1]),1&n&&set_input_value(t,e[0])},i:noop$2,o:noop$2,d(e){e&&detach(t),n=!1,r()}}}function instance$7(e,t,n){let{placeholder:r=""}=t,{style:i=""}=t,{value:o=""}=t;return e.$$set=e=>{"placeholder"in e&&n(1,r=e.placeholder),"style"in e&&n(2,i=e.style),"value"in e&&n(0,o=e.value)},[o,r,i,function(){o=this.value,n(0,o)}]}class EditTextArea extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{placeholder:1,style:2,value:0})}}function create_if_block(e){let t,n,r,i;const o=e[5].default,s=create_slot(o,e,e[4],null);return{c(){t=element("div"),s&&s.c(),attr(t,"class","backdrop svelte-1ak1tdz"),attr(t,"style",e[1])},m(o,a){insert(o,t,a),s&&s.m(t,null),n=!0,r||(i=listen(t,"click",self$1(e[2])),r=!0)},p(e,r){s&&s.p&&(!n||16&r)&&update_slot_base(s,o,e,e[4],n?get_slot_changes(o,e[4],r,null):get_all_dirty_from_scope(e[4]),null),(!n||2&r)&&attr(t,"style",e[1])},i(e){n||(transition_in(s,e),n=!0)},o(e){transition_out(s,e),n=!1},d(e){e&&detach(t),s&&s.d(e),r=!1,i()}}}function create_fragment$6(e){let t,n,r=e[0]&&create_if_block(e);return{c(){r&&r.c(),t=empty()},m(e,i){r&&r.m(e,i),insert(e,t,i),n=!0},p(e,[n]){e[0]?r?(r.p(e,n),1&n&&transition_in(r,1)):(r=create_if_block(e),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,(()=>{r=null})),check_outros())},i(e){n||(transition_in(r),n=!0)},o(e){transition_out(r),n=!1},d(e){r&&r.d(e),e&&detach(t)}}}function instance$6(e,t,n){let{$$slots:r={},$$scope:i}=t,{visible:o}=t,{style:s=""}=t,{disableBackdropClickToClose:a=!1}=t;const c=createEventDispatcher();return e.$$set=e=>{"visible"in e&&n(0,o=e.visible),"style"in e&&n(1,s=e.style),"disableBackdropClickToClose"in e&&n(3,a=e.disableBackdropClickToClose),"$$scope"in e&&n(4,i=e.$$scope)},[o,s,()=>{a||c("close")},a,i,r]}class Modal extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{visible:0,style:1,disableBackdropClickToClose:3})}}const get_rightElement_slot_changes=e=>({}),get_rightElement_slot_context=e=>({}),get_leftElement_slot_changes=e=>({}),get_leftElement_slot_context=e=>({});function create_fragment$5(e){let t,n,r,i,o,s,a;const c=e[10].leftElement,l=create_slot(c,e,e[9],get_leftElement_slot_context),u=e[10].rightElement,p=create_slot(u,e,e[9],get_rightElement_slot_context);return{c(){t=element("main"),l&&l.c(),n=space(),r=element("input"),i=space(),p&&p.c(),attr(r,"style",e[2]),attr(r,"placeholder",e[0]),attr(r,"class","svelte-nrwdh8"),attr(t,"style",e[1]),attr(t,"class","svelte-nrwdh8")},m(c,u){insert(c,t,u),l&&l.m(t,null),append(t,n),append(t,r),e[11](r),append(t,i),p&&p.m(t,null),o=!0,s||(a=listen(r,"input",e[4]),s=!0)},p(e,[n]){l&&l.p&&(!o||512&n)&&update_slot_base(l,c,e,e[9],o?get_slot_changes(c,e[9],n,get_leftElement_slot_changes):get_all_dirty_from_scope(e[9]),get_leftElement_slot_context),(!o||4&n)&&attr(r,"style",e[2]),(!o||1&n)&&attr(r,"placeholder",e[0]),p&&p.p&&(!o||512&n)&&update_slot_base(p,u,e,e[9],o?get_slot_changes(u,e[9],n,get_rightElement_slot_changes):get_all_dirty_from_scope(e[9]),get_rightElement_slot_context),(!o||2&n)&&attr(t,"style",e[1])},i(e){o||(transition_in(l,e),transition_in(p,e),o=!0)},o(e){transition_out(l,e),transition_out(p,e),o=!1},d(n){n&&detach(t),l&&l.d(n),e[11](null),p&&p.d(n),s=!1,a()}}}function instance$5(e,t,n){let{$$slots:r={},$$scope:i}=t,{placeholder:o=""}=t,{containerStyle:s=""}=t,{inputStyle:a=""}=t,{isLocaleString:c=!1}=t,{max:l=1e11}=t,{min:u=0}=t,{value:p}=t,d=null;return e.$$set=e=>{"placeholder"in e&&n(0,o=e.placeholder),"containerStyle"in e&&n(1,s=e.containerStyle),"inputStyle"in e&&n(2,a=e.inputStyle),"isLocaleString"in e&&n(6,c=e.isLocaleString),"max"in e&&n(7,l=e.max),"min"in e&&n(8,u=e.min),"value"in e&&n(5,p=e.value),"$$scope"in e&&n(9,i=e.$$scope)},[o,s,a,d,()=>{if(!d)return;const e=d.value;let t=Number(e.replace(/[A-Za-z!,@#$%^&\-*()]/g,""));t>l&&(t=l),t<u&&(t=u),n(5,p=t),n(3,d.value=c?t.toLocaleString():t.toString(),d)},p,c,l,u,i,r,function(e){binding_callbacks[e?"unshift":"push"]((()=>{d=e,n(3,d)}))}]}class EditNumber extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{placeholder:0,containerStyle:1,inputStyle:2,isLocaleString:6,max:7,min:8,value:5})}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}var UZIP_1=createCommonjsModule((function(e){var t,n,r={};e.exports=r,r.parse=function(e,t){for(var n=r.bin.readUshort,i=r.bin.readUint,o=0,s={},a=new Uint8Array(e),c=a.length-4;101010256!=i(a,c);)c--;o=c,o+=4;var l=n(a,o+=4),u=(n(a,o+=2),i(a,o+=2)),p=i(a,o+=4);o+=4,o=p;for(var d=0;d<l;d++){i(a,o),o+=4,o+=4,o+=4,i(a,o+=4),u=i(a,o+=4);var h=i(a,o+=4),f=n(a,o+=4),m=n(a,o+2),_=n(a,o+4);o+=6;var g=i(a,o+=8);o+=4,o+=f+m+_,r._readLocal(a,g,s,u,h,t)}return s},r._readLocal=function(e,t,n,i,o,s){var a=r.bin.readUshort,c=r.bin.readUint,l=(c(e,t),a(e,t+=4),a(e,t+=2),a(e,t+=2));c(e,t+=2),c(e,t+=4),t+=4;var u=a(e,t+=8),p=a(e,t+=2);t+=2;var d=r.bin.readUTF8(e,t,u);if(t+=u,t+=p,s)n[d]={size:o,csize:i};else{var h=new Uint8Array(e.buffer,t);if(0==l)n[d]=new Uint8Array(h.buffer.slice(t,t+i));else{if(8!=l)throw"unknown compression method: "+l;var f=new Uint8Array(o);r.inflateRaw(h,f),n[d]=f}}},r.inflateRaw=function(e,t){return r.F.inflate(e,t)},r.inflate=function(e,t){return e[0],e[1],r.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},r.deflate=function(e,t){null==t&&(t={level:6});var n=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[n]=120,i[n+1]=156,n+=2,n=r.F.deflateRaw(e,i,n,t.level);var o=r.adler(e,0,e.length);return i[n+0]=o>>>24&255,i[n+1]=o>>>16&255,i[n+2]=o>>>8&255,i[n+3]=o>>>0&255,new Uint8Array(i.buffer,0,n+4)},r.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),i=r.F.deflateRaw(e,n,i,t.level);return new Uint8Array(n.buffer,0,i)},r.encode=function(e,t){null==t&&(t=!1);var n=0,i=r.bin.writeUint,o=r.bin.writeUshort,s={};for(var a in e){var c=!r._noNeed(a)&&!t,l=e[a],u=r.crc.crc(l,0,l.length);s[a]={cpr:c,usize:l.length,crc:u,file:c?r.deflateRaw(l):l}}for(var a in s)n+=s[a].file.length+30+46+2*r.bin.sizeUTF8(a);n+=22;var p=new Uint8Array(n),d=0,h=[];for(var a in s){var f=s[a];h.push(d),d=r._writeHeader(p,d,a,f,0)}var m=0,_=d;for(var a in s)f=s[a],h.push(d),d=r._writeHeader(p,d,a,f,1,h[m++]);var g=d-_;return i(p,d,101010256),d+=4,o(p,d+=4,m),o(p,d+=2,m),i(p,d+=2,g),i(p,d+=4,_),d+=4,d+=2,p.buffer},r._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},r._writeHeader=function(e,t,n,i,o,s){var a=r.bin.writeUint,c=r.bin.writeUshort,l=i.file;return a(e,t,0==o?67324752:33639248),t+=4,1==o&&(t+=2),c(e,t,20),c(e,t+=2,0),c(e,t+=2,i.cpr?8:0),a(e,t+=2,0),a(e,t+=4,i.crc),a(e,t+=4,l.length),a(e,t+=4,i.usize),c(e,t+=4,r.bin.sizeUTF8(n)),c(e,t+=2,0),t+=2,1==o&&(t+=2,t+=2,a(e,t+=6,s),t+=4),t+=r.bin.writeUTF8(e,t,n),0==o&&(e.set(l,t),t+=l.length),t},r.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,n,i){for(var o=0;o<i;o++)e=r.crc.table[255&(e^t[n+o])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^r.crc.update(4294967295,e,t,n)}},r.adler=function(e,t,n){for(var r=1,i=0,o=t,s=t+n;o<s;){for(var a=Math.min(o+5552,s);o<a;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},r.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var i,o="",s=0;s<n;s++)o+="%"+r.bin.pad(e[t+s].toString(16));try{i=decodeURIComponent(o)}catch(i){return r.bin.readASCII(e,t,n)}return i},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var s=n.charCodeAt(o);if(0==(4294967168&s))e[t+i]=s,i++;else if(0==(4294965248&s))e[t+i]=192|s>>6,e[t+i+1]=128|s>>0&63,i+=2;else if(0==(4294901760&s))e[t+i]=224|s>>12,e[t+i+1]=128|s>>6&63,e[t+i+2]=128|s>>0&63,i+=3;else{if(0!=(4292870144&s))throw"e";e[t+i]=240|s>>18,e[t+i+1]=128|s>>12&63,e[t+i+2]=128|s>>6&63,e[t+i+3]=128|s>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},r.F={},r.F.deflateRaw=function(e,t,n,i){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],s=r.F.U,a=r.F._goodIndex,c=(r.F._hash,r.F._putsE),l=0,u=n<<3,p=0,d=e.length;if(0==i){for(;l<d;)c(t,u,l+(P=Math.min(65535,d-l))==d?1:0),u=r.F._copyExact(e,l,P,t,u+8),l+=P;return u>>>3}var h=s.lits,f=s.strt,m=s.prev,_=0,g=0,v=0,y=0,b=0,w=0;for(d>2&&(f[w=r.F._hash(e,0)]=0),l=0;l<d;l++){if(b=w,l+1<d-2){w=r.F._hash(e,l+1);var E=l+1&32767;m[E]=f[w],f[w]=E}if(p<=l){(_>14e3||g>26697)&&d-l>100&&(p<l&&(h[_]=l-p,_+=2,p=l),u=r.F._writeBlock(l==d-1||p==d?1:0,h,_,y,e,v,l-v,t,u),_=g=y=0,v=l);var $=0;l<d-2&&($=r.F._bestMatch(e,l,m,b,Math.min(o[2],d-l),o[3]));var P=$>>>16,T=65535&$;if(0!=$){T=65535&$;var A=a(P=$>>>16,s.of0);s.lhst[257+A]++;var S=a(T,s.df0);s.dhst[S]++,y+=s.exb[A]+s.dxb[S],h[_]=P<<23|l-p,h[_+1]=T<<16|A<<8|S,_+=2,p=l+P}else s.lhst[e[l]]++;g++}}for(v==l&&0!=e.length||(p<l&&(h[_]=l-p,_+=2,p=l),u=r.F._writeBlock(1,h,_,y,e,v,l-v,t,u),_=0,g=0,_=g=y=0,v=l);0!=(7&u);)u++;return u>>>3},r.F._bestMatch=function(e,t,n,i,o,s){var a=32767&t,c=n[a],l=a-c+32768&32767;if(c==a||i!=r.F._hash(e,t-l))return 0;for(var u=0,p=0,d=Math.min(32767,t);l<=d&&0!=--s&&c!=a;){if(0==u||e[t+u]==e[t+u-l]){var h=r.F._howLong(e,t,l);if(h>u){if(p=l,(u=h)>=o)break;l+2<h&&(h=l+2);for(var f=0,m=0;m<h-2;m++){var _=t-l+m+32768&32767,g=_-n[_]+32768&32767;g>f&&(f=g,c=_)}}}l+=(a=c)-(c=n[a])+32768&32767}return u<<16|p},r.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},r.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(e,t,n,i,o,s,a,c,l){var u,p,d,h,f,m,_,g,v,y=r.F.U,b=r.F._putsF,w=r.F._putsE;y.lhst[256]++,p=(u=r.F.getTrees())[0],d=u[1],h=u[2],f=u[3],m=u[4],_=u[5],g=u[6],v=u[7];var E=32+(0==(l+3&7)?0:8-(l+3&7))+(a<<3),$=i+r.F.contSize(y.fltree,y.lhst)+r.F.contSize(y.fdtree,y.dhst),P=i+r.F.contSize(y.ltree,y.lhst)+r.F.contSize(y.dtree,y.dhst);P+=14+3*_+r.F.contSize(y.itree,y.ihst)+(2*y.ihst[16]+3*y.ihst[17]+7*y.ihst[18]);for(var T=0;T<286;T++)y.lhst[T]=0;for(T=0;T<30;T++)y.dhst[T]=0;for(T=0;T<19;T++)y.ihst[T]=0;var A=E<$&&E<P?0:$<P?1:2;if(b(c,l,e),b(c,l+1,A),l+=3,0==A){for(;0!=(7&l);)l++;l=r.F._copyExact(o,s,a,c,l)}else{var S,U;if(1==A&&(S=y.fltree,U=y.fdtree),2==A){r.F.makeCodes(y.ltree,p),r.F.revCodes(y.ltree,p),r.F.makeCodes(y.dtree,d),r.F.revCodes(y.dtree,d),r.F.makeCodes(y.itree,h),r.F.revCodes(y.itree,h),S=y.ltree,U=y.dtree,w(c,l,f-257),w(c,l+=5,m-1),w(c,l+=5,_-4),l+=4;for(var N=0;N<_;N++)w(c,l+3*N,y.itree[1+(y.ordr[N]<<1)]);l+=3*_,l=r.F._codeTiny(g,y.itree,c,l),l=r.F._codeTiny(v,y.itree,c,l)}for(var C=s,x=0;x<n;x+=2){for(var I=t[x],k=I>>>23,O=C+(8388607&I);C<O;)l=r.F._writeLit(o[C++],S,c,l);if(0!=k){var R=t[x+1],F=R>>16,L=R>>8&255,G=255&R;w(c,l=r.F._writeLit(257+L,S,c,l),k-y.of0[L]),l+=y.exb[L],b(c,l=r.F._writeLit(G,U,c,l),F-y.df0[G]),l+=y.dxb[G],C+=k}}l=r.F._writeLit(256,S,c,l)}return l},r.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},r.F.getTrees=function(){for(var e=r.F.U,t=r.F._hufTree(e.lhst,e.ltree,15),n=r.F._hufTree(e.dhst,e.dtree,15),i=[],o=r.F._lenCodes(e.ltree,i),s=[],a=r.F._lenCodes(e.dtree,s),c=0;c<i.length;c+=2)e.ihst[i[c]]++;for(c=0;c<s.length;c+=2)e.ihst[s[c]]++;for(var l=r.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,n,l,o,a,u,i,s]},r.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},r.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},r.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},r.F._codeTiny=function(e,t,n,i){for(var o=0;o<e.length;o+=2){var s=e[o],a=e[o+1];i=r.F._writeLit(s,t,n,i);var c=16==s?2:17==s?3:7;s>15&&(r.F._putsE(n,i,a,c),i+=c)}return i},r.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,s=r+5<n?e[r+5]:-1,a=0==r?-1:e[r-1];if(0==i&&o==i&&s==i){for(var c=r+5;c+2<n&&e[c+2]==i;)c+=2;(l=Math.min(c+1-r>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),r+=2*l-2}else if(i==a&&o==i&&s==i){for(c=r+5;c+2<n&&e[c+2]==i;)c+=2;var l=Math.min(c+1-r>>>1,6);t.push(16,l-3),r+=2*l-2}else t.push(i,0)}return n>>>1},r.F._hufTree=function(e,t,n){var i=[],o=e.length,s=t.length,a=0;for(a=0;a<s;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<o;a++)0!=e[a]&&i.push({lit:a,f:e[a]});var c=i.length,l=i.slice(0);if(0==c)return 0;if(1==c){var u=i[0].lit;return l=0==u?1:0,t[1+(u<<1)]=1,t[1+(l<<1)]=1,1}i.sort((function(e,t){return e.f-t.f}));var p=i[0],d=i[1],h=0,f=1,m=2;for(i[0]={lit:-1,f:p.f+d.f,l:p,r:d,d:0};f!=c-1;)p=h!=f&&(m==c||i[h].f<i[m].f)?i[h++]:i[m++],d=h!=f&&(m==c||i[h].f<i[m].f)?i[h++]:i[m++],i[f++]={lit:-1,f:p.f+d.f,l:p,r:d};var _=r.F.setDepth(i[f-1],0);for(_>n&&(r.F.restrictDepth(l,n,_),_=n),a=0;a<c;a++)t[1+(l[a].lit<<1)]=l[a].d;return _},r.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(r.F.setDepth(e.l,t+1),r.F.setDepth(e.r,t+1))},r.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var s=e[r].d;e[r].d=t,o+=i-(1<<n-s)}for(o>>>=n-t;o>0;)(s=e[r].d)<t?(e[r].d++,o-=1<<t-s-1):r++;for(;r>=0;r--)e[r].d==t&&o<0&&(e[r].d--,o++);0!=o&&console.log("debt left")},r.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},r.F._writeLit=function(e,t,n,i){return r.F._putsF(n,i,t[e<<1]),i+t[1+(e<<1)]},r.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var i=r.F,o=i._bitsF,s=i._bitsE,a=i._decodeTiny,c=i.makeCodes,l=i.codes2map,u=i._get17,p=i.U,d=null==t;d&&(t=new n(e.length>>>2<<3));for(var h,f,m=0,_=0,g=0,v=0,y=0,b=0,w=0,E=0,$=0;0==m;)if(m=o(e,$,1),_=o(e,$+1,2),$+=3,0!=_){if(d&&(t=r.F._check(t,E+(1<<17))),1==_&&(h=p.flmap,f=p.fdmap,b=511,w=31),2==_){g=s(e,$,5)+257,v=s(e,$+5,5)+1,y=s(e,$+10,4)+4,$+=14;for(var P=0;P<38;P+=2)p.itree[P]=0,p.itree[P+1]=0;var T=1;for(P=0;P<y;P++){var A=s(e,$+3*P,3);p.itree[1+(p.ordr[P]<<1)]=A,A>T&&(T=A)}$+=3*y,c(p.itree,T),l(p.itree,T,p.imap),h=p.lmap,f=p.dmap,$=a(p.imap,(1<<T)-1,g+v,e,$,p.ttree);var S=i._copyOut(p.ttree,0,g,p.ltree);b=(1<<S)-1;var U=i._copyOut(p.ttree,g,v,p.dtree);w=(1<<U)-1,c(p.ltree,S),l(p.ltree,S,h),c(p.dtree,U),l(p.dtree,U,f)}for(;;){var N=h[u(e,$)&b];$+=15&N;var C=N>>>4;if(C>>>8==0)t[E++]=C;else{if(256==C)break;var x=E+C-254;if(C>264){var I=p.ldef[C-257];x=E+(I>>>3)+s(e,$,7&I),$+=7&I}var k=f[u(e,$)&w];$+=15&k;var O=k>>>4,R=p.ddef[O],F=(R>>>4)+o(e,$,15&R);for($+=15&R,d&&(t=r.F._check(t,E+(1<<17)));E<x;)t[E]=t[E++-F],t[E]=t[E++-F],t[E]=t[E++-F],t[E]=t[E++-F];E=x}}}else{0!=(7&$)&&($+=8-(7&$));var L=4+($>>>3),G=e[L-4]|e[L-3]<<8;d&&(t=r.F._check(t,E+G)),t.set(new n(e.buffer,e.byteOffset+L,G),E),$=L+G<<3,E+=G}return t.length==E?t:t.slice(0,E)},r.F._check=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(Math.max(n<<1,t));return r.set(e,0),r},r.F._decodeTiny=function(e,t,n,i,o,s){for(var a=r.F._bitsE,c=r.F._get17,l=0;l<n;){var u=e[c(i,o)&t];o+=15&u;var p=u>>>4;if(p<=15)s[l]=p,l++;else{var d=0,h=0;16==p?(h=3+a(i,o,2),o+=2,d=s[l-1]):17==p?(h=3+a(i,o,3),o+=3):18==p&&(h=11+a(i,o,7),o+=7);for(var f=l+h;l<f;)s[l]=d,l++}}return o},r.F._copyOut=function(e,t,n,r){for(var i=0,o=0,s=r.length>>>1;o<n;){var a=e[o+t];r[o<<1]=0,r[1+(o<<1)]=a,a>i&&(i=a),o++}for(;o<s;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},r.F.makeCodes=function(e,t){for(var n,i,o,s,a=r.F.U,c=e.length,l=a.bl_count,u=0;u<=t;u++)l[u]=0;for(u=1;u<c;u+=2)l[e[u]]++;var p=a.next_code;for(n=0,l[0]=0,i=1;i<=t;i++)n=n+l[i-1]<<1,p[i]=n;for(o=0;o<c;o+=2)0!=(s=e[o+1])&&(e[o]=p[s],p[s]++)},r.F.codes2map=function(e,t,n){for(var i=e.length,o=r.F.U.rev15,s=0;s<i;s+=2)if(0!=e[s+1])for(var a=s>>1,c=e[s+1],l=a<<4|c,u=t-c,p=e[s]<<u,d=p+(1<<u);p!=d;)n[o[p]>>>15-t]=l,p++},r.F.revCodes=function(e,t){for(var n=r.F.U.rev15,i=15-t,o=0;o<e.length;o+=2){var s=e[o]<<t-e[o+1];e[o]=n[s]>>>i}},r.F._putsE=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},r.F._putsF=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},r.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},r.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},r.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},r.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},r.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var e=r.F.U,t=0;t<32768;t++){var n=t;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.rev15[t]=(n>>>16|n<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),r.F.makeCodes(e.fltree,9),r.F.codes2map(e.fltree,9,e.flmap),r.F.revCodes(e.fltree,9),i(e.fdtree,32,5),r.F.makeCodes(e.fdtree,5),r.F.codes2map(e.fdtree,5,e.fdmap),r.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()})),UZIP=Object.freeze(Object.assign(Object.create(null),UZIP_1,{default:UZIP_1})),UPNG={},N,W,H;UPNG.toRGBA8=function(e){var t=e.width,n=e.height;if(null==e.tabs.acTL)return[UPNG.toRGBA8.decodeImage(e.data,t,n,e).buffer];var r=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var i=t*n*4,o=new Uint8Array(i),s=new Uint8Array(i),a=new Uint8Array(i),c=0;c<e.frames.length;c++){var l=e.frames[c],u=l.rect.x,p=l.rect.y,d=l.rect.width,h=l.rect.height,f=UPNG.toRGBA8.decodeImage(l.data,d,h,e);if(0!=c)for(var m=0;m<i;m++)a[m]=o[m];if(0==l.blend?UPNG._copyTile(f,d,h,o,t,n,u,p,0):1==l.blend&&UPNG._copyTile(f,d,h,o,t,n,u,p,1),r.push(o.buffer.slice(0)),0==l.dispose);else if(1==l.dispose)UPNG._copyTile(s,d,h,o,t,n,u,p,0);else if(2==l.dispose)for(m=0;m<i;m++)o[m]=a[m]}return r},UPNG.toRGBA8.decodeImage=function(e,t,n,r){var i=t*n,o=UPNG.decode._getBPP(r),s=Math.ceil(t*o/8),a=new Uint8Array(4*i),c=new Uint32Array(a.buffer),l=r.ctype,u=r.depth,p=UPNG._bin.readUshort;if(6==l){var d=i<<2;if(8==u)for(var h=0;h<d;h+=4)a[h]=e[h],a[h+1]=e[h+1],a[h+2]=e[h+2],a[h+3]=e[h+3];if(16==u)for(h=0;h<d;h++)a[h]=e[h<<1]}else if(2==l){var f=r.tabs.tRNS;if(null==f){if(8==u)for(h=0;h<i;h++){var m=3*h;c[h]=255<<24|e[m+2]<<16|e[m+1]<<8|e[m]}if(16==u)for(h=0;h<i;h++)m=6*h,c[h]=255<<24|e[m+4]<<16|e[m+2]<<8|e[m]}else{var _=f[0],g=f[1],v=f[2];if(8==u)for(h=0;h<i;h++){var y=h<<2;m=3*h,c[h]=255<<24|e[m+2]<<16|e[m+1]<<8|e[m],e[m]==_&&e[m+1]==g&&e[m+2]==v&&(a[y+3]=0)}if(16==u)for(h=0;h<i;h++)y=h<<2,m=6*h,c[h]=255<<24|e[m+4]<<16|e[m+2]<<8|e[m],p(e,m)==_&&p(e,m+2)==g&&p(e,m+4)==v&&(a[y+3]=0)}}else if(3==l){var b=r.tabs.PLTE,w=r.tabs.tRNS,E=w?w.length:0;if(1==u)for(var $=0;$<n;$++){var P=$*s,T=$*t;for(h=0;h<t;h++){y=T+h<<2;var A=3*(S=e[P+(h>>3)]>>7-((7&h)<<0)&1);a[y]=b[A],a[y+1]=b[A+1],a[y+2]=b[A+2],a[y+3]=S<E?w[S]:255}}if(2==u)for($=0;$<n;$++)for(P=$*s,T=$*t,h=0;h<t;h++)y=T+h<<2,A=3*(S=e[P+(h>>2)]>>6-((3&h)<<1)&3),a[y]=b[A],a[y+1]=b[A+1],a[y+2]=b[A+2],a[y+3]=S<E?w[S]:255;if(4==u)for($=0;$<n;$++)for(P=$*s,T=$*t,h=0;h<t;h++)y=T+h<<2,A=3*(S=e[P+(h>>1)]>>4-((1&h)<<2)&15),a[y]=b[A],a[y+1]=b[A+1],a[y+2]=b[A+2],a[y+3]=S<E?w[S]:255;if(8==u)for(h=0;h<i;h++){var S;y=h<<2,A=3*(S=e[h]),a[y]=b[A],a[y+1]=b[A+1],a[y+2]=b[A+2],a[y+3]=S<E?w[S]:255}}else if(4==l){if(8==u)for(h=0;h<i;h++){y=h<<2;var U=e[N=h<<1];a[y]=U,a[y+1]=U,a[y+2]=U,a[y+3]=e[N+1]}if(16==u)for(h=0;h<i;h++){var N;y=h<<2,U=e[N=h<<2],a[y]=U,a[y+1]=U,a[y+2]=U,a[y+3]=e[N+2]}}else if(0==l)for(_=r.tabs.tRNS?r.tabs.tRNS:-1,$=0;$<n;$++){var C=$*s,x=$*t;if(1==u)for(var I=0;I<t;I++){var k=(U=255*(e[C+(I>>>3)]>>>7-(7&I)&1))==255*_?0:255;c[x+I]=k<<24|U<<16|U<<8|U}else if(2==u)for(I=0;I<t;I++)k=(U=85*(e[C+(I>>>2)]>>>6-((3&I)<<1)&3))==85*_?0:255,c[x+I]=k<<24|U<<16|U<<8|U;else if(4==u)for(I=0;I<t;I++)k=(U=17*(e[C+(I>>>1)]>>>4-((1&I)<<2)&15))==17*_?0:255,c[x+I]=k<<24|U<<16|U<<8|U;else if(8==u)for(I=0;I<t;I++)k=(U=e[C+I])==_?0:255,c[x+I]=k<<24|U<<16|U<<8|U;else if(16==u)for(I=0;I<t;I++)U=e[C+(I<<1)],k=p(e,C+(I<<h))==_?0:255,c[x+I]=k<<24|U<<16|U<<8|U}return a},UPNG.decode=function(e){for(var t,n=new Uint8Array(e),r=8,i=UPNG._bin,o=i.readUshort,s=i.readUint,a={tabs:{},frames:[]},c=new Uint8Array(n.length),l=0,u=0,p=[137,80,78,71,13,10,26,10],d=0;d<8;d++)if(n[d]!=p[d])throw"The input is not a PNG file!";for(;r<n.length;){var h=i.readUint(n,r);r+=4;var f=i.readASCII(n,r,4);if(r+=4,"IHDR"==f)UPNG.decode._IHDR(n,r,a);else if("CgBI"==f)a.tabs[f]=n.slice(r,r+4);else if("IDAT"==f){for(d=0;d<h;d++)c[l+d]=n[r+d];l+=h}else if("acTL"==f)a.tabs[f]={num_frames:s(n,r),num_plays:s(n,r+4)},t=new Uint8Array(n.length);else if("fcTL"==f){var m;0!=u&&((m=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,t.slice(0,u),m.rect.width,m.rect.height),u=0);var _={x:s(n,r+12),y:s(n,r+16),width:s(n,r+4),height:s(n,r+8)},g=o(n,r+22);g=o(n,r+20)/(0==g?100:g);var v={rect:_,delay:Math.round(1e3*g),dispose:n[r+24],blend:n[r+25]};a.frames.push(v)}else if("fdAT"==f){for(d=0;d<h-4;d++)t[u+d]=n[r+d+4];u+=h-4}else if("pHYs"==f)a.tabs[f]=[i.readUint(n,r),i.readUint(n,r+4),n[r+8]];else if("cHRM"==f)for(a.tabs[f]=[],d=0;d<8;d++)a.tabs[f].push(i.readUint(n,r+4*d));else if("tEXt"==f||"zTXt"==f){null==a.tabs[f]&&(a.tabs[f]={});var y=i.nextZero(n,r),b=i.readASCII(n,r,y-r),w=r+h-y-1;if("tEXt"==f)P=i.readASCII(n,y+1,w);else{var E=UPNG.decode._inflate(n.slice(y+2,y+2+w));P=i.readUTF8(E,0,E.length)}a.tabs[f][b]=P}else if("iTXt"==f){null==a.tabs[f]&&(a.tabs[f]={}),y=0;var $=r;y=i.nextZero(n,$),b=i.readASCII(n,$,y-$);var P,T=n[$=y+1];$+=2,y=i.nextZero(n,$),i.readASCII(n,$,y-$),$=y+1,y=i.nextZero(n,$),i.readUTF8(n,$,y-$),w=h-(($=y+1)-r),0==T?P=i.readUTF8(n,$,w):(E=UPNG.decode._inflate(n.slice($,$+w)),P=i.readUTF8(E,0,E.length)),a.tabs[f][b]=P}else if("PLTE"==f)a.tabs[f]=i.readBytes(n,r,h);else if("hIST"==f){var A=a.tabs.PLTE.length/3;for(a.tabs[f]=[],d=0;d<A;d++)a.tabs[f].push(o(n,r+2*d))}else if("tRNS"==f)3==a.ctype?a.tabs[f]=i.readBytes(n,r,h):0==a.ctype?a.tabs[f]=o(n,r):2==a.ctype&&(a.tabs[f]=[o(n,r),o(n,r+2),o(n,r+4)]);else if("gAMA"==f)a.tabs[f]=i.readUint(n,r)/1e5;else if("sRGB"==f)a.tabs[f]=n[r];else if("bKGD"==f)0==a.ctype||4==a.ctype?a.tabs[f]=[o(n,r)]:2==a.ctype||6==a.ctype?a.tabs[f]=[o(n,r),o(n,r+2),o(n,r+4)]:3==a.ctype&&(a.tabs[f]=n[r]);else if("IEND"==f)break;r+=h,i.readUint(n,r),r+=4}return 0!=u&&((m=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,t.slice(0,u),m.rect.width,m.rect.height),u=0),a.data=UPNG.decode._decompress(a,c,a.width,a.height),delete a.compress,delete a.interlace,delete a.filter,a},UPNG.decode._decompress=function(e,t,n,r){var i=UPNG.decode._getBPP(e),o=Math.ceil(n*i/8),s=new Uint8Array((o+1+e.interlace)*r);return t=e.tabs.CgBI?UPNG.inflateRaw(t,s):UPNG.decode._inflate(t,s),0==e.interlace?t=UPNG.decode._filterZero(t,e,0,n,r):1==e.interlace&&(t=UPNG.decode._readInterlace(t,e)),t},UPNG.decode._inflate=function(e,t){return UPNG.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(e,t){var n,r,i=Uint8Array,o=0,s=0,a=0,c=0,l=0,u=0,p=0,d=0,h=0;if(3==e[0]&&0==e[1])return t||new i(0);var f=H.H,m=f.b,_=f.e,g=f.R,v=f.n,y=f.A,b=f.Z,w=f.m,E=null==t;for(E&&(t=new i(e.length>>>2<<5));0==o;)if(o=m(e,h,1),s=m(e,h+1,2),h+=3,0!=s){if(E&&(t=H.H.W(t,d+(1<<17))),1==s&&(n=w.J,r=w.h,u=511,p=31),2==s){a=_(e,h,5)+257,c=_(e,h+5,5)+1,l=_(e,h+10,4)+4,h+=14;for(var $=1,P=0;P<38;P+=2)w.Q[P]=0,w.Q[P+1]=0;for(P=0;P<l;P++){var T=_(e,h+3*P,3);w.Q[1+(w.X[P]<<1)]=T,T>$&&($=T)}h+=3*l,v(w.Q,$),y(w.Q,$,w.u),n=w.w,r=w.d,h=g(w.u,(1<<$)-1,a+c,e,h,w.v);var A=f.V(w.v,0,a,w.C);u=(1<<A)-1;var S=f.V(w.v,a,c,w.D);p=(1<<S)-1,v(w.C,A),y(w.C,A,n),v(w.D,S),y(w.D,S,r)}for(;;){var U=n[b(e,h)&u];h+=15&U;var N=U>>>4;if(N>>>8==0)t[d++]=N;else{if(256==N)break;var C=d+N-254;if(N>264){var x=w.q[N-257];C=d+(x>>>3)+_(e,h,7&x),h+=7&x}var I=r[b(e,h)&p];h+=15&I;var k=I>>>4,O=w.c[k],R=(O>>>4)+m(e,h,15&O);for(h+=15&O;d<C;)t[d]=t[d++-R],t[d]=t[d++-R],t[d]=t[d++-R],t[d]=t[d++-R];d=C}}}else{0!=(7&h)&&(h+=8-(7&h));var F=4+(h>>>3),L=e[F-4]|e[F-3]<<8;E&&(t=H.H.W(t,d+L)),t.set(new i(e.buffer,e.byteOffset+F,L),d),h=F+L<<3,d+=L}return t.length==d?t:t.slice(0,d)},H.H.W=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(n<<1);return r.set(e,0),r},H.H.R=function(e,t,n,r,i,o){for(var s=H.H.e,a=H.H.Z,c=0;c<n;){var l=e[a(r,i)&t];i+=15&l;var u=l>>>4;if(u<=15)o[c]=u,c++;else{var p=0,d=0;16==u?(d=3+s(r,i,2),i+=2,p=o[c-1]):17==u?(d=3+s(r,i,3),i+=3):18==u&&(d=11+s(r,i,7),i+=7);for(var h=c+d;c<h;)o[c]=p,c++}}return i},H.H.V=function(e,t,n,r){for(var i=0,o=0,s=r.length>>>1;o<n;){var a=e[o+t];r[o<<1]=0,r[1+(o<<1)]=a,a>i&&(i=a),o++}for(;o<s;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},H.H.n=function(e,t){for(var n,r,i,o,s=H.H.m,a=e.length,c=s.j,l=0;l<=t;l++)c[l]=0;for(l=1;l<a;l+=2)c[e[l]]++;var u=s.K;for(n=0,c[0]=0,r=1;r<=t;r++)n=n+c[r-1]<<1,u[r]=n;for(i=0;i<a;i+=2)0!=(o=e[i+1])&&(e[i]=u[o],u[o]++)},H.H.A=function(e,t,n){for(var r=e.length,i=H.H.m.r,o=0;o<r;o+=2)if(0!=e[o+1])for(var s=o>>1,a=e[o+1],c=s<<4|a,l=t-a,u=e[o]<<l,p=u+(1<<l);u!=p;)n[i[u]>>>15-t]=c,u++},H.H.l=function(e,t){for(var n=H.H.m.r,r=15-t,i=0;i<e.length;i+=2){var o=e[i]<<t-e[i+1];e[i]=n[o]>>>r}},H.H.M=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},H.H.I=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},H.H.e=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},H.H.b=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},H.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},H.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var e=H.H.m,t=0;t<32768;t++){var n=t;n=(4278255360&(n=(4042322160&(n=(3435973836&(n=(2863311530&n)>>>1|(1431655765&n)<<1))>>>2|(858993459&n)<<2))>>>4|(252645135&n)<<4))>>>8|(16711935&n)<<8,e.r[t]=(n>>>16|n<<16)>>>17}function r(e,t,n){for(;0!=t--;)e.push(0,n)}for(t=0;t<32;t++)e.q[t]=e.S[t]<<3|e.T[t],e.c[t]=e.p[t]<<4|e.z[t];r(e._,144,8),r(e._,112,9),r(e._,24,7),r(e._,8,8),H.H.n(e._,9),H.H.A(e._,9,e.J),H.H.l(e._,9),r(e.$,32,5),H.H.n(e.$,5),H.H.A(e.$,5,e.h),H.H.l(e.$,5),r(e.Q,19,0),r(e.C,286,0),r(e.D,30,0),r(e.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(e,t){for(var n=t.width,r=t.height,i=UPNG.decode._getBPP(t),o=i>>3,s=Math.ceil(n*i/8),a=new Uint8Array(r*s),c=0,l=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],h=0;h<7;){for(var f=p[h],m=d[h],_=0,g=0,v=l[h];v<r;)v+=f,g++;for(var y=u[h];y<n;)y+=m,_++;var b=Math.ceil(_*i/8);UPNG.decode._filterZero(e,t,c,_,g);for(var w=0,E=l[h];E<r;){for(var $=u[h],P=c+w*b<<3;$<n;){var T;if(1==i&&(T=(T=e[P>>3])>>7-(7&P)&1,a[E*s+($>>3)]|=T<<7-((7&$)<<0)),2==i&&(T=(T=e[P>>3])>>6-(7&P)&3,a[E*s+($>>2)]|=T<<6-((3&$)<<1)),4==i&&(T=(T=e[P>>3])>>4-(7&P)&15,a[E*s+($>>1)]|=T<<4-((1&$)<<2)),i>=8)for(var A=E*s+$*o,S=0;S<o;S++)a[A+S]=e[(P>>3)+S];P+=i,$+=m}w++,E+=f}_*g!=0&&(c+=g*(1+b)),h+=1}return a},UPNG.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},UPNG.decode._filterZero=function(e,t,n,r,i){var o=UPNG.decode._getBPP(t),s=Math.ceil(r*o/8),a=UPNG.decode._paeth;o=Math.ceil(o/8);var c=0,l=1,u=e[n],p=0;if(u>1&&(e[n]=[0,0,1][u-2]),3==u)for(p=o;p<s;p++)e[p+1]=e[p+1]+(e[p+1-o]>>>1)&255;for(var d=0;d<i;d++)if(p=0,0==(u=e[(l=(c=n+d*s)+d+1)-1]))for(;p<s;p++)e[c+p]=e[l+p];else if(1==u){for(;p<o;p++)e[c+p]=e[l+p];for(;p<s;p++)e[c+p]=e[l+p]+e[c+p-o]}else if(2==u)for(;p<s;p++)e[c+p]=e[l+p]+e[c+p-s];else if(3==u){for(;p<o;p++)e[c+p]=e[l+p]+(e[c+p-s]>>>1);for(;p<s;p++)e[c+p]=e[l+p]+(e[c+p-s]+e[c+p-o]>>>1)}else{for(;p<o;p++)e[c+p]=e[l+p]+a(0,e[c+p-s],0);for(;p<s;p++)e[c+p]=e[l+p]+a(e[c+p-o],e[c+p-s],e[c+p-o-s])}return e},UPNG.decode._paeth=function(e,t,n){var r=e+t-n,i=r-e,o=r-t,s=r-n;return i*i<=o*o&&i*i<=s*s?e:o*o<=s*s?t:n},UPNG.decode._IHDR=function(e,t,n){var r=UPNG._bin;n.width=r.readUint(e,t),t+=4,n.height=r.readUint(e,t),t+=4,n.depth=e[t],t++,n.ctype=e[t],t++,n.compress=e[t],t++,n.filter=e[t],t++,n.interlace=e[t],t++},UPNG._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+UPNG._bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return UPNG._bin.readASCII(e,t,n)}return r}},UPNG._copyTile=function(e,t,n,r,i,o,s,a,c){for(var l=Math.min(t,i),u=Math.min(n,o),p=0,d=0,h=0;h<u;h++)for(var f=0;f<l;f++)if(s>=0&&a>=0?(p=h*t+f<<2,d=(a+h)*i+s+f<<2):(p=(-a+h)*t-s+f<<2,d=h*i+f<<2),0==c)r[d]=e[p],r[d+1]=e[p+1],r[d+2]=e[p+2],r[d+3]=e[p+3];else if(1==c){var m=e[p+3]*(1/255),_=e[p]*m,g=e[p+1]*m,v=e[p+2]*m,y=r[d+3]*(1/255),b=r[d]*y,w=r[d+1]*y,E=r[d+2]*y,$=1-m,P=m+y*$,T=0==P?0:1/P;r[d+3]=255*P,r[d+0]=(_+b*$)*T,r[d+1]=(g+w*$)*T,r[d+2]=(v+E*$)*T}else if(2==c)m=e[p+3],_=e[p],g=e[p+1],v=e[p+2],y=r[d+3],b=r[d],w=r[d+1],E=r[d+2],m==y&&_==b&&g==w&&v==E?(r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=0):(r[d]=_,r[d+1]=g,r[d+2]=v,r[d+3]=m);else if(3==c){if(m=e[p+3],_=e[p],g=e[p+1],v=e[p+2],y=r[d+3],b=r[d],w=r[d+1],E=r[d+2],m==y&&_==b&&g==w&&v==E)continue;if(m<220&&y>20)return!1}return!0},UPNG.encode=function(e,t,n,r,i,o,s){null==r&&(r=0),null==s&&(s=!1);var a=UPNG.encode.compress(e,t,n,r,[!1,!1,!1,0,s]);return UPNG.encode.compressPNG(a,-1),UPNG.encode._main(a,t,n,i,o)},UPNG.encodeLL=function(e,t,n,r,i,o,s,a){for(var c={ctype:0+(1==r?0:2)+(0==i?0:4),depth:o,frames:[]},l=(r+i)*o,u=l*t,p=0;p<e.length;p++)c.frames.push({rect:{x:0,y:0,width:t,height:n},img:new Uint8Array(e[p]),blend:0,dispose:1,bpp:Math.ceil(l/8),bpl:Math.ceil(u/8)});return UPNG.encode.compressPNG(c,0,!0),UPNG.encode._main(c,t,n,s,a)},UPNG.encode._main=function(e,t,n,r,i){null==i&&(i={});var o=UPNG.crc.crc,s=UPNG._bin.writeUint,a=UPNG._bin.writeUshort,c=UPNG._bin.writeASCII,l=8,u=e.frames.length>1,p=!1,d=33+(u?20:0);if(null!=i.sRGB&&(d+=13),null!=i.pHYs&&(d+=21),3==e.ctype){for(var h=e.plte.length,f=0;f<h;f++)e.plte[f]>>>24!=255&&(p=!0);d+=8+3*h+4+(p?8+1*h+4:0)}for(var m=0;m<e.frames.length;m++)u&&(d+=38),d+=(P=e.frames[m]).cimg.length+12,0!=m&&(d+=4);d+=12;var _=new Uint8Array(d),g=[137,80,78,71,13,10,26,10];for(f=0;f<8;f++)_[f]=g[f];if(s(_,l,13),c(_,l+=4,"IHDR"),s(_,l+=4,t),s(_,l+=4,n),_[l+=4]=e.depth,_[++l]=e.ctype,_[++l]=0,_[++l]=0,_[++l]=0,s(_,++l,o(_,l-17,17)),l+=4,null!=i.sRGB&&(s(_,l,1),c(_,l+=4,"sRGB"),_[l+=4]=i.sRGB,s(_,++l,o(_,l-5,5)),l+=4),null!=i.pHYs&&(s(_,l,9),c(_,l+=4,"pHYs"),s(_,l+=4,i.pHYs[0]),s(_,l+=4,i.pHYs[1]),_[l+=4]=i.pHYs[2],s(_,++l,o(_,l-13,13)),l+=4),u&&(s(_,l,8),c(_,l+=4,"acTL"),s(_,l+=4,e.frames.length),s(_,l+=4,null!=i.loop?i.loop:0),s(_,l+=4,o(_,l-12,12)),l+=4),3==e.ctype){for(s(_,l,3*(h=e.plte.length)),c(_,l+=4,"PLTE"),l+=4,f=0;f<h;f++){var v=3*f,y=e.plte[f],b=255&y,w=y>>>8&255,E=y>>>16&255;_[l+v+0]=b,_[l+v+1]=w,_[l+v+2]=E}if(s(_,l+=3*h,o(_,l-3*h-4,3*h+4)),l+=4,p){for(s(_,l,h),c(_,l+=4,"tRNS"),l+=4,f=0;f<h;f++)_[l+f]=e.plte[f]>>>24&255;s(_,l+=h,o(_,l-h-4,h+4)),l+=4}}var $=0;for(m=0;m<e.frames.length;m++){var P=e.frames[m];u&&(s(_,l,26),c(_,l+=4,"fcTL"),s(_,l+=4,$++),s(_,l+=4,P.rect.width),s(_,l+=4,P.rect.height),s(_,l+=4,P.rect.x),s(_,l+=4,P.rect.y),a(_,l+=4,r[m]),a(_,l+=2,1e3),_[l+=2]=P.dispose,_[++l]=P.blend,s(_,++l,o(_,l-30,30)),l+=4);var T=P.cimg;s(_,l,(h=T.length)+(0==m?0:4));var A=l+=4;c(_,l,0==m?"IDAT":"fdAT"),l+=4,0!=m&&(s(_,l,$++),l+=4),_.set(T,l),s(_,l+=h,o(_,A,l-A)),l+=4}return s(_,l,0),c(_,l+=4,"IEND"),s(_,l+=4,o(_,l-4,4)),l+=4,_.buffer},UPNG.encode.compressPNG=function(e,t,n){for(var r=0;r<e.frames.length;r++){var i=e.frames[r],o=(i.rect.width,i.rect.height),s=new Uint8Array(o*i.bpl+o);i.cimg=UPNG.encode._filterZero(i.img,o,i.bpp,i.bpl,s,t,n)}},UPNG.encode.compress=function(e,t,n,r,i){for(var o=i[0],s=i[1],a=i[2],c=i[3],l=i[4],u=6,p=8,d=255,h=0;h<e.length;h++)for(var f=new Uint8Array(e[h]),m=f.length,_=0;_<m;_+=4)d&=f[_+3];var g=255!=d,v=UPNG.encode.framize(e,t,n,o,s,a),y={},b=[],w=[];if(0!=r){var E=[];for(_=0;_<v.length;_++)E.push(v[_].img.buffer);var $=UPNG.encode.concatRGBA(E),P=UPNG.quantize($,r),T=0,A=new Uint8Array(P.abuf);for(_=0;_<v.length;_++){var S=(z=v[_].img).length;for(w.push(new Uint8Array(P.inds.buffer,T>>2,S>>2)),h=0;h<S;h+=4)z[h]=A[T+h],z[h+1]=A[T+h+1],z[h+2]=A[T+h+2],z[h+3]=A[T+h+3];T+=S}for(_=0;_<P.plte.length;_++)b.push(P.plte[_].est.rgba)}else for(h=0;h<v.length;h++){var U=v[h],N=new Uint32Array(U.img.buffer),C=U.rect.width,x=(m=N.length,new Uint8Array(m));for(w.push(x),_=0;_<m;_++){var I=N[_];if(0!=_&&I==N[_-1])x[_]=x[_-1];else if(_>C&&I==N[_-C])x[_]=x[_-C];else{var k=y[I];if(null==k&&(y[I]=k=b.length,b.push(I),b.length>=300))break;x[_]=k}}}var O=b.length;for(O<=256&&0==l&&(p=O<=2?1:O<=4?2:O<=16?4:8,p=Math.max(p,c)),h=0;h<v.length;h++){(U=v[h]).rect.x,U.rect.y,C=U.rect.width;var R=U.rect.height,F=U.img,L=(new Uint32Array(F.buffer),4*C),G=4;if(O<=256&&0==l){L=Math.ceil(p*C/8);for(var M=new Uint8Array(L*R),D=w[h],j=0;j<R;j++){_=j*L;var B=j*C;if(8==p)for(var H=0;H<C;H++)M[_+H]=D[B+H];else if(4==p)for(H=0;H<C;H++)M[_+(H>>1)]|=D[B+H]<<4-4*(1&H);else if(2==p)for(H=0;H<C;H++)M[_+(H>>2)]|=D[B+H]<<6-2*(3&H);else if(1==p)for(H=0;H<C;H++)M[_+(H>>3)]|=D[B+H]<<7-1*(7&H)}F=M,u=3,G=1}else if(0==g&&1==v.length){M=new Uint8Array(C*R*3);var W=C*R;for(_=0;_<W;_++){var z,q=4*_;M[z=3*_]=F[q],M[z+1]=F[q+1],M[z+2]=F[q+2]}F=M,u=2,G=3,L=3*C}U.img=F,U.bpl=L,U.bpp=G}return{ctype:u,depth:p,plte:b,frames:v}},UPNG.encode.framize=function(e,t,n,r,i,o){for(var s=[],a=0;a<e.length;a++){var c,l=new Uint8Array(e[a]),u=new Uint32Array(l.buffer),p=0,d=0,h=t,f=n,m=r?1:0;if(0!=a){for(var _=o||r||1==a||0!=s[a-2].dispose?1:2,g=0,v=1e9,y=0;y<_;y++){for(var b=new Uint8Array(e[a-1-y]),w=new Uint32Array(e[a-1-y]),E=t,$=n,P=-1,T=-1,A=0;A<n;A++)for(var S=0;S<t;S++)u[O=A*t+S]!=w[O]&&(S<E&&(E=S),S>P&&(P=S),A<$&&($=A),A>T&&(T=A));-1==P&&(E=$=P=T=0),i&&(1==(1&E)&&E--,1==(1&$)&&$--);var U=(P-E+1)*(T-$+1);U<v&&(v=U,g=y,p=E,d=$,h=P-E+1,f=T-$+1)}b=new Uint8Array(e[a-1-g]),1==g&&(s[a-1].dispose=2),c=new Uint8Array(h*f*4),UPNG._copyTile(b,t,n,c,h,f,-p,-d,0),1==(m=UPNG._copyTile(l,t,n,c,h,f,-p,-d,3)?1:0)?UPNG.encode._prepareDiff(l,t,n,c,{x:p,y:d,width:h,height:f}):UPNG._copyTile(l,t,n,c,h,f,-p,-d,0)}else c=l.slice(0);s.push({rect:{x:p,y:d,width:h,height:f},img:c,blend:m,dispose:0})}if(r)for(a=0;a<s.length;a++)if(1!=(R=s[a]).blend){var N=R.rect,C=s[a-1].rect,x=Math.min(N.x,C.x),I=Math.min(N.y,C.y),k={x:x,y:I,width:Math.max(N.x+N.width,C.x+C.width)-x,height:Math.max(N.y+N.height,C.y+C.height)-I};s[a-1].dispose=1,a-1!=0&&UPNG.encode._updateFrame(e,t,n,s,a-1,k,i),UPNG.encode._updateFrame(e,t,n,s,a,k,i)}if(1!=e.length)for(var O=0;O<s.length;O++){var R;(R=s[O]).rect.width,R.rect.height}return s},UPNG.encode._updateFrame=function(e,t,n,r,i,o,s){for(var a=Uint8Array,c=Uint32Array,l=new a(e[i-1]),u=new c(e[i-1]),p=i+1<e.length?new a(e[i+1]):null,d=new a(e[i]),h=new c(d.buffer),f=t,m=n,_=-1,g=-1,v=0;v<o.height;v++)for(var y=0;y<o.width;y++){var b=o.x+y,w=o.y+v,E=w*t+b,$=h[E];0==$||0==r[i-1].dispose&&u[E]==$&&(null==p||0!=p[4*E+3])||(b<f&&(f=b),b>_&&(_=b),w<m&&(m=w),w>g&&(g=w))}-1==_&&(f=m=_=g=0),s&&(1==(1&f)&&f--,1==(1&m)&&m--),o={x:f,y:m,width:_-f+1,height:g-m+1};var P=r[i];P.rect=o,P.blend=1,P.img=new Uint8Array(o.width*o.height*4),0==r[i-1].dispose?(UPNG._copyTile(l,t,n,P.img,o.width,o.height,-o.x,-o.y,0),UPNG.encode._prepareDiff(d,t,n,P.img,o)):UPNG._copyTile(d,t,n,P.img,o.width,o.height,-o.x,-o.y,0)},UPNG.encode._prepareDiff=function(e,t,n,r,i){UPNG._copyTile(e,t,n,r,i.width,i.height,-i.x,-i.y,2)},UPNG.encode._filterZero=function(e,t,n,r,i,o,s){var a,c=[],l=[0,1,2,3,4];-1!=o?l=[o]:(t*r>5e5||1==n)&&(l=[0]),s&&(a={level:0});for(var u=UZIP,p=0;p<l.length;p++){for(var d=0;d<t;d++)UPNG.encode._filterLine(i,e,d,r,n,l[p]);c.push(u.deflate(i,a))}var h,f=1e9;for(p=0;p<c.length;p++)c[p].length<f&&(h=p,f=c[p].length);return c[h]},UPNG.encode._filterLine=function(e,t,n,r,i,o){var s=n*r,a=s+n,c=UPNG.decode._paeth;if(e[a]=o,a++,0==o)if(r<500)for(var l=0;l<r;l++)e[a+l]=t[s+l];else e.set(new Uint8Array(t.buffer,s,r),a);else if(1==o){for(l=0;l<i;l++)e[a+l]=t[s+l];for(l=i;l<r;l++)e[a+l]=t[s+l]-t[s+l-i]+256&255}else if(0==n){for(l=0;l<i;l++)e[a+l]=t[s+l];if(2==o)for(l=i;l<r;l++)e[a+l]=t[s+l];if(3==o)for(l=i;l<r;l++)e[a+l]=t[s+l]-(t[s+l-i]>>1)+256&255;if(4==o)for(l=i;l<r;l++)e[a+l]=t[s+l]-c(t[s+l-i],0,0)+256&255}else{if(2==o)for(l=0;l<r;l++)e[a+l]=t[s+l]+256-t[s+l-r]&255;if(3==o){for(l=0;l<i;l++)e[a+l]=t[s+l]+256-(t[s+l-r]>>1)&255;for(l=i;l<r;l++)e[a+l]=t[s+l]+256-(t[s+l-r]+t[s+l-i]>>1)&255}if(4==o){for(l=0;l<i;l++)e[a+l]=t[s+l]+256-c(0,t[s+l-r],0)&255;for(l=i;l<r;l++)e[a+l]=t[s+l]+256-c(t[s+l-i],t[s+l-r],t[s+l-i-r])&255}}},UPNG.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=UPNG.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^UPNG.crc.update(4294967295,e,t,n)}},UPNG.quantize=function(e,t){var n,r=new Uint8Array(e),i=r.slice(0),o=new Uint32Array(i.buffer),s=UPNG.quantize.getKDtree(i,t),a=s[0],c=s[1],l=UPNG.quantize.planeDst,u=r,p=o,d=u.length,h=new Uint8Array(r.length>>2);if(r.length<2e7)for(var f=0;f<d;f+=4){var m=u[f]*(1/255),_=u[f+1]*(1/255),g=u[f+2]*(1/255),v=u[f+3]*(1/255);n=UPNG.quantize.getNearest(a,m,_,g,v),h[f>>2]=n.ind,p[f>>2]=n.est.rgba}else for(f=0;f<d;f+=4){for(m=u[f]*(1/255),_=u[f+1]*(1/255),g=u[f+2]*(1/255),v=u[f+3]*(1/255),n=a;n.left;)n=l(n.est,m,_,g,v)<=0?n.left:n.right;h[f>>2]=n.ind,p[f>>2]=n.est.rgba}return{abuf:i.buffer,inds:h,plte:c}},UPNG.quantize.getKDtree=function(e,t,n){null==n&&(n=1e-4);var r=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=UPNG.quantize.stats(e,i.i0,i.i1),i.est=UPNG.quantize.estats(i.bst);for(var o=[i];o.length<t;){for(var s=0,a=0,c=0;c<o.length;c++)o[c].est.L>s&&(s=o[c].est.L,a=c);if(s<n)break;var l=o[a],u=UPNG.quantize.splitPixels(e,r,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=u||l.i1<=u)l.est.L=0;else{var p={i0:l.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};p.bst=UPNG.quantize.stats(e,p.i0,p.i1),p.est=UPNG.quantize.estats(p.bst);var d={i0:u,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(d.bst={R:[],m:[],N:l.bst.N-p.bst.N},c=0;c<16;c++)d.bst.R[c]=l.bst.R[c]-p.bst.R[c];for(c=0;c<4;c++)d.bst.m[c]=l.bst.m[c]-p.bst.m[c];d.est=UPNG.quantize.estats(d.bst),l.left=p,l.right=d,o[a]=p,o.push(d)}}for(o.sort((function(e,t){return t.bst.N-e.bst.N})),c=0;c<o.length;c++)o[c].ind=c;return[i,o]},UPNG.quantize.getNearest=function(e,t,n,r,i){if(null==e.left)return e.tdst=UPNG.quantize.dist(e.est.q,t,n,r,i),e;var o=UPNG.quantize.planeDst(e.est,t,n,r,i),s=e.left,a=e.right;o>0&&(s=e.right,a=e.left);var c=UPNG.quantize.getNearest(s,t,n,r,i);if(c.tdst<=o*o)return c;var l=UPNG.quantize.getNearest(a,t,n,r,i);return l.tdst<c.tdst?l:c},UPNG.quantize.planeDst=function(e,t,n,r,i){var o=e.e;return o[0]*t+o[1]*n+o[2]*r+o[3]*i-e.eMq},UPNG.quantize.dist=function(e,t,n,r,i){var o=t-e[0],s=n-e[1],a=r-e[2],c=i-e[3];return o*o+s*s+a*a+c*c},UPNG.quantize.splitPixels=function(e,t,n,r,i,o){var s=UPNG.quantize.vecDot;for(r-=4;n<r;){for(;s(e,n,i)<=o;)n+=4;for(;s(e,r,i)>o;)r-=4;if(n>=r)break;var a=t[n>>2];t[n>>2]=t[r>>2],t[r>>2]=a,n+=4,r-=4}for(;s(e,n,i)>o;)n-=4;return n+4},UPNG.quantize.vecDot=function(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]},UPNG.quantize.stats=function(e,t,n){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=n-t>>2,s=t;s<n;s+=4){var a=e[s]*(1/255),c=e[s+1]*(1/255),l=e[s+2]*(1/255),u=e[s+3]*(1/255);i[0]+=a,i[1]+=c,i[2]+=l,i[3]+=u,r[0]+=a*a,r[1]+=a*c,r[2]+=a*l,r[3]+=a*u,r[5]+=c*c,r[6]+=c*l,r[7]+=c*u,r[10]+=l*l,r[11]+=l*u,r[15]+=u*u}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:o}},UPNG.quantize.estats=function(e){var t=e.R,n=e.m,r=e.N,i=n[0],o=n[1],s=n[2],a=n[3],c=0==r?0:1/r,l=[t[0]-i*i*c,t[1]-i*o*c,t[2]-i*s*c,t[3]-i*a*c,t[4]-o*i*c,t[5]-o*o*c,t[6]-o*s*c,t[7]-o*a*c,t[8]-s*i*c,t[9]-s*o*c,t[10]-s*s*c,t[11]-s*a*c,t[12]-a*i*c,t[13]-a*o*c,t[14]-a*s*c,t[15]-a*a*c],u=l,p=UPNG.M4,d=[Math.random(),Math.random(),Math.random(),Math.random()],h=0,f=0;if(0!=r)for(var m=0;m<16&&(d=p.multVec(u,d),f=Math.sqrt(p.dot(d,d)),d=p.sml(1/f,d),!(0!=m&&Math.abs(f-h)<1e-9));m++)h=f;var _=[i*c,o*c,s*c,a*c];return{Cov:l,q:_,e:d,L:h,eMq255:p.dot(p.sml(255,_),d),eMq:p.dot(d,_),rgba:(Math.round(255*_[3])<<24|Math.round(255*_[2])<<16|Math.round(255*_[1])<<8|Math.round(255*_[0])<<0)>>>0}},UPNG.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},UPNG.encode.concatRGBA=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].byteLength;var r=new Uint8Array(t),i=0;for(n=0;n<e.length;n++){for(var o=new Uint8Array(e[n]),s=o.length,a=0;a<s;a+=4){var c=o[a],l=o[a+1],u=o[a+2],p=o[a+3];0==p&&(c=l=u=0),r[i+a]=c,r[i+a+1]=l,r[i+a+2]=u,r[i+a+3]=p}i+=s}return r.buffer};var isBrowser="undefined"!=typeof window,moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||FileReader);function isAutoOrientationInBrowser(){return new Promise((function(e,t){var n,r,i,o;return void 0!==isAutoOrientationInBrowser.result?e(isAutoOrientationInBrowser.result):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(s){try{return drawFileInCanvas(n=s).then((function(s){try{return canvasToFile(r=s[1],n.type,n.name,n.lastModified).then((function(n){try{return i=n,cleanupCanvasMemory(r),drawFileInCanvas(i).then((function(n){try{return o=n[0],isAutoOrientationInBrowser.result=1===o.width&&2===o.height,e(isAutoOrientationInBrowser.result)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}catch(e){return t(e)}}),t)}))}function getDataUrlFromFile(e){return new Promise((function(t,n){var r=new CustomFileReader;r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))}function getFilefromDataUrl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((function(r){for(var i=e.split(","),o=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]),a=s.length,c=new Uint8Array(a);a--;)c[a]=s.charCodeAt(a);var l=new Blob([c],{type:o});l.name=t,l.lastModified=n,r(l)}))}function loadImage(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=function(e){return n(e)},r.src=e}))}function drawImageInCanvas(e){var t=_slicedToArray(getNewCanvasAndCtx(e.width,e.height),2),n=t[0];return t[1].drawImage(e,0,0,n.width,n.height),n}function drawFileInCanvas(e){return new Promise((function(t,n){var r,i,o=function(){try{return i=drawImageInCanvas(r),t([r,i])}catch(e){return n(e)}},s=function(t){try{return getDataUrlFromFile(e).then((function(e){try{return loadImage(e).then((function(e){try{return r=e,o()}catch(e){return n(e)}}),n)}catch(e){return n(e)}}),n)}catch(e){return n(e)}};try{return createImageBitmap(e).then((function(e){try{return r=e,o()}catch(e){return s()}}),s)}catch(e){s()}}))}function canvasToFile(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(o,s){var a,c,l;if("image/png"===t)return c=e.getContext("2d").getImageData(0,0,e.width,e.height).data,l=UPNG.encode([c],e.width,e.height,256*i),(a=new Blob([l],{type:t})).name=n,a.lastModified=r,u.call(this);{return"function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?e.convertToBlob({type:t,quality:i}).then(function(e){try{return(a=e).name=n,a.lastModified=r,o.call(this)}catch(e){return s(e)}}.bind(this),s):getFilefromDataUrl(e.toDataURL(t,i),n,r).then(function(e){try{return a=e,o.call(this)}catch(e){return s(e)}}.bind(this),s);function o(){return u.call(this)}}function u(){return o(a)}}))}function getExifOrientation(e){return new Promise((function(t,n){var r=new CustomFileReader;r.onload=function(e){var n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);for(var r=n.byteLength,i=2;i<r;){if(n.getUint16(i+2,!1)<=8)return t(-1);var o=n.getUint16(i,!1);if(i+=2,65505==o){if(1165519206!=n.getUint32(i+=2,!1))return t(-1);var s=18761==n.getUint16(i+=6,!1);i+=n.getUint32(i+4,s);var a=n.getUint16(i,s);i+=2;for(var c=0;c<a;c++)if(274==n.getUint16(i+12*c,s))return t(n.getUint16(i+12*c+8,s))}else{if(65280!=(65280&o))break;i+=n.getUint16(i,!1)}}return t(-1)},r.onerror=function(e){return n(e)},r.readAsArrayBuffer(e)}))}function handleMaxWidthOrHeight(e,t){var n,r=e.width,i=e.height,o=t.maxWidthOrHeight,s=e;if(isFinite(o)&&(r>o||i>o)){var a=_slicedToArray(getNewCanvasAndCtx(r,i),2);s=a[0],n=a[1],r>i?(s.width=o,s.height=i/r*o):(s.width=r/i*o,s.height=o),n.drawImage(e,0,0,s.width,s.height),cleanupCanvasMemory(e)}return s}function followExifOrientation(e,t){var n=e.width,r=e.height,i=_slicedToArray(getNewCanvasAndCtx(n,r),2),o=i[0],s=i[1];switch(4<t&&t<9?(o.width=r,o.height=n):(o.width=n,o.height=r),t){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,r),cleanupCanvasMemory(e),o}function getNewCanvasAndCtx(e,t){var n,r;try{if(null===(r=(n=new OffscreenCanvas(e,t)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(e){r=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=t,[n,r]}function cleanupCanvasMemory(e){e.width=0,e.height=0}function compress(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,i){var o,s,a,c,l,u,p,d,h,f,m,_,g,v,y,b,w,E;function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;o+=e,t.onProgress(Math.min(o,100))}function P(e){o=Math.min(Math.max(e,o),100),t.onProgress(o)}return o=n,s=t.maxIteration||10,a=1024*t.maxSizeMB*1024,$(),drawFileInCanvas(e).then(function(n){try{var o=_slicedToArray(n,2);return o[0],c=o[1],$(),l=handleMaxWidthOrHeight(c,t),$(),new Promise((function(n,r){var i;if(!(i=t.exifOrientation))return getExifOrientation(e).then(function(e){try{return i=e,o.call(this)}catch(e){return r(e)}}.bind(this),r);function o(){return n(i)}return o.call(this)})).then(function(n){try{return u=n,$(),isAutoOrientationInBrowser().then(function(n){try{return p=n?l:followExifOrientation(l,u),$(),d=t.initialQuality||1,h=t.fileType||e.type,canvasToFile(p,h,e.name,e.lastModified,d).then(function(t){try{{if(f=t,$(),m=f.size>a,_=f.size>e.size,!m&&!_)return P(100),r(f);var n;function o(){if(s--&&(y>a||y>g)){var t,n,r=_slicedToArray(getNewCanvasAndCtx(t=m?.95*E.width:E.width,n=m?.95*E.height:E.height),2);return w=r[0],r[1].drawImage(E,0,0,t,n),d*=.95,canvasToFile(w,h,e.name,e.lastModified,d).then((function(e){try{return b=e,cleanupCanvasMemory(E),E=w,y=b.size,P(Math.min(99,Math.floor((v-y)/(v-a)*100))),o}catch(e){return i(e)}}),i)}return[1]}return g=e.size,v=f.size,y=v,E=p,(n=function(e){for(;e;){if(e.then)return void e.then(n,i);try{if(e.pop){if(e.length)return e.pop()?u.call(this):e;e=o}else e=e.call(this)}catch(e){return i(e)}}}.bind(this))(o);function u(){return cleanupCanvasMemory(E),cleanupCanvasMemory(w),cleanupCanvasMemory(l),cleanupCanvasMemory(p),cleanupCanvasMemory(c),P(100),r(b)}}}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}catch(e){return i(e)}}.bind(this),i)}))}isBrowser&&(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var cnt=0,imageCompressionLibUrl,worker;function createWorker(e){return"function"==typeof e&&(e="(".concat(f,")()")),new Worker(URL.createObjectURL(new Blob([e])))}function createSourceObject(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}function stringify(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"BIC_FN:::(() => ".concat(t.toString(),")()"):t}))}function parse(o){if("string"==typeof o)return o;var result={};return Object.entries(o).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if("string"==typeof value&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(e){throw console.log(key,e),e}else result[key]=parse(value)})),result}function generateLib(){return createSourceObject("\n    // reconstruct library\n    function imageCompression (){return (".concat(imageCompression,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(imageCompression.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(imageCompression.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(imageCompression.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(imageCompression.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(imageCompression.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(imageCompression.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(imageCompression.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(imageCompression.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(imageCompression.followExifOrientation,"\n    imageCompression.cleanupCanvasMemory = ").concat(imageCompression.cleanupCanvasMemory,"\n    imageCompression.isAutoOrientationInBrowser = ").concat(imageCompression.isAutoOrientationInBrowser,"\n\n    // functions / objects\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory\n    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser\n    \n    getNewCanvasAndCtx = ").concat(getNewCanvasAndCtx,"\n    CustomFileReader = FileReader\n    CustomFile = File\n    function _slicedToArray(arr, n) { return arr }\n    function _typeof(a) { return typeof a }\n    function compress (){return (").concat(compress,").apply(null, arguments)}\n\n    // Libraries\n    const parse = ").concat(parse,"\n    const UPNG = {}\n    UPNG.toRGBA8 = ").concat(UPNG.toRGBA8,"\n    UPNG.toRGBA8.decodeImage = ").concat(UPNG.toRGBA8.decodeImage,"\n    UPNG.decode = ").concat(UPNG.decode,"\n    UPNG.decode._decompress = ").concat(UPNG.decode._decompress,"\n    UPNG.decode._inflate = ").concat(UPNG.decode._inflate,"\n    UPNG.decode._readInterlace = ").concat(UPNG.decode._readInterlace,"\n    UPNG.decode._getBPP = ").concat(UPNG.decode._getBPP," \n    UPNG.decode._filterZero = ").concat(UPNG.decode._filterZero,"\n    UPNG.decode._paeth = ").concat(UPNG.decode._paeth,"\n    UPNG.decode._IHDR = ").concat(UPNG.decode._IHDR,"\n    UPNG._bin = parse(").concat(stringify(UPNG._bin),")\n    UPNG._copyTile = ").concat(UPNG._copyTile,"\n    UPNG.encode = ").concat(UPNG.encode,"\n    UPNG.encodeLL = ").concat(UPNG.encodeLL," \n    UPNG.encode._main = ").concat(UPNG.encode._main,"\n    UPNG.encode.compressPNG = ").concat(UPNG.encode.compressPNG," \n    UPNG.encode.compress = ").concat(UPNG.encode.compress,"\n    UPNG.encode.framize = ").concat(UPNG.encode.framize," \n    UPNG.encode._updateFrame = ").concat(UPNG.encode._updateFrame," \n    UPNG.encode._prepareDiff = ").concat(UPNG.encode._prepareDiff," \n    UPNG.encode._filterZero = ").concat(UPNG.encode._filterZero," \n    UPNG.encode._filterLine = ").concat(UPNG.encode._filterLine,"\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,"\n    UPNG.crc = parse(").concat(stringify(UPNG.crc),")\n    UPNG.crc.table = ( function() {\n    var tab = new Uint32Array(256);\n    for (var n=0; n<256; n++) {\n      var c = n;\n      for (var k=0; k<8; k++) {\n        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n        else        c = c >>> 1;\n      }\n      tab[n] = c;  }\n    return tab;  })()\n    UPNG.quantize = ").concat(UPNG.quantize," \n    UPNG.quantize.getKDtree = ").concat(UPNG.quantize.getKDtree," \n    UPNG.quantize.getNearest = ").concat(UPNG.quantize.getNearest," \n    UPNG.quantize.planeDst = ").concat(UPNG.quantize.planeDst," \n    UPNG.quantize.dist = ").concat(UPNG.quantize.dist,"     \n    UPNG.quantize.splitPixels = ").concat(UPNG.quantize.splitPixels," \n    UPNG.quantize.vecDot = ").concat(UPNG.quantize.vecDot," \n    UPNG.quantize.stats = ").concat(UPNG.quantize.stats," \n    UPNG.quantize.estats = ").concat(UPNG.quantize.estats,"\n    UPNG.M4 = parse(").concat(stringify(UPNG.M4),")\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,'\n    UPNG.inflateRaw=function(){\n    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;\n      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;\n      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);\n        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;\n        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;\n        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;\n                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;\n        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);\n        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;\n        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);\n        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};\n      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};\n      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;\n        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);\n          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;\n        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};\n      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;\n        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];\n          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);\n        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;\n                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};\n      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};\n      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};\n      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;\n        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();\n      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;\n        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;\n        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];\n        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);\n        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);\n        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()\n    \n    const UZIP = {}\n    UZIP["parse"] = ').concat(UZIP_1.parse,"\n    UZIP._readLocal = ").concat(UZIP_1._readLocal,"\n    UZIP.inflateRaw = ").concat(UZIP_1.inflateRaw,"\n    UZIP.inflate = ").concat(UZIP_1.inflate,"\n    UZIP.deflate = ").concat(UZIP_1.deflate,"\n    UZIP.deflateRaw = ").concat(UZIP_1.deflateRaw,"\n    UZIP.encode = ").concat(UZIP_1.encode,"\n    UZIP._noNeed = ").concat(UZIP_1._noNeed,"\n    UZIP._writeHeader = ").concat(UZIP_1._writeHeader,"\n    UZIP.crc = parse(").concat(stringify(UZIP_1.crc),")\n    UZIP.crc.table = ( function() {\n      var tab = new Uint32Array(256);\n      for (var n=0; n<256; n++) {\n        var c = n;\n        for (var k=0; k<8; k++) {\n          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n          else        c = c >>> 1;\n        }\n        tab[n] = c;  }\n      return tab;  })()\n    \n    UZIP.adler = ").concat(UZIP_1.adler,"\n    UZIP.bin = parse(").concat(stringify(UZIP_1.bin),")\n    UZIP.F = {}\n    UZIP.F.deflateRaw = ").concat(UZIP_1.F.deflateRaw,"\n    UZIP.F._bestMatch = ").concat(UZIP_1.F._bestMatch,"\n    UZIP.F._howLong = ").concat(UZIP_1.F._howLong,"\n    UZIP.F._hash = ").concat(UZIP_1.F._hash,"\n    UZIP.saved = ").concat(UZIP_1.saved,"\n    UZIP.F._writeBlock = ").concat(UZIP_1.F._writeBlock,"\n    UZIP.F._copyExact = ").concat(UZIP_1.F._copyExact,"\n    UZIP.F.getTrees = ").concat(UZIP_1.F.getTrees,"\n    UZIP.F.getSecond = ").concat(UZIP_1.F.getSecond,"\n    UZIP.F.nonZero = ").concat(UZIP_1.F.nonZero,"\n    UZIP.F.contSize = ").concat(UZIP_1.F.contSize,"\n    UZIP.F._codeTiny = ").concat(UZIP_1.F._codeTiny," \n    UZIP.F._lenCodes = ").concat(UZIP_1.F._lenCodes," \n    UZIP.F._hufTree = ").concat(UZIP_1.F._hufTree," \n    UZIP.F.setDepth = ").concat(UZIP_1.F.setDepth," \n    UZIP.F.restrictDepth = ").concat(UZIP_1.F.restrictDepth,"\n    UZIP.F._goodIndex = ").concat(UZIP_1.F._goodIndex," \n    UZIP.F._writeLit = ").concat(UZIP_1.F._writeLit," \n    UZIP.F.inflate = ").concat(UZIP_1.F.inflate," \n    UZIP.F._check = ").concat(UZIP_1.F._check," \n    UZIP.F._decodeTiny = ").concat(UZIP_1.F._decodeTiny," \n    UZIP.F._copyOut = ").concat(UZIP_1.F._copyOut," \n    UZIP.F.makeCodes = ").concat(UZIP_1.F.makeCodes," \n    UZIP.F.codes2map = ").concat(UZIP_1.F.codes2map," \n    UZIP.F.revCodes = ").concat(UZIP_1.F.revCodes," \n\n    // used only in deflate\n    UZIP.F._putsE = ").concat(UZIP_1.F._putsE,"\n    UZIP.F._putsF = ").concat(UZIP_1.F._putsF,"\n  \n    UZIP.F._bitsE = ").concat(UZIP_1.F._bitsE,"\n    UZIP.F._bitsF = ").concat(UZIP_1.F._bitsF,"\n\n    UZIP.F._get17 = ").concat(UZIP_1.F._get17,"\n    UZIP.F._get25 = ").concat(UZIP_1.F._get25,"\n    UZIP.F.U = function(){\n      var u16=Uint16Array, u32=Uint32Array;\n      return {\n        next_code : new u16(16),\n        bl_count  : new u16(16),\n        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n        ldef : new u16(32),\n        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n        ddef : new u32(32),\n        flmap: new u16(  512),  fltree: [],\n        fdmap: new u16(   32),  fdtree: [],\n        lmap : new u16(32768),  ltree : [],  ttree:[],\n        dmap : new u16(32768),  dtree : [],\n        imap : new u16(  512),  itree : [],\n        //rev9 : new u16(  512)\n        rev15: new u16(1<<15),\n        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n        lits : new u32(15000),\n        strt : new u16(1<<16),\n        prev : new u16(1<<15)\n      };\n    } ();\n\n    (function(){\n      var U = UZIP.F.U;\n      var len = 1<<15;\n      for(var i=0; i<len; i++) {\n        var x = i;\n        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n      }\n  \n      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n  \n      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n  \n      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n      /*\n        var i = 0;\n        for(; i<=143; i++) U.fltree.push(0,8);\n        for(; i<=255; i++) U.fltree.push(0,9);\n        for(; i<=279; i++) U.fltree.push(0,7);\n        for(; i<=287; i++) U.fltree.push(0,8);\n        */\n      UZIP.F.makeCodes(U.fltree, 9);\n      UZIP.F.codes2map(U.fltree, 9, U.flmap);\n      UZIP.F.revCodes (U.fltree, 9)\n  \n      pushV(U.fdtree,32,5);\n      //for(i=0;i<32; i++) U.fdtree.push(0,5);\n      UZIP.F.makeCodes(U.fdtree, 5);\n      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);\n      UZIP.F.revCodes (U.fdtree, 5)\n  \n      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n      /*\n        for(var i=0; i< 19; i++) U.itree.push(0,0);\n        for(var i=0; i<286; i++) U.ltree.push(0,0);\n        for(var i=0; i< 30; i++) U.dtree.push(0,0);\n        for(var i=0; i<320; i++) U.ttree.push(0,0);\n        */\n    })()\n    "))}function generateWorkerScript(){return createWorker("\n    let scriptImported = false\n    self.addEventListener('message', async (e) => {\n      const { file, id, imageCompressionLibUrl, options } = e.data\n      options.onProgress = (progress) => self.postMessage({ progress, id })\n      try {\n        if (!scriptImported) {\n          // console.log('[worker] importScripts', imageCompressionLibUrl)\n          self.importScripts(imageCompressionLibUrl)\n          scriptImported = true\n        }\n        // console.log('[worker] self', self)\n        const compressedFile = await imageCompression(file, options)\n        self.postMessage({ file: compressedFile, id })\n      } catch (e) {\n        // console.error('[worker] error', e)\n        self.postMessage({ error: e.message + '\\n' + e.stack, id })\n      }\n    })\n  ")}function compressOnWebWorker(e,t){return new Promise((function(n,r){return new Promise((function(i,o){var s=cnt++;return imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",(function e(i){if(i.data.id===s){if(void 0!==i.data.progress)return void t.onProgress(i.data.progress);worker.removeEventListener("message",e),i.data.error&&r(new Error(i.data.error)),n(i.data.file)}})),worker.addEventListener("error",r),worker.postMessage({file:e,id:s,imageCompressionLibUrl:imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},t),{},{onProgress:void 0})}),i()}))}))}function imageCompression(e,t){return new Promise((function(n,r){var i,o,s,a,c;if(o=0,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,a="boolean"!=typeof t.useWebWorker||t.useWebWorker,delete t.useWebWorker,s=t.onProgress,t.onProgress=function(e){o=e,"function"==typeof s&&s(o)},!(e instanceof Blob||e instanceof CustomFile))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return r(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!a||"function"!=typeof Worker||c)return compress(e,t).then(function(e){try{return i=e,p.call(this)}catch(e){return r(e)}}.bind(this),r);var l=function(){try{return p.call(this)}catch(e){return r(e)}}.bind(this),u=function(n){try{return compress(e,t).then((function(e){try{return i=e,l()}catch(e){return r(e)}}),r)}catch(e){return r(e)}};try{return compressOnWebWorker(e,t).then((function(e){try{return i=e,l()}catch(e){return u()}}),u)}catch(e){u()}function p(){try{i.name=e.name,i.lastModified=e.lastModified}catch(e){}return n(i)}}))}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.version="1.0.14";let nanoid=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t};const uploadMultipleImage=async(e,t)=>{var{dirs:n,bucket:r}=t,i=__rest(t,["dirs","bucket"]);const o=await Promise.all(Array.from(e).map((e=>imageCompression(e,i))));return(await Promise.all(o.map((e=>(async()=>{const t=Date.now().toString()+"@"+nanoid(4),i=e.name.split("."),o=i[i.length-1],s=n+"/"+t+"."+o,{error:a}=await supabase.storage.from(r).upload(s,e,{upsert:!1});if(a)throw a;const{publicURL:c}=supabase.storage.from(r).getPublicUrl(s);return c})())))).filter((e=>!!e))};function get_each_context(e,t,n){const r=e.slice();return r[11]=t[n],r}function get_each_context_1(e,t,n){const r=e.slice();return r[14]=t[n],r}function create_each_block_1(e){let t,n,r,i,o,s,a,c,l,u;function p(){return e[8](e[14])}return s=new SvgUploadClose({}),{c(){t=element("div"),n=element("img"),i=space(),o=element("div"),create_component(s.$$.fragment),a=space(),attr(n,"class","uploaded-image svelte-139pe17"),attr(n,"alt","uploadedImage"),src_url_equal(n.src,r=e[14])||attr(n,"src",r),attr(o,"class","uploaded-image-close svelte-139pe17"),attr(t,"class","uploaded-image-conatiner svelte-139pe17")},m(e,r){insert(e,t,r),append(t,n),append(t,i),append(t,o),mount_component(s,o,null),append(t,a),c=!0,l||(u=listen(o,"click",p),l=!0)},p(t,i){e=t,(!c||1&i&&!src_url_equal(n.src,r=e[14]))&&attr(n,"src",r)},i(e){c||(transition_in(s.$$.fragment,e),c=!0)},o(e){transition_out(s.$$.fragment,e),c=!1},d(e){e&&detach(t),destroy_component(s),l=!1,u()}}}function create_each_block(e){let t;return{c(){t=element("div"),attr(t,"class","image-empty-container svelte-139pe17")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_fragment$4(e){let t,n,r,i,o,s,a,c,l,u;r=new SvgUploadPlus({});let p=e[0],d=[];for(let t=0;t<p.length;t+=1)d[t]=create_each_block_1(get_each_context_1(e,p,t));const h=e=>transition_out(d[e],1,1,(()=>{d[e]=null}));let f=Array(e[1]-e[0].length).fill(0),m=[];for(let t=0;t<f.length;t+=1)m[t]=create_each_block(get_each_context(e,f,t));return{c(){t=element("main"),n=element("div"),create_component(r.$$.fragment),i=space();for(let e=0;e<d.length;e+=1)d[e].c();o=space();for(let e=0;e<m.length;e+=1)m[e].c();s=space(),a=element("input"),attr(n,"class","upload-button svelte-139pe17"),a.multiple=!0,attr(a,"type","file"),attr(a,"accept",".jpg, .jpeg, .png"),a.disabled=e[4],attr(a,"class","svelte-139pe17"),attr(t,"class","svelte-139pe17")},m(p,h){insert(p,t,h),append(t,n),mount_component(r,n,null),append(t,i);for(let e=0;e<d.length;e+=1)d[e].m(t,null);append(t,o);for(let e=0;e<m.length;e+=1)m[e].m(t,null);append(t,s),append(t,a),e[9](a),c=!0,l||(u=[listen(n,"click",e[6]),listen(a,"change",e[10])],l=!0)},p(e,[n]){if(129&n){let r;for(p=e[0],r=0;r<p.length;r+=1){const i=get_each_context_1(e,p,r);d[r]?(d[r].p(i,n),transition_in(d[r],1)):(d[r]=create_each_block_1(i),d[r].c(),transition_in(d[r],1),d[r].m(t,o))}for(group_outros(),r=p.length;r<d.length;r+=1)h(r);check_outros()}if(3&n){const n=f.length;let r;for(f=Array(e[1]-e[0].length).fill(0),r=n;r<f.length;r+=1)get_each_context(e,f,r),m[r]||(m[r]=create_each_block(),m[r].c(),m[r].m(t,s));for(r=f.length;r<n;r+=1)m[r].d(1);m.length=f.length}(!c||16&n)&&(a.disabled=e[4])},i(e){if(!c){transition_in(r.$$.fragment,e);for(let e=0;e<p.length;e+=1)transition_in(d[e]);c=!0}},o(e){transition_out(r.$$.fragment,e),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)transition_out(d[e]);c=!1},d(n){n&&detach(t),destroy_component(r),destroy_each(d,n),destroy_each(m,n),e[9](null),l=!1,run_all(u)}}}function instance$4(e,t,n){let r,{max:i=7}=t,{uris:o}=t,{option:s}=t,a=!1;const c=(e,t,r)=>__awaiter$9(void 0,void 0,void 0,(function*(){try{if(a||!r||o.length>=i)return;n(4,a=!0);const s=Array.from(r).slice(0,i-o.length),c=yield uploadMultipleImage(s,t);n(0,o=[...e,...c])}catch(e){console.error(e)}finally{n(4,a=!1)}})),l=e=>{n(0,o=o.filter((t=>t!==e)))};return e.$$set=e=>{"max"in e&&n(1,i=e.max),"uris"in e&&n(0,o=e.uris),"option"in e&&n(2,s=e.option)},[o,i,s,r,a,c,()=>{o.length>=i||r.click()},l,e=>l(e),function(e){binding_callbacks[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},e=>c(o,s,e.currentTarget.files)]}class ImageUpload extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{max:1,uris:0,option:2})}}function create_rightElement_slot(e){let t,n,r=e[1].currency+"";return{c(){t=element("div"),n=text(r),set_style(t,"font-size","14px"),attr(t,"slot","rightElement")},m(e,r){insert(e,t,r),append(t,n)},p(e,t){2&t&&r!==(r=e[1].currency+"")&&set_data(n,r)},d(e){e&&detach(t)}}}function create_default_slot_2(e){let t,n=e[5]("Feed.FeedCreatePopup.cancel")+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,r){32&r&&n!==(n=e[5]("Feed.FeedCreatePopup.cancel")+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_default_slot_1(e){let t,n=e[5]("Feed.FeedCreatePopup.submit")+"";return{c(){t=text(n)},m(e,n){insert(e,t,n)},p(e,r){32&r&&n!==(n=e[5]("Feed.FeedCreatePopup.submit")+"")&&set_data(t,n)},d(e){e&&detach(t)}}}function create_default_slot$1(e){let t,n,r,i,o,s,a,c,l,u,p,d,h,f,m,_,g,v,y,b,w,E,$,P,T,A,S,U,N,C,x,I,k,O,R,F,L,G,M,D,j,B,H,W,z,q,Z,V,K,Y,X,Q,J,ee,te,ne,re,ie,oe,se,ae,ce,le,ue,pe,de,he,fe,me,_e,ge,ve,ye,be,we,Ee,$e=e[1].name+"",Pe=e[5]("Feed.FeedCreatePopup.category")+"",Te=e[5]("Feed.FeedCreatePopup.income")+"",Ae=e[5]("Feed.FeedCreatePopup.spending")+"",Se=e[5]("Feed.FeedCreatePopup.price")+"",Ue=e[5]("Feed.FeedCreatePopup.title")+"",Ne=e[5]("Feed.FeedCreatePopup.content")+"",Ce=e[5]("Feed.FeedCreatePopup.image")+"",xe=e[5]("Feed.FeedCreatePopup.image_hint")+"";function Ie(t){e[10](t)}r=new SvgFeedCreatePopupClose({}),v=new SvgPlusCircle({}),U=new SvgMinusCircle({});let ke={placeholder:e[5]("Feed.FeedCreatePopup.price_hint"),containerStyle:"height:40px; flex:1;",inputStyle:"margin:0px; "+(void 0!==e[2].price?"text-align:right; font-weight:bold;":"text-align:left; font-weight:normal;"),isLocaleString:!0,$$slots:{rightElement:[create_rightElement_slot]},$$scope:{ctx:e}};function Oe(t){e[11](t)}void 0!==e[2].price&&(ke.value=e[2].price),D=new EditNumber({props:ke}),binding_callbacks.push((()=>bind(D,"value",Ie)));let Re={placeholder:e[5]("Feed.FeedCreatePopup.title_hint"),containerStyle:"height:40px; flex:1;",inputStyle:"margin:0px;"};function Fe(t){e[12](t)}void 0!==e[2].title&&(Re.value=e[2].title),V=new EditText({props:Re}),binding_callbacks.push((()=>bind(V,"value",Oe)));let Le={placeholder:e[5]("Feed.FeedCreatePopup.content_hint"),style:"height:162px;"};function Ge(t){e[13](t)}void 0!==e[2].content&&(Le.value=e[2].content),ne=new EditTextArea({props:Le}),binding_callbacks.push((()=>bind(ne,"value",Fe)));let Me={option:{bucket:"staging",dirs:"feeds",maxSizeMB:1}};return void 0!==e[2].uris&&(Me.uris=e[2].uris),he=new ImageUpload({props:Me}),binding_callbacks.push((()=>bind(he,"uris",Ge))),ge=new Button({props:{style:"background-color:transparent; border:none; width:72px; height:40px;",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:e}}}),ge.$on("click",e[6]),ye=new Button({props:{style:"width:72px; height:40px; margin-left:8px;: border:none; "+(e[4]?"":"color: var(--gray10); background-color: var(--gray40);"),primary:!0,disabled:!e[4],$$slots:{default:[create_default_slot_1]},$$scope:{ctx:e}}}),ye.$on("click",e[14]),{c(){t=element("div"),n=element("div"),create_component(r.$$.fragment),i=space(),o=element("div"),s=element("img"),c=space(),l=element("div"),u=text($e),p=space(),d=element("div"),h=element("div"),f=text(Pe),m=space(),_=element("div"),g=element("div"),create_component(v.$$.fragment),y=space(),b=element("div"),w=text(Te),P=space(),T=element("div"),A=space(),S=element("div"),create_component(U.$$.fragment),N=space(),C=element("div"),x=text(Ae),O=space(),R=element("div"),F=element("div"),L=text(Se),G=space(),M=element("div"),create_component(D.$$.fragment),B=space(),H=element("div"),W=element("div"),z=text(Ue),q=space(),Z=element("div"),create_component(V.$$.fragment),Y=space(),X=element("div"),Q=element("div"),J=text(Ne),ee=space(),te=element("div"),create_component(ne.$$.fragment),ie=space(),oe=element("div"),se=element("div"),ae=text(Ce),ce=space(),le=element("div"),ue=text(xe),pe=space(),de=element("div"),create_component(he.$$.fragment),me=space(),_e=element("div"),create_component(ge.$$.fragment),ve=space(),create_component(ye.$$.fragment),attr(n,"class","close svelte-1yrn06p"),attr(s,"class","icon svelte-1yrn06p"),attr(s,"alt","communityIcon"),src_url_equal(s.src,a=e[1].iconUri)||attr(s,"src",a),attr(l,"class","name svelte-1yrn06p"),attr(o,"class","community-info-container svelte-1yrn06p"),attr(h,"class","label svelte-1yrn06p"),attr(b,"class","type-text svelte-1yrn06p"),attr(b,"style",E="income"===e[3]?" color: var(--blue50);":""),attr(g,"class","type-btn svelte-1yrn06p"),attr(g,"style",$="income"===e[3]?"background-color:var(--blue10);":""),set_style(T,"width","6px"),attr(C,"class","type-text svelte-1yrn06p"),attr(C,"style",I="spending"===e[3]?" color: var(--red50);":""),attr(S,"class","type-btn svelte-1yrn06p"),attr(S,"style",k="spending"===e[3]?"background-color:var(--red10); color: var(--red50);":""),attr(_,"class","content svelte-1yrn06p"),attr(d,"class","content-item-container svelte-1yrn06p"),attr(F,"class","label svelte-1yrn06p"),attr(M,"class","content svelte-1yrn06p"),attr(R,"class","content-item-container svelte-1yrn06p"),attr(W,"class","label svelte-1yrn06p"),attr(Z,"class","content svelte-1yrn06p"),attr(H,"class","content-item-container svelte-1yrn06p"),attr(Q,"class","label svelte-1yrn06p"),attr(te,"class","content svelte-1yrn06p"),attr(X,"class","content-item-container svelte-1yrn06p"),attr(le,"class","image-hint svelte-1yrn06p"),attr(se,"class","label svelte-1yrn06p"),attr(de,"class","content svelte-1yrn06p"),attr(oe,"class","content-item-container svelte-1yrn06p"),attr(_e,"class","submit-container svelte-1yrn06p"),attr(t,"class","container svelte-1yrn06p")},m(a,E){insert(a,t,E),append(t,n),mount_component(r,n,null),append(t,i),append(t,o),append(o,s),append(o,c),append(o,l),append(l,u),append(t,p),append(t,d),append(d,h),append(h,f),append(d,m),append(d,_),append(_,g),mount_component(v,g,null),append(g,y),append(g,b),append(b,w),append(_,P),append(_,T),append(_,A),append(_,S),mount_component(U,S,null),append(S,N),append(S,C),append(C,x),append(t,O),append(t,R),append(R,F),append(F,L),append(R,G),append(R,M),mount_component(D,M,null),append(t,B),append(t,H),append(H,W),append(W,z),append(H,q),append(H,Z),mount_component(V,Z,null),append(t,Y),append(t,X),append(X,Q),append(Q,J),append(X,ee),append(X,te),mount_component(ne,te,null),append(t,ie),append(t,oe),append(oe,se),append(se,ae),append(se,ce),append(se,le),append(le,ue),append(oe,pe),append(oe,de),mount_component(he,de,null),append(t,me),append(t,_e),mount_component(ge,_e,null),append(_e,ve),mount_component(ye,_e,null),be=!0,we||(Ee=[listen(n,"click",e[6]),listen(g,"click",e[8]),listen(S,"click",e[9])],we=!0)},p(e,t){(!be||2&t&&!src_url_equal(s.src,a=e[1].iconUri))&&attr(s,"src",a),(!be||2&t)&&$e!==($e=e[1].name+"")&&set_data(u,$e),(!be||32&t)&&Pe!==(Pe=e[5]("Feed.FeedCreatePopup.category")+"")&&set_data(f,Pe),(!be||32&t)&&Te!==(Te=e[5]("Feed.FeedCreatePopup.income")+"")&&set_data(w,Te),(!be||8&t&&E!==(E="income"===e[3]?" color: var(--blue50);":""))&&attr(b,"style",E),(!be||8&t&&$!==($="income"===e[3]?"background-color:var(--blue10);":""))&&attr(g,"style",$),(!be||32&t)&&Ae!==(Ae=e[5]("Feed.FeedCreatePopup.spending")+"")&&set_data(x,Ae),(!be||8&t&&I!==(I="spending"===e[3]?" color: var(--red50);":""))&&attr(C,"style",I),(!be||8&t&&k!==(k="spending"===e[3]?"background-color:var(--red10); color: var(--red50);":""))&&attr(S,"style",k),(!be||32&t)&&Se!==(Se=e[5]("Feed.FeedCreatePopup.price")+"")&&set_data(L,Se);const n={};32&t&&(n.placeholder=e[5]("Feed.FeedCreatePopup.price_hint")),4&t&&(n.inputStyle="margin:0px; "+(void 0!==e[2].price?"text-align:right; font-weight:bold;":"text-align:left; font-weight:normal;")),65538&t&&(n.$$scope={dirty:t,ctx:e}),!j&&4&t&&(j=!0,n.value=e[2].price,add_flush_callback((()=>j=!1))),D.$set(n),(!be||32&t)&&Ue!==(Ue=e[5]("Feed.FeedCreatePopup.title")+"")&&set_data(z,Ue);const r={};32&t&&(r.placeholder=e[5]("Feed.FeedCreatePopup.title_hint")),!K&&4&t&&(K=!0,r.value=e[2].title,add_flush_callback((()=>K=!1))),V.$set(r),(!be||32&t)&&Ne!==(Ne=e[5]("Feed.FeedCreatePopup.content")+"")&&set_data(J,Ne);const i={};32&t&&(i.placeholder=e[5]("Feed.FeedCreatePopup.content_hint")),!re&&4&t&&(re=!0,i.value=e[2].content,add_flush_callback((()=>re=!1))),ne.$set(i),(!be||32&t)&&Ce!==(Ce=e[5]("Feed.FeedCreatePopup.image")+"")&&set_data(ae,Ce),(!be||32&t)&&xe!==(xe=e[5]("Feed.FeedCreatePopup.image_hint")+"")&&set_data(ue,xe);const o={};!fe&&4&t&&(fe=!0,o.uris=e[2].uris,add_flush_callback((()=>fe=!1))),he.$set(o);const c={};65568&t&&(c.$$scope={dirty:t,ctx:e}),ge.$set(c);const l={};16&t&&(l.style="width:72px; height:40px; margin-left:8px;: border:none; "+(e[4]?"":"color: var(--gray10); background-color: var(--gray40);")),16&t&&(l.disabled=!e[4]),65568&t&&(l.$$scope={dirty:t,ctx:e}),ye.$set(l)},i(e){be||(transition_in(r.$$.fragment,e),transition_in(v.$$.fragment,e),transition_in(U.$$.fragment,e),transition_in(D.$$.fragment,e),transition_in(V.$$.fragment,e),transition_in(ne.$$.fragment,e),transition_in(he.$$.fragment,e),transition_in(ge.$$.fragment,e),transition_in(ye.$$.fragment,e),be=!0)},o(e){transition_out(r.$$.fragment,e),transition_out(v.$$.fragment,e),transition_out(U.$$.fragment,e),transition_out(D.$$.fragment,e),transition_out(V.$$.fragment,e),transition_out(ne.$$.fragment,e),transition_out(he.$$.fragment,e),transition_out(ge.$$.fragment,e),transition_out(ye.$$.fragment,e),be=!1},d(e){e&&detach(t),destroy_component(r),destroy_component(v),destroy_component(U),destroy_component(D),destroy_component(V),destroy_component(ne),destroy_component(he),destroy_component(ge),destroy_component(ye),we=!1,run_all(Ee)}}}function create_fragment$3(e){let t,n,r;return n=new Modal({props:{visible:e[0],disableBackdropClickToClose:!0,$$slots:{default:[create_default_slot$1]},$$scope:{ctx:e}}}),n.$on("close",e[6]),{c(){t=text("s"),create_component(n.$$.fragment)},m(e,i){insert(e,t,i),mount_component(n,e,i),r=!0},p(e,[t]){const r={};1&t&&(r.visible=e[0]),65598&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(transition_in(n.$$.fragment,e),r=!0)},o(e){transition_out(n.$$.fragment,e),r=!1},d(e){e&&detach(t),destroy_component(n,e)}}}function instance$3(e,t,n){let r,i;component_subscribe(e,X,(e=>n(5,i=e)));const o=createEventDispatcher();let{visible:s}=t,{communityInfo:a}=t,c={uris:[]},l=null;const u=()=>{n(0,s=!1),n(2,c={uris:[]}),n(3,l=null)},p=e=>{o("submit",e),u()};return e.$$set=e=>{"visible"in e&&n(0,s=e.visible),"communityInfo"in e&&n(1,a=e.communityInfo)},e.$$.update=()=>{12&e.$$.dirty&&n(4,r=c.content&&c.price&&c.title&&c.uris&&l)},[s,a,c,l,r,i,u,p,()=>n(3,l="income"),()=>n(3,l="spending"),function(t){e.$$.not_equal(c.price,t)&&(c.price=t,n(2,c))},function(t){e.$$.not_equal(c.title,t)&&(c.title=t,n(2,c))},function(t){e.$$.not_equal(c.content,t)&&(c.content=t,n(2,c))},function(t){e.$$.not_equal(c.uris,t)&&(c.uris=t,n(2,c))},()=>p(c)]}class FeedCreatePopup extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{visible:0,communityInfo:1})}}function create_default_slot(e){let t;return{c(){t=text("Open Feed Create Popup")},m(e,n){insert(e,t,n)},d(e){e&&detach(t)}}}function create_fragment$2(e){let t,n,r,i,o,s;function a(t){e[2](t)}n=new Button({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),n.$on("click",e[1]);let c={communityInfo:{iconUri:"https://avatars.githubusercontent.com/u/45788556?s=200&v=4",name:"dooboolab",currency:"USD"}};return void 0!==e[0]&&(c.visible=e[0]),i=new FeedCreatePopup({props:c}),binding_callbacks.push((()=>bind(i,"visible",a))),i.$on("submit",e[3]),{c(){t=element("main"),create_component(n.$$.fragment),r=space(),create_component(i.$$.fragment),attr(t,"class","svelte-7gn5wx")},m(e,o){insert(e,t,o),mount_component(n,t,null),append(t,r),mount_component(i,t,null),s=!0},p(e,[t]){const r={};16&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const s={};!o&&1&t&&(o=!0,s.visible=e[0],add_flush_callback((()=>o=!1))),i.$set(s)},i(e){s||(transition_in(n.$$.fragment,e),transition_in(i.$$.fragment,e),s=!0)},o(e){transition_out(n.$$.fragment,e),transition_out(i.$$.fragment,e),s=!1},d(e){e&&detach(t),destroy_component(n),destroy_component(i)}}}function instance$2(e,t,n){let r=!0;return[r,()=>n(0,r=!0),function(e){r=e,n(0,r)},e=>console.log(e.detail)]}class Temp extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}function create_fragment$1(e){let t,n,r,i,o;return n=new Header({}),i=new Router({props:{routes:e[0]}}),{c(){t=element("main"),create_component(n.$$.fragment),r=space(),create_component(i.$$.fragment),attr(t,"class","svelte-1odvdh4")},m(e,s){insert(e,t,s),mount_component(n,t,null),append(t,r),mount_component(i,t,null),o=!0},p:noop$2,i(e){o||(transition_in(n.$$.fragment,e),transition_in(i.$$.fragment,e),o=!0)},o(e){transition_out(n.$$.fragment,e),transition_out(i.$$.fragment,e),o=!1},d(e){e&&detach(t),destroy_component(n),destroy_component(i)}}}function instance$1(e){return[{"/sign_in":SignIn,"/sign_up":SignUp,"/":Intro,"/profile":Profile,"/service_sample":ServiceSample,"/*":Temp}]}class Main extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}const upsertUser=async e=>{if(!e||!e.id)return null;const t={aud:e.aud,confirmation_sent_at:e.confirmation_sent_at,confirmed_at:e.confirmed_at,created_at:e.created_at,email:e.email,email_confirmed_at:e.email_confirmed_at,id:e.id,last_sign_in_at:e.last_sign_in_at,phone:e.phone,phone_confirmed_at:e.phone_confirmed_at,recovery_sent_at:e.recovery_sent_at,role:e.role,updated_at:e.updated_at};try{const{data:e,error:n}=await supabase.from("User").upsert([Object.assign({},t)]).single();if(n)throw n;return e}catch(e){return console.error(e),null}};function create_fragment(e){let t,n,r;return n=new Main({}),{c(){t=element("main"),create_component(n.$$.fragment)},m(e,i){insert(e,t,i),mount_component(n,t,null),r=!0},p:noop$2,i(e){r||(transition_in(n.$$.fragment,e),r=!0)},o(e){transition_out(n.$$.fragment,e),r=!1},d(e){e&&detach(t),destroy_component(n)}}}function instance(e){return supabase.auth.onAuthStateChange(((e,t)=>{t?.user&&upsertUser(t.user),user.set(t?.user)})),[]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}const app=new App({target:document.body});return app}();
//# sourceMappingURL=bundle.js.map
